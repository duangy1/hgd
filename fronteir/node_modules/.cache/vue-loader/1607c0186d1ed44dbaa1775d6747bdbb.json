{"remainingRequest":"F:\\hdb\\fronteir\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\hdb\\fronteir\\src\\views\\gene-detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\hdb\\fronteir\\src\\views\\gene-detail.vue","mtime":1660320730152},{"path":"F:\\hdb\\fronteir\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\hdb\\fronteir\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\hdb\\fronteir\\node_modules\\vue-loader\\lib\\index.js","mtime":1656480287592}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBAIGlzIGFuIGFsaWFzIHRvIC9zcmMNCmltcG9ydCBIZWFkZXJCYXIgZnJvbSAnQC9jb21wb25lbnRzL0hlYWRlckJhci52dWUnOw0KaW1wb3J0IEZvb3RlckJhciBmcm9tICdAL2NvbXBvbmVudHMvRm9vdGVyQmFyLnZ1ZSc7DQppbXBvcnQgQmFubmVyIGZyb20gIkAvY29tcG9uZW50cy9iYW5uZXIudnVlIjsNCmltcG9ydCBsaW5rSWNvbiBmcm9tICJAL2Fzc2V0cy9pbWcvaWNvbi9saW5rLWljb24tNC5zdmciOw0KaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnOw0KLy8gaW1wb3J0IHsgTG9hZGluZyB9IGZyb20gJ2VsZW1lbnQtdWknOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnR2VuZURldGFpbCcsDQogIGNvbXBvbmVudHM6IHsNCiAgICAvLyBOYXZpZ2F0b3IsDQogICAgQmFubmVyLA0KICAgIEhlYWRlckJhciwNCiAgICBGb290ZXJCYXIsDQoNCiAgfSwNCiAgZGF0YSgpew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgICAgdGFiUG9zaXRpb246ImxlZnQiLA0KICAgICAgICBzaXplOiJtZWRpdW0iLA0KICAgICAgICBnZW5lQmFzaWNJbmZvOnt9LA0KICAgICAgICBvcnRob0luZm86W10sDQogICAgICAgIHRhYmxlT3J0aG9MaXN0OltdLA0KICAgICAgICAvLyBnb0xpc3Q6W10sDQogICAgICAgIHZhckxpc3Q6W10sDQogICAgICAgIGxvYWRpbmc6dHJ1ZSwNCiAgICAgICAgZ29sb2FkaW5nOnRydWUsDQogICAgICAgIGxpbmtJY29uLA0KICAgICAgICBkYkV2aWRlbmNlOiIiLA0KICAgICAgICBmb3JtOnsic3BlY2llcyI6eyJnbyI6IiIsIm9ydGhvIjoiIiwidmFyIjoiIiwidHJhaXQiOiIiLCJleHByZXNzaW9uIjoiIn19LA0KICAgICAgICBjaGVja2VkOnsiZ28iOiIiLCJ2YXIiOiIiLCJ0cmFpdCI6IiIsImV4cHJlc3Npb24iOiIifSwNCiAgICAgICAgc3BlY2llczpbXSwNCiAgICAgICAgbmF2QmFyRml4ZWQ6ImZhbHNlIiwNCiAgICAgICAgdGFibGVIZWlnaHQ6NzAwLA0KICAgICAgICB0b29sdGlwOiIiLA0KICAgICAgICBzaG93VmFySW5mb1RhYmxlOmZhbHNlLA0KICAgICAgICB3YWl0UmVzcG9uc2U6eyJnbyI6ZmFsc2UsInZhciI6ZmFsc2UsInRyYWl0IjpmYWxzZSwiZXhwcmVzc2lvbiI6ZmFsc2V9LA0KICAgICAgICBjbGlja2VkOnsiZ28iOmZhbHNlLCJ2YXIiOmZhbHNlLCJ0cmFpdCI6ZmFsc2UsImV4cHJlc3Npb24iOmZhbHNlfSwNCiAgICAgICAgY2xhc3NpZmljYXRpb246IiIsDQogICAgICAgIHdpbmRvd1NpemU6MywNCiAgICAgICAgZnVsbExvYWRpbmc6dHJ1ZSwNCiAgICAgICAgc2hvd0dvVGFibGU6ZmFsc2UsDQogICAgICAgIGdvSW5mb0RhdGE6W10sDQogICAgICAgIGV4cFRhYmxlZGF0YTpbXSwNCiAgICAgICAgc2hvd0V4cEluZm9UYWJsZTpmYWxzZSwNCiAgICAgICAgZXhwbG9hZGluZzpmYWxzZSwNCiAgICAgICAgdHJhaXREYXRhOltdLA0KICAgICAgICBzaG93VHJhaXRUYWJsZTpmYWxzZSwNCiAgICAgICAgZmlsdGVyVmFsdWU6IiINCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBtZXRob2RzOiB7DQogICAgICBzZWxlY3RNZW51KGtleSl7DQogICAgICAgIC8vIHNjcm9sbEludG9WaWV3KCkganPljp/nlJ/mlrnms5XvvIzlrp7njrDplJrngrnmu5rliqjov4fmuKENCiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2l0ZW0tcG9zLSIra2V5KQ0KICAgICAgICB0YXJnZXQuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcgfSkNCiAgICAgICAgLy8gc2Nyb2xsVG8oKSDmiorlhoXlrrnmu5rliqjliLDmjIflrprnmoTlnZDmoIfjgILlh4/ljrvlr7zoiKrpq5jluqbnmoTnm67nmoTvvJrlr7zoiKrnlKjlrprkvY3lm7rlrprlnKjpobbpg6jvvIzlpoLmnpzkuI3lh4/ljrvvvIzlr7zoiKrmoI/kvJrpga7mjKHkuIDpg6jliIblhoXlrrkNCiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIHRhcmdldC5vZmZzZXRUb3ApDQogICAgICB9LA0KICAgICAgc2VhcmNoRmlsdGVyKGtleSl7DQogICAgICAgICAgbGV0IGZpbHRlck9ydGhvPXRoaXMudGFibGVPcnRob0xpc3QuZmlsdGVyKGl0ZW09PnsNCiAgICAgICAgICAgICAgcmV0dXJuICBrZXkuaW5kZXhPZigiIitpdGVtLnRheElkKSA+LTENCiAgICAgICAgICB9KQ0KICAgICAgICAgIHRoaXMudGFibGVPcnRob0xpc3Q9ZmlsdGVyT3J0aG8NCg0KICAgICAgfSwNCiAgICAgIGNsZWFyRmlsdGVyKCl7DQogICAgICAgICAgdGhpcy50YWJsZU9ydGhvTGlzdD10aGlzLm9ydGhvSW5mbw0KICAgICAgfSwNCiAgICAgIGNvbXBhcmVPcnRob0dvKGZpbHRTcGVjaWVzKXsNCiAgICAgICAgdGhpcy5jbGVhck9ydGhvR28oKQ0KICAgICAgICB0aGlzLmNvbXBhcmVGdW50aW9uKCJnbyIsZmlsdFNwZWNpZXMpDQogICAgICB9LA0KICAgICAgY2xlYXJPcnRob0dvKCl7DQogICAgICAgIHRoaXMuY2xlYXRGdW5jdGlvbignZ28nKQ0KICAgICAgfSwNCiAgICAgIGNvbXBhcmVPcnRob1ZhcihmaWx0U3BlY2llcyl7DQogICAgICAgIHRoaXMuY2xlYXJPcnRob1ZhcigpDQogICAgICAgIHRoaXMuY29tcGFyZUZ1bnRpb24oJ3ZhcicsZmlsdFNwZWNpZXMpDQoNCiAgICAgIH0sDQogICAgICBjbGVhck9ydGhvVmFyKCl7DQogICAgICAgIHRoaXMuY2xlYXRGdW5jdGlvbigndmFyJykNCiAgICAgIH0sDQogICAgICBjb21wYXJlT3J0aG9UcmFpdChmaWx0U3BlY2llcyl7DQogICAgICAgIHRoaXMuY2xlYXJPcnRob1RyYWl0KCkNCiAgICAgICAgdGhpcy5jb21wYXJlRnVudGlvbigidHJhaXQiLGZpbHRTcGVjaWVzKQ0KICAgICAgfSwNCiAgICAgIGNsZWFyT3J0aG9UcmFpdCgpew0KICAgICAgICB0aGlzLmNsZWF0RnVuY3Rpb24oJ3RyYWl0JykNCiAgICAgIH0sDQogICAgICBjb21wYXJlT3J0aG9FeHByZShmaWx0U3BlY2llcyl7DQogICAgICAgIHRoaXMuY2xlYXJPcnRob0V4cHJlKCkNCiAgICAgICAgdGhpcy5jb21wYXJlRnVudGlvbigiZXhwcmVzc2lvbiIsZmlsdFNwZWNpZXMpDQogICAgICB9LA0KICAgICAgY2xlYXJPcnRob0V4cHJlKCl7DQogICAgICAgIHRoaXMuY2xlYXRGdW5jdGlvbignZXhwcmVzc2lvbicpDQogICAgICB9LA0KICAgICAgY2xlYXRGdW5jdGlvbihrZXkpew0KDQogICAgICAgIHRoaXMuY2hlY2tlZFtrZXldPWZhbHNlOw0KICAgICAgICB0aGlzLmNsaWNrZWRba2V5XT1mYWxzZTsNCiAgICAgICAgbGV0IHN2Z0NvbnRhaW5lcj1kMy5zZWxlY3QoIiNzdmdjb250YWluZXItIitrZXkpDQogICAgICAgIGQzLnNlbGVjdEFsbCgiI2dyb3VwX3RvdGFsXyIra2V5KS5yZW1vdmUoKQ0KICAgICAgICBpZihrZXk9PSdnbycpe3N2Z0NvbnRhaW5lci5hdHRyKCdoZWlnaHQnLCc0MDAnKX1lbHNlew0KICAgICAgICAgICAgc3ZnQ29udGFpbmVyLmF0dHIoJ2hlaWdodCcsJzMwMCcpDQogICAgICAgIH0NCiAgICAgICAgaWYoa2V5PT0ndmFyJyl7DQogICAgICAgICAgICB0aGlzLnNob3dWYXJJbmZvVGFibGU9ZmFsc2U7DQogICAgICAgIH1lbHNlIGlmKGtleT09J2dvJyl7DQogICAgICAgICAgICB0aGlzLnNob3dHb1RhYmxlPWZhbHNlOw0KICAgICAgICB9ZWxzZSBpZihrZXk9PSdleHByZXNzaW9uJyl7DQogICAgICAgICAgICB0aGlzLnNob3dFeHBJbmZvVGFibGU9ZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy53YWl0UmVzcG9uc2Vba2V5XT1mYWxzZTsNCiAgICAgICAgdGhpcy5mb3JtLnNwZWNpZXNba2V5XT0iIjsNCiAgICAgIH0sDQogICAgLy8gICDngrnlh7tzaG93IGJ1dHRvbiDosIPnlKjnmoTlh73mlbANCiAgICAgIGNvbXBhcmVGdW50aW9uKGtleSxmaWx0U3BlY2llcyl7DQogICAgICAgIGxldCBmaWx0ZXJPcnRobzsNCiAgICAgICAgaWYoZmlsdFNwZWNpZXMubGVuZ3RoPjApew0KICAgICAgICAgICAgZmlsdGVyT3J0aG89dGhpcy5vcnRob0luZm8uZmlsdGVyKGl0ZW09PnsNCiAgICAgICAgICAgICAgICByZXR1cm4gIGZpbHRTcGVjaWVzLmluZGV4T2YoIiIraXRlbS50YXhJZCkgPi0xDQogICAgICAgICAgICB9KQ0KICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgIGZpbHRlck9ydGhvPXRoaXMub3J0aG9JbmZvOw0KICAgICAgICB9DQogICAgICAgIGlmKCF0aGlzLmNsaWNrZWRba2V5XSl7DQogICAgICAgIHRoaXMuY2xpY2tlZFtrZXldPXRydWU7DQogICAgICAgIHRoaXMuY2hlY2tlZFtrZXldPXRydWU7DQogICAgICAgIHRoaXMud2FpdFJlc3BvbnNlW2tleV09dHJ1ZTsNCiAgICAgICAgLy8gICDlj5blvZPliY10YWJsZeeahOWQjOa6kOWfuuWboO+8jOW+queOr+afpeivouWvueW6lOeahOaVsOaNru+8jOWmguaenOacieeahOivne+8jOa3u+WKoOS4gOihjA0KICAgICAgICBsZXQgaW5kZXg9MDsNCiAgICAgICAgbGV0IG51bT0wOw0KICAgICAgICBmb3IobGV0IGk9MDtpPGZpbHRlck9ydGhvLmxlbmd0aDtpKyspew0KICAgICAgICAgICAgbGV0IG9ydGhvSXRlbT1maWx0ZXJPcnRob1tpXTsNCiAgICAgICAgICAgIC8vICAgbGV0IGNsYXNzaWZpY2F0aW9uPW9ydGhvSXRlbS5zcGVjaWVzLmNsYXNzaWZpY2F0aW9uOw0KICAgICAgICAgICAgLy8gICBpZihvcnRob0l0ZW0uZ2JpSW5mbyE9bnVsbCl7DQogICAgICAgICAgICBsZXQgaGRiSWQ9b3J0aG9JdGVtLmhkYkdlbmVJZDsNCiAgICAgICAgICAgIGxldCBzeW1ib2w7DQogICAgICAgICAgICBpZihvcnRob0l0ZW0uZ2VuZVN5bWJvbCE9PSItIiAmIG9ydGhvSXRlbS5nZW5lU3ltYm9sIT09IiIpew0KICAgICAgICAgICAgICAgIC8vIHN5bWJvbC1lbnNlbWJsZ2lkLWVudHJlemlkLWhkYmlkDQogICAgICAgICAgICAgICAgc3ltYm9sID1vcnRob0l0ZW0uZ2VuZVN5bWJvbA0KICAgICAgICAgICAgfWVsc2UgaWYob3J0aG9JdGVtLmVuc2VtYmxJZCE9PSItIiAmIG9ydGhvSXRlbS5lbnNlbWJJZCE9PSIiKXsNCiAgICAgICAgICAgICAgICBzeW1ib2w9b3J0aG9JdGVtLmVuc2VtYmxJZDsNCiAgICAgICAgICAgIH1lbHNlIGlmKG9ydGhvSXRlbS5lbnRyZXpJZCE9PSItIiAmIG9ydGhvSXRlbS5lbnRyZXpJZCE9PSIiKXsNCiAgICAgICAgICAgICAgICBzeW1ib2w9b3J0aG9JdGVtLmVudHJleklkOw0KICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgc3ltYm9sPW9ydGhvSXRlbS5oZGJHZW5lSWQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgIGxldCB0YXhvbmlkPW9ydGhvSXRlbS50YXhJZA0KICAgICAgICAgICAgLy8gbGV0IHNwZWNpZXNOYW1lPW9ydGhvSXRlbS5jb21tb25OYW1lLnNsaWNlKDAsMykNCiAgICAgICAgICAgIGxldCBwYXJhbXM9IHsnaGRiSWQnOiBoZGJJZH0NCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJvcnRob0l0ZW0uc2hvcnROYW1lOiIsb3J0aG9JdGVtKTsNCiAgICAgICAgICAgIGlmKGtleT09ImV4cHJlc3Npb24iKXtwYXJhbXM9IHsnaGRiSWQnOiBoZGJJZCwnY2xhc3NpZmljYXRpb24nOnRoaXMuY2xhc3NpZmljYXRpb259fQ0KICAgICAgICAgICAgdGhpcy4kYXhpb3MuZ2V0KCJodHRwczovL25nZGMuY25jYi5hYy5jbi9oYXBpL2FwaS9nZW5lLWRldGFpbC0iK2tleSx7cGFyYW1zOnBhcmFtc30pDQogICAgICAgICAgICAudGhlbihyZXNwb25zZT0+ew0KICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEubGVuZ3RoPjApew0KICAgICAgICAgICAgICAgICAgICBudW0rPXJlc3BvbnNlLmRhdGEubGVuZ3RoOw0KICAgICAgICAgICAgICAgICAgICBpbmRleCArPSAxOw0KICAgICAgICAgICAgICAgICAgICBsZXQgc3ZnQ29udGFpbmVyPWQzLnNlbGVjdCgiI3N2Z2NvbnRhaW5lci0iK2tleSkNCiAgICAgICAgICAgICAgICAgICAgbGV0IHRvb2x0aXA9ZDMuc2VsZWN0KCIjdG9vbHRpcCIpDQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJvcnRob0l0ZW06IixvcnRob0l0ZW0pOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdTdWJSZWN0Q2hhcnQocmVzcG9uc2UuZGF0YSxzdmdDb250YWluZXIsa2V5LGluZGV4LHRvb2x0aXAsb3J0aG9JdGVtLnNob3J0TmFtZSxvcnRob0l0ZW0ubGF0aW5OYW1lLG9ydGhvSXRlbS5jb21tb25OYW1lLCBzeW1ib2wsdGF4b25pZCxvcnRob0l0ZW0uaGRiR2VuZUlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0pDQoNCiAgICAgICAgICAgIC8vICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgIGlmKG51bT09MCl7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSgnTm8gQW5ub3RhdGlvbiBEYXRhIEhlcmUnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LCAxMDAwKTsNCiAgICAgICAgICANCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGdldFRhYmxlTWF4SGVpZ2h0KCl7DQogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgbGV0IGJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5pbmZvLWRpdiIpLmF0dHJpYnV0ZXMNCiAgICAgICAgbGV0IGJveF9jbGllbnRIZWlnaHQgPSBib3hbMF0ub3duZXJFbGVtZW50LmNsaWVudEhlaWdodDsNCiAgICAgICAgdGhpcy50YWJsZUhlaWdodCA9IGJveF9jbGllbnRIZWlnaHQgLSAxMDA7DQogICAgICAgIH0pDQogICAgfSwNCiAgICAgIHdhdGNoU2Nyb2xsKCkgew0KICAgICAgdmFyIHNjcm9sbFRvcCA9DQogICAgICAgIHdpbmRvdy5wYWdlWU9mZnNldCB8fA0KICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8DQogICAgICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOw0KICAgICAgLy8gIOW9k+a7muWKqOi2hei/hyAyODgg5pe277yM5a6e546w5ZC46aG25pWI5p6cDQogICAgICBpZiAoc2Nyb2xsVG9wID4gMjg4KSB7DQogICAgICAgIHRoaXMubmF2QmFyRml4ZWQgPSB0cnVlOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5uYXZCYXJGaXhlZCA9IGZhbHNlOw0KICAgICAgfQ0KICAgIH0sDQpkcmF3R29SZWN0Q2hhcnQodmFsdWUsc3ZnQ29udGFpbmVyLGRhdGFjbGFzcyxzaG9ydE5hbWUsbGF0aW5OYW1lLGNvbW1vbk5hbWUsZ2VuZU5hbWUsdGF4b25pZCxoZGJpZCl7DQogICAgbGV0IHJlY3RIZWlnaHQ9MTg7DQogICAgLy8g57uY5Yi25paH5a2X6YOo5YiGDQogICAgbGV0IHRvb2x0aXAgPSBkMy5zZWxlY3QoJy50YWJsZXMnKQ0KICAgICAgICAuYXBwZW5kKCdkaXYnKQ0KICAgICAgICAuYXR0cigiaWQiLCAidG9vbHRpcCIpDQogICAgICAgIC5zdHlsZSgncG9zaXRpb24nLCAnYWJzb2x1dGUnKQ0KICAgICAgICAuc3R5bGUoJ3otaW5kZXgnLCAnMTAwMCcpDQogICAgICAgIC5zdHlsZSgnZGlzcGxheScsJ25vbmUnKQ0KICAgICAgICAuc3R5bGUoJ2xpbmUtaGVpZ2h0JywnMThweCcpDQogICAgICAgIC5zdHlsZSgndGV4dC1hbGlnbicsJ2p1c3RpZnknKQ0KICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICcxNHB4JykNCiAgICAgICAgLnN0eWxlKCd0ZXh0LWFsaWduJywnbGVmdCcpDQogICAgICAgIC5zdHlsZSgncGFkZGluZycsICcxNXB4JykNCiAgICAgICAgLnN0eWxlKCdib3JkZXItcmFkaXVzJywiNSUiKQ0KICAgICAgICAuc3R5bGUoJ2NvbG9yJywnd2hpdGUnKQ0KICAgICAgICAuc3R5bGUoJ2JhY2tncm91bmQtY29sb3InLCcjODA4MDgwJykNCiAgICAvLyDnlKjmnaXliKTmlq3lvZPliY3nsbvliKvvvIzkuI3lkIznsbvliKvkuK3pl7Tpl7TpmpTlvIANCiAgICBsZXQgdG9wX2NsYXNzOw0KICAgIGxldCBjbGFzc19jb3VudD0wOw0KICAgIGxldCBjbGFzc19QQURESU5HPTMwOw0KICAgIGlmKGRhdGFjbGFzcz09InZhciIpe3RvcF9jbGFzcz12YWx1ZVswXS52b0NsYXNzaWZpY2F0aW9uO31lbHNlIGlmKGRhdGFjbGFzcz09ImdvIil7DQogICAgICAgIHRvcF9jbGFzcz12YWx1ZVswXS50b3BDbGFzczsNCiAgICB9ZWxzZSBpZihkYXRhY2xhc3M9PSJleHByZXNzaW9uIil7dG9wX2NsYXNzPXZhbHVlWzBdLmVvQ2xhc3NpZmljYXRpb259DQogICAgZm9yKGxldCBpaWkgaW4gdmFsdWUgKXsNCiAgICAgICAgbGV0IHRleHRfdG9wPTE4MDsNCiAgICAgICAgbGV0IHRleHRfeD0xMTU7DQogICAgICAgIGlmKGRhdGFjbGFzcz09ImdvIil7dGV4dF90b3ArPTI1O3RleHRfeC09MjV9DQogICAgICAgIGxldCBpdGVtPXZhbHVlW2lpaV0NCg0KICAgICAgICBsZXQgR19QQURESU5HPXJlY3RIZWlnaHQ7DQogICAgICAgIC8vIOS4jeWQjOWIhuexu+mXtOeahOmXtOmalA0KICAgICAgICBpZihkYXRhY2xhc3M9PSJ2YXIiKXsNCiAgICAgICAgICAgIGlmKGl0ZW0udm9DbGFzc2lmaWNhdGlvbiE9PXRvcF9jbGFzcyl7dG9wX2NsYXNzPWl0ZW0udm9DbGFzc2lmaWNhdGlvbjtjbGFzc19jb3VudCs9MX0NCiAgICAgICAgfWVsc2UgaWYoZGF0YWNsYXNzPT0iZ28iKXsNCiAgICAgICAgICAgIGlmKGl0ZW0udG9wQ2xhc3MhPT10b3BfY2xhc3Mpe3RvcF9jbGFzcz1pdGVtLnRvcENsYXNzO2NsYXNzX2NvdW50Kz0xfQ0KICAgICAgICB9ZWxzZSBpZihkYXRhY2xhc3M9PSJleHByZXNzaW9uIil7DQogICAgICAgICAgICBpZihpdGVtLmVvQ2xhc3NpZmljYXRpb24hPT10b3BfY2xhc3Mpe3RvcF9jbGFzcz1pdGVtLmVvQ2xhc3NpZmljYXRpb247Y2xhc3NfY291bnQrPTF9DQogICAgICAgIH0NCg0KICAgICAgICAvLyB0cmFpdOWSjHZhcmlhbnTms6jph4rnsbvlnovmr5TovoPlsJHvvIzmiYDku6XpmpTlrr3ngrkNCiAgICAgICAgLy8gaWYoZGF0YWNsYXNzPT0idmFyInx8ZGF0YWNsYXNzPT0idHJhaXQiKXtHX1BBRERJTkcrPTc7fQ0KICAgICAgICBsZXQgZ3JvdXBfdGV4dCA9IHN2Z0NvbnRhaW5lci5hcHBlbmQoJ2cnKS5hdHRyKCJpZCIsICJ0ZXh0X2dyb3VwIitpaWkpLmF0dHIoInRyYW5zZm9ybSIsInRyYW5zbGF0ZSgiKygoaWlpKkdfUEFERElORykrKGNsYXNzX1BBRERJTkcqY2xhc3NfY291bnQpLTcwKSsiLCIrdGV4dF90b3ArIikgcm90YXRlKC00NSkiKQ0KICAgICAgICBsZXQgZ2VuZV9mb250c2l6ZT0xMg0KICAgICAgICBsZXQgdGV4dGdzID0gZ3JvdXBfdGV4dC5zZWxlY3RBbGwoInRleHQiKS5kYXRhKFtpdGVtXSkuZW50ZXIoKQ0KICAgICAgICBpZihkYXRhY2xhc3M9PSdnbycpew0KICAgICAgICAgICAgdGV4dGdzLmFwcGVuZCgidGV4dCIpDQogICAgICAgICAgICAgICAgLmF0dHIoImZpbGwiLCAiYmxhY2siKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJ0ZXh0LWFuY2hvciIsICJzdGFydCIpDQogICAgICAgICAgICAgICAgLmF0dHIoImZvbnQtZmFtaWx5IiwgInNhbnMtc2VyaWYiKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJmb250LXNpemUiLCBnZW5lX2ZvbnRzaXplKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJ4IiwgdGV4dF94KQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJ5IiwgdGV4dF90b3ApDQogICAgICAgICAgICAgICAgLnRleHQoZCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGxldCB0eHRmaWxlPWQuZ29Bbm5vdGF0aW9ucw0KICAgICAgICAgICAgICAgICAgICBpZihkLmdvQW5ub3RhdGlvbnMubGVuZ3RoPjQwKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHR4dGZpbGU9ZC5nb0Fubm90YXRpb25zLnNsaWNlKDAsNDApKyIuLi4iDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICB0eHRmaWxlDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgfWVsc2UgaWYoZGF0YWNsYXNzPT0ndmFyJyl7DQogICAgICAgICAgICAgdGV4dGdzLmFwcGVuZCgidGV4dCIpDQogICAgICAgICAgICAuYXR0cigiZmlsbCIsICJibGFjayIpDQogICAgICAgICAgICAuYXR0cigidGV4dC1hbmNob3IiLCAic3RhcnQiKQ0KICAgICAgICAgICAgLmF0dHIoImZvbnQtZmFtaWx5IiwgInNhbnMtc2VyaWYiKQ0KICAgICAgICAgICAgLmF0dHIoImZvbnQtc2l6ZSIsIGdlbmVfZm9udHNpemUpDQogICAgICAgICAgICAuYXR0cigieCIsIHRleHRfeCkNCiAgICAgICAgICAgIC5hdHRyKCJ5IiwgdGV4dF90b3ApDQogICAgICAgICAgICAudGV4dChkID0+IHsNCiAgICAgICAgICAgICAgICByZXR1cm4gIGQudm9Bbm5vdGFpb24NCiAgICAgICAgICAgIH0pDQogICAgICAgIH1lbHNlIGlmKGRhdGFjbGFzcz09ImV4cHJlc3Npb24iKXsNCiAgICAgICAgICAgIHRleHRncy5hcHBlbmQoInRleHQiKQ0KICAgICAgICAgICAgLmF0dHIoImZpbGwiLCAiYmxhY2siKQ0KICAgICAgICAgICAgLmF0dHIoInRleHQtYW5jaG9yIiwgInN0YXJ0IikNCiAgICAgICAgICAgIC5hdHRyKCJmb250LWZhbWlseSIsICJzYW5zLXNlcmlmIikNCiAgICAgICAgICAgIC5hdHRyKCJmb250LXNpemUiLCBnZW5lX2ZvbnRzaXplKQ0KICAgICAgICAgICAgLmF0dHIoIngiLCB0ZXh0X3gpDQogICAgICAgICAgICAuYXR0cigieSIsIHRleHRfdG9wKQ0KICAgICAgICAgICAgLnRleHQoZCA9PiB7DQogICAgICAgICAgICAgICAgcmV0dXJuICBkLmVvQW5ub3RhdGlvbg0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgICBlbHNlew0KICAgICAgICAgICAgIHRleHRncy5hcHBlbmQoInRleHQiKQ0KICAgICAgICAgICAgLmF0dHIoImZpbGwiLCAiYmxhY2siKQ0KICAgICAgICAgICAgLmF0dHIoInRleHQtYW5jaG9yIiwgInN0YXJ0IikNCiAgICAgICAgICAgIC5hdHRyKCJmb250LWZhbWlseSIsICJzYW5zLXNlcmlmIikNCiAgICAgICAgICAgIC5hdHRyKCJmb250LXNpemUiLCBnZW5lX2ZvbnRzaXplKQ0KICAgICAgICAgICAgLmF0dHIoIngiLCB0ZXh0X3gpDQogICAgICAgICAgICAuYXR0cigieSIsIHRleHRfdG9wKQ0KICAgICAgICAgICAgLnRleHQoZCA9PiB7DQogICAgICAgICAgICAgICAgcmV0dXJuICBkLnRyYWl0TmFtZQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgICB9DQogICAgLy8gbGV0IHNwZWNpZXNOYW1lPQ0KICAgIC8vIOe7mOWItueDreWbvnJlY3Tpg6jliIYNCiAgICB0aGlzLmRyYXdTdWJSZWN0Q2hhcnQodmFsdWUsc3ZnQ29udGFpbmVyLGRhdGFjbGFzcywwLHRvb2x0aXAsc2hvcnROYW1lLGxhdGluTmFtZSxjb21tb25OYW1lLGdlbmVOYW1lLHRheG9uaWQsaGRiaWQpDQoNCiAgICB9LA0KICAgIC8vIOWwgeijhee7mOWItnJlY3Tmlrnms5UNCiAgICBkcmF3U3ViUmVjdENoYXJ0KHZhbHVlLHN2Z0NvbnRhaW5lcixkYXRhY2xhc3MsaW5kZXgsdG9vbHRpcCxzaG9ydE5hbWUsbGF0aW5OYW1lLGNvbW1vbk5hbWUsZ2VuZU5hbWUsdGF4b25pZDEyLGhkYmlkKXsNCiAgICAgICAgY29uc29sZS5sb2coInZhbHVlOiIsdmFsdWUpOw0KICAgICAgICAvLyBnZW5lTmFtZT1nZW5lTmFtZS5sZW5ndGg+MTA/Z2VuZU5hbWUuc2xpY2UoMCwxMCkrIi4uIjpnZW5lTmFtZTsNCiAgICAgICAgbGV0IHJlY3RIZWlnaHQ9MTgNCiAgICAgICAgbGV0IHJlY3RfdG9wPTIyODsNCiAgICAgICAgaWYoZGF0YWNsYXNzPT0iZ28iKXtyZWN0X3RvcCs9NjB9DQogICAgICAgIC8vIGxldCBSRUNUX1dJRFRIPXJlY3RIZWlnaHQ7DQogICAgICAgIC8vIGxldCByZWN0X2hlaWdodD1yZWN0SGVpZ2h0Ow0KICAgICAgICBsZXQgUEFERElORz1yZWN0SGVpZ2h0Ow0KICAgICAgICBsZXQgb3JpU3ZnSGVpZ2h0PTMwMDsNCiAgICAgICAgaWYoZGF0YWNsYXNzPT0iZ28iKXtvcmlTdmdIZWlnaHQ9NDAwfQ0KICAgICAgICBzdmdDb250YWluZXIuYXR0cignaGVpZ2h0JyxgJHtvcmlTdmdIZWlnaHQraW5kZXgqMTh9YCkNCiAgICAgICAgbGV0IGdyb3VwX3RvdGFsOw0KICAgICAgICBpZihpbmRleD09MCl7DQogICAgICAgICAgICBncm91cF90b3RhbCA9IHN2Z0NvbnRhaW5lci5hcHBlbmQoJ2cnKS5hdHRyKCJpZCIsICJncm91cF90b3RhbF8wIikuYXR0cigndHJhbnNmb3JtJyxgdHJhbnNsYXRlKDAsJHtQQURESU5HKmluZGV4fSlgKQ0KICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgIGdyb3VwX3RvdGFsID0gc3ZnQ29udGFpbmVyLmFwcGVuZCgnZycpLmF0dHIoImlkIiwgImdyb3VwX3RvdGFsXyIrZGF0YWNsYXNzKS5hdHRyKCd0cmFuc2Zvcm0nLGB0cmFuc2xhdGUoMCwke1BBRERJTkcqaW5kZXh9KWApDQogICAgICAgIH0NCiAgICAgICAgbGV0IGdlbmVfZm9udHNpemU9MTINCiAgICAgICAgZ3JvdXBfdG90YWwuYXBwZW5kKCd0ZXh0JykNCiAgICAgICAgICAgIC5hdHRyKCd4JywwKQ0KICAgICAgICAgICAgLmF0dHIoJ3knLHJlY3RfdG9wK3JlY3RIZWlnaHQvMis1KQ0KICAgICAgICAgICAgLmF0dHIoImZvbnQtc2l6ZSIsIGdlbmVfZm9udHNpemUpDQogICAgICAgICAgICAudGV4dChgJHtnZW5lTmFtZS5sZW5ndGg+MTA/Z2VuZU5hbWUuc2xpY2UoMCwxMCkrIi4uIjpnZW5lTmFtZX0oJHtzaG9ydE5hbWV9KWApDQogICAgICAgIGxldCByZWN0X2dyb3VwID0gZ3JvdXBfdG90YWwuc2VsZWN0QWxsKCJyZWN0IikNCiAgICAgICAgICAgIC5kYXRhKHZhbHVlKQ0KICAgICAgICAgICAgLmVudGVyKCkNCiAgICAgICAgbGV0IFJFQ1RfUEFERElORz1yZWN0SGVpZ2h0Ow0KICAgICAgICBsZXQgUkVDVF94PTEyODsNCiAgICAgICAgLy8g5Yik5pat57uY5Zu+5pe255qE5pWw5o2u57G75Yir77yM5LiN5ZCM57G75Yir6Ze06ZqU5byADQogICAgICAgIGxldCB0b3BfY2xhc3M7DQogICAgICAgIGxldCBjbGFzc19jb3VudD0wOw0KICAgICAgICBsZXQgY2xhc3NfUEFERElORz0zMDsNCiAgICAgICAgaWYoZGF0YWNsYXNzPT0idmFyIil7dG9wX2NsYXNzPXZhbHVlWzBdLnZvQ2xhc3NpZmljYXRpb247fWVsc2UgaWYoZGF0YWNsYXNzPT0iZ28iKXsNCiAgICAgICAgICAgIHRvcF9jbGFzcz12YWx1ZVswXS50b3BDbGFzczsNCiAgICAgICAgfWVsc2UgaWYoZGF0YWNsYXNzPT0iZXhwcmVzc2lvbiIpe3RvcF9jbGFzcz12YWx1ZVswXS5lb0NsYXNzaWZpY2F0aW9ufQ0KDQoNCiAgICAgICAgLy8gaWYoZGF0YWNsYXNzPT0idmFyInx8ZGF0YWNsYXNzPT0idHJhaXQiKXtSRUNUX1BBRERJTkc9MjU7fQ0KICAgICAgICByZWN0X2dyb3VwLmFwcGVuZCgncmVjdCcpDQogICAgICAgIC5hdHRyKCJ4IiwgKGQsIGkpID0+IHsNCiAgICAgICAgICAgICAvLyDkuI3lkIzliIbnsbvpl7TnmoTpl7TpmpQNCiAgICAgICAgICAgIGlmKGRhdGFjbGFzcz09InZhciIpew0KICAgICAgICAgICAgICAgIGlmKGQudm9DbGFzc2lmaWNhdGlvbiE9PXRvcF9jbGFzcyl7dG9wX2NsYXNzPWQudm9DbGFzc2lmaWNhdGlvbjtjbGFzc19jb3VudCs9MX0NCiAgICAgICAgICAgIH1lbHNlIGlmKGRhdGFjbGFzcz09ImdvIil7DQogICAgICAgICAgICAgICAgaWYoZC50b3BDbGFzcyE9PXRvcF9jbGFzcyl7dG9wX2NsYXNzPWQudG9wQ2xhc3M7Y2xhc3NfY291bnQrPTF9DQogICAgICAgICAgICB9ZWxzZSBpZihkYXRhY2xhc3M9PSJleHByZXNzaW9uIil7DQogICAgICAgICAgICAgICAgaWYoZC5lb0NsYXNzaWZpY2F0aW9uIT09dG9wX2NsYXNzKXt0b3BfY2xhc3M9ZC5lb0NsYXNzaWZpY2F0aW9uO2NsYXNzX2NvdW50Kz0xfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBsZXQgc3RhcnRSYXRlID0gUkVDVF94K2kqUkVDVF9QQURESU5HK2NsYXNzX2NvdW50KmNsYXNzX1BBRERJTkcNCiAgICAgICAgICAgIHJldHVybiBzdGFydFJhdGUNCiAgICAgICAgfSkNCiAgICAgICAgLmF0dHIoInkiLCByZWN0X3RvcCApDQogICAgICAgIC5hdHRyKCJ3aWR0aCIsIHJlY3RIZWlnaHQgKQ0KICAgICAgICAuYXR0cigiaGVpZ2h0IiwgcmVjdEhlaWdodCApDQogICAgICAgIC5hdHRyKCJmaWxsIiwgZD0+ZC5vcGFjaXR5PjA/InJnYmEoMTQxLDE5MiwyNTIsIisoZC5vcGFjaXR5KzAuMikrIikiOiJyZ2JhKDE0MSwxOTIsMjUyLDApIikNCiAgICAgICAgLmF0dHIoJ3N0cm9rZScsImRhcmtncmF5IikNCiAgICAgICAgLmF0dHIoJ2N1cnNvcicsZD0+ZC5vcGFjaXR5PjA/J3BvaW50ZXInOicnKQ0KICAgICAgICAub24oIm1vdXNlbW92ZSIsIGZ1bmN0aW9uKGQsIGkpew0KICAgICAgICAgICAgbGV0IGh0bWxJbmZvOw0KICAgICAgICAgICAgaWYoIGRhdGFjbGFzcyA9PSJnbyIpew0KICAgICAgICAgICAgICAgIGh0bWxJbmZvPWANCiAgICAgICAgICAgIDxkaXY+PHN0cm9uZz5HZW5lIElkOiA8L3N0cm9uZz4ke2dlbmVOYW1lfTwvZGl2Pg0KICAgICAgICAgICAgPGRpdj48c3Ryb25nPlNwZWNpZXM6IDwvc3Ryb25nPiR7bGF0aW5OYW1lfSAoJHtjb21tb25OYW1lfSk8L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+PHN0cm9uZz5HTyBBbm5vdGF0aW9uIE51bWJlcjogPC9zdHJvbmc+JHtpLmdvTnVtPjA/aS5nb051bToiLSJ9PC9kaXY+DQogICAgICAgICAgICA8ZGl2PjxzdHJvbmc+R08gSWQ6IDwvc3Ryb25nPiR7aS5nb0lkfTwvZGl2Pg0KICAgICAgICAgICAgPGRpdj48c3Ryb25nPkFubm90YXRlIFN1YmNsYXNzIEdPIElkOiA8L3N0cm9uZz4ke2kuZ29MaXN0PT1udWxsPyItIjppLmdvTGlzdC5zbGljZSgwLDIpfSR7aS5nb0xpc3QhPT1udWxsJiZpLmdvTGlzdC5sZW5ndGg+Mj8iLi4uIjoiIn08L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+PHN0cm9uZz5HbyBUZXJtOiA8L3N0cm9uZz4ke2kuZ29Bbm5vdGF0aW9uc308L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+PHN0cm9uZz5HbyBDbGFzc2lmaWNhdGlvbjogPC9zdHJvbmc+JHtpLnRvcENsYXNzfTwvZGl2Pg0KICAgICAgICAgICAgPGRpdj48c3Ryb25nPkdvIERlZmluaXRpb246IDwvc3Ryb25nPiR7aS5kZWZpbml0aW9ufTwvZGl2Pg0KICAgICAgICAgICAgYA0KICAgICAgICAgICAgfWVsc2UgaWYoIGRhdGFjbGFzcyA9PSJ2YXIiKXsNCiAgICAgICAgICAgICAgICAgaHRtbEluZm89YA0KICAgICAgICAgICAgPGRpdj48c3Ryb25nPkdlbmUgSWQ6IDwvc3Ryb25nPiR7Z2VuZU5hbWV9PC9kaXY+DQogICAgICAgICAgICA8ZGl2PjxzdHJvbmc+U3BlY2llczogPC9zdHJvbmc+JHtsYXRpbk5hbWV9ICgke2NvbW1vbk5hbWV9KTwvZGl2Pg0KICAgICAgICAgICAgPGRpdj5WYXJpYW50IE51bWJlcjogJHtpLnNucE51bT4wP2kuc25wTnVtOiItIn08L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+VmFyaWFudCBMaXN0OiAke2kuc25wTGlzdD09bnVsbD8iLSI6aS5zbnBMaXN0LnNsaWNlKDAsMil9JHtpLnNucExpc3QhPT1udWxsJiZpLnNucExpc3QubGVuZ3RoPjI/Ii4uLiI6IiJ9PC9kaXY+DQogICAgICAgICAgICA8ZGl2PkNvbnNlcXVlbmNlIFR5cGU6ICR7aS52b0Fubm90YWlvbn08L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+RWZmZWN0OiAke2kudm9DbGFzc2lmaWNhdGlvbn08L2Rpdj4NCg0KICAgICAgICAgICAgYA0KICAgICAgICAgICAgfWVsc2UgaWYoIGRhdGFjbGFzcyA9PSJleHByZXNzaW9uIil7DQogICAgICAgICAgICAgICAgaHRtbEluZm89YA0KICAgICAgICAgICAgPGRpdj48c3Ryb25nPkdlbmUgSWQ6IDwvc3Ryb25nPiR7Z2VuZU5hbWV9PC9kaXY+DQogICAgICAgICAgICA8ZGl2PjxzdHJvbmc+U3BlY2llczogPC9zdHJvbmc+JHtsYXRpbk5hbWV9ICgke2NvbW1vbk5hbWV9KTwvZGl2Pg0KICAgICAgICAgICAgPGRpdj5FeHByZXNzaW9uIFByb2plY3QgTnVtYmVyOiAke2kucHJqTnVtPjA/aS5wcmpOdW06Ii0ifTwvZGl2Pg0KICAgICAgICAgICAgPGRpdj5CaW9wcm9qZWN0IExpc3Q6ICR7aS5wcmpMaXN0PT1udWxsPyItIjppLnByakxpc3Quc2xpY2UoMCwyKX0ke2kucHJqTGlzdCE9PW51bGwmJmkucHJqTGlzdC5sZW5ndGg+Mj8iLi4uIjoiIn08L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+RXhwcmVzc2lvbiBDbGFzc2lmaWNhdGlvbjogJHtpLmVvQ2xhc3NpZmljYXRpb259PC9kaXY+DQogICAgICAgICAgICA8ZGl2PkV4cHJlc3Npb24gQW5ub3RhdGlvbjogJHtpLmVvQW5ub3RhdGlvbn08L2Rpdj4NCiAgICAgICAgICAgIGANCiAgICAgICAgICAgIH1lbHNlIHsNCiAgICAgICAgICAgICAgICBodG1sSW5mbz1gDQogICAgICAgICAgICA8ZGl2PjxzdHJvbmc+R2VuZSBJZDogPC9zdHJvbmc+JHtnZW5lTmFtZX08L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+PHN0cm9uZz5TcGVjaWVzOiA8L3N0cm9uZz4ke2xhdGluTmFtZX0gKCR7Y29tbW9uTmFtZX0pPC9kaXY+DQogICAgICAgICAgICA8ZGl2Pkd3YXMgTnVtYmVyOiAke2kuZ3dhc051bT4wP2kuZ3dhc051bToiLSJ9PC9kaXY+DQogICAgICAgICAgICA8ZGl2Pkd3YXMgTGlzdDogJHtpLmd3YXNMaXN0PT1udWxsPyItIjppLmd3YXNMaXN0LnNsaWNlKDAsMil9JHtpLmd3YXNMaXN0IT09bnVsbCYmaS5nd2FzTGlzdC5sZW5ndGg+Mj8iLi4uIjoiIn08L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+VHJhaXQgSWQ6ICR7aS50cmFpdElkfTwvZGl2Pg0KICAgICAgICAgICAgPGRpdj5UcmFpdCBOYW1lOiAke2kudHJhaXROYW1lfTwvZGl2Pg0KICAgICAgICAgICAgYA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbGV0IHBvc195PWQucGFnZVkrMjA7DQogICAgICAgICAgICBsZXQgV0lEVEg9MzUwDQogICAgICAgICAgICBsZXQgcG9zX3g9ZC5wYWdlWCsyMDsNCiAgICAgICAgICAgIGlmKHBvc194K1dJRFRIPmQuY2xpZW50WCl7DQogICAgICAgICAgICAgICAgcG9zX3gtPVdJRFRIDQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHRvb2x0aXAuaW50ZXJydXB0KCkuc3R5bGUoImRpc3BsYXkiLCAiYmxvY2siKS5odG1sKGh0bWxJbmZvKQ0KICAgICAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsIjAuOCIpDQogICAgICAgICAgICAgICAgLnN0eWxlKCJib3JkZXIiLCJub25lIikNCiAgICAgICAgICAgICAgICAuc3R5bGUoJ3RleHQtYWxpZ24nLCdsZWZ0JykNCiAgICAgICAgICAgICAgICAuc3R5bGUoJ3RvcCcsIHBvc195KyJweCIpDQogICAgICAgICAgICAgICAgLnN0eWxlKCdsZWZ0Jyxwb3NfeCsicHgiKQ0KICAgICAgICAgICAgICAgIC5zdHlsZSgnd2lkdGgnLFdJRFRIKyJweCIpDQogICAgICAgIH0pDQogICAgICAgIC5vbignbW91c2VvdXQnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB0b29sdGlwLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKQ0KICAgICAgICB9KQ0KICAgICAgICAub24oImNsaWNrIiwgKGQsaSk9PnsNCiAgICAgICAgICAgIC8vIGxldCBjbGFzc2lmaWNhdGlvbj10aGlzLmdlbmVCYXNpY0luZm8uc3BlY2llc05hbWUuY2xhc3NpZmljYXRpb247DQogICAgICAgICAgICBjb25zb2xlLmxvZygiZCxpOiIsZCxpKTsNCiAgICAgICAgICAgIGlmKGRhdGFjbGFzcz09InZhciIpew0KICAgICAgICAgICAgICAgIGlmKGkuc25wTGlzdC5sZW5ndGg+MCl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudmFyTG9hZGluZz10cnVlOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dWYXJJbmZvVGFibGU9dHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGFTb3VyY2U9aS5kYXRhU291cmNlOw0KDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGF4aW9zLmdldCgiaHR0cHM6Ly9uZ2RjLmNuY2IuYWMuY24vaGFwaS9hcGkvc3BlY2llcy1nd2Fzb3JnIix7cGFyYW1zOnsndGF4b25JZCc6IHRheG9uaWQxMiwiaGRiSWQiOmhkYmlkfX0pLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBnd2FzaWQ9cmVzcG9uc2UuZGF0YS5nd2FzT3JnaWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXQgZ3dhc0dlbmVJZD1yZXNwb25zZS5kYXRhLmd3YXNHZW5lSWQ7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBCQVNFUEFUSD0iIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGFTb3VyY2UgIT0gbnVsbCAmJiBkYXRhU291cmNlLmxlbmd0aCA+MCApew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YVNvdXJjZS5pbmRleE9mKCJ2MiIpPjApe0JBU0VQQVRIPSJodHRwczovL25nZGMuY25jYi5hYy5jbi9ndm1SRVNUVjIvdjIvdmFyaWFudHMvZ2V0bGlzdD9kYXRhU291cmNlPSJ9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNle0JBU0VQQVRIPSJodHRwczovL25nZGMuY25jYi5hYy5jbi9ndm1SRVNUVjMvdjIvdmFyaWFudHMvZ2V0bGlzdD9kYXRhU291cmNlPSJ9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzbnBBbGw9aS5zbnBMaXN0LmpvaW4oJywnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoQkFTRVBBVEgubGVuZ3RoPjApew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IFBBVEg9QkFTRVBBVEgrZGF0YVNvdXJjZSsiJnNucGxpc3Q9IitzbnBBbGw7DQogICAgICAgICAgICAgICAgICAgICAgICBpZihpLnNucExpc3QubGVuZ3RoPjApew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGF4aW9zLmdldChQQVRIKS50aGVuKHJlc3BvbnNlPT57DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc2hvd1ZhckluZm9UYWJsZT10cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgdGFibGXnu5Hlrprov5Tlm57nmoRzbnDmlbDmja4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coInJlc3BvbnNlOiIscmVzcG9uc2UuZGF0YSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFyTGlzdD1bXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YSAhPSBudWxsKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YXJMaXN0PXJlc3BvbnNlLmRhdGEuc25wOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidGhpcy5yc25wSWQ6Iix0aGlzLnZhckxpc3QpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IobGV0IGl0ZW0gb2YgdHJlc3BvbnNlLmRhdGEuc25wKXt9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMudmFyTGlzdC5sZW5ndGgpe3RoaXMudmFyTGlzdD1yZXNwb25zZS5kYXRhLnNucDt9ZWxzZXt0aGlzLnZhckxpc3Q9W3Jlc3BvbnNlLmRhdGEuc25wXTt9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaXRlbSBvZiB0aGlzLnZhckxpc3Qpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBvcz1pdGVtLmNocm9tKyI6IitpdGVtLnBvc2l0aW9uOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFsbGVsZT1pdGVtLnJlZmFsbGVsZSsiLyIraXRlbS5hbGxlbGU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWFmPWl0ZW0ubWFmKyI6IitpdGVtLm1hZmZyZXEuc2xpY2UoMCw3KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjbGFzc3NucD0iU05QIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZmluYWxwb3NpdGlvbj1wb3M7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaXRlbS5wb3NpdGlvbj1wb3M7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaXRlbS5hbGxlbGU9YWxsZWxlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2l0ZW0ubWFmPW1hZjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZmluYWxhbGxlbGU9YWxsZWxlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5maW5hbG1hZj1tYWY7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnNucENsYXNzSWQ9Y2xhc3NzbnA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmd3YXNpZD1nd2FzaWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihBcnJheS5pc0FycmF5KGl0ZW0uZ2VuZSkpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBnZW5lTmFtZT1bXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb25zZXF1ZW5jZV90eXBlPVtdDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBnZW5laXRlbSBvZiBpdGVtLmdlbmUpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lTmFtZS5wdXNoKGdlbmVpdGVtLmdlbmVuYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb25zZXF1ZW5jZV90eXBlLmluZGV4T2YoZ2VuZWl0ZW0uY29uc2VxdHlwZSk9PS0xKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNlcXVlbmNlX3R5cGUucHVzaChnZW5laXRlbS5jb25zZXF0eXBlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZ2VuZU5hbWU9Z2VuZU5hbWUuam9pbigiLCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uY29uc2VxdHlwZT1jb25zZXF1ZW5jZV90eXBlLmpvaW4oIiwiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZ2VuZU5hbWU9aXRlbS5nZW5lLmdlbmVuYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jb25zZXF0eXBlPWl0ZW0uZ2VuZS5jb25zZXF0eXBlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YXJMb2FkaW5nPWZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFyTG9hZGluZz1mYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9ZWxzZSBpZihkYXRhY2xhc3M9PSJnbyIpew0KICAgICAgICAgICAgICAgIGlmKGkuZ29MaXN0Lmxlbmd0aD4wKXsNCiAgICAgICAgICAgICAgICAgICAgaS5nb0xpc3Q9aS5nb0xpc3Quam9pbigiLCIpDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ29JbmZvRGF0YT1baV0NCiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5nb0luZm9EYXRhLmdvTGlzdD1saXN0Z28NCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93R29UYWJsZT10cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH1lbHNlIGlmKGRhdGFjbGFzcz09InRyYWl0Iil7DQogICAgICAgICAgICAgICAgaWYoaS5nd2FzTGlzdC5sZW5ndGg+MCl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ29sb2FkaW5nPXRydWU7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1RyYWl0VGFibGU9dHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGd3YXNsaXN0PWkuZ3dhc0xpc3Quam9pbigiLCIpDQogICAgICAgICAgICAgICAgICAgIC8vIHRoaXMudHJhaXREYXRhPVtpXQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRheGlvcy5nZXQoImh0dHBzOi8vbmdkYy5jbmNiLmFjLmNuL2hhcGkvYXBpL3NwZWNpZXMtZ3dhc29yZyIse3BhcmFtczp7J3RheG9uSWQnOiB0YXhvbmlkMTIsImhkYklkIjpoZGJpZH19KS50aGVuKHJlc3BvbnNlPT57DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZ3dhc2lkPXJlc3BvbnNlLmRhdGEuZ3dhc09yZ2lkOw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGd3YXNHZW5lSWQ9cmVzcG9uc2UuZGF0YS5nd2FzR2VuZUlkOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kYXhpb3MuZ2V0KCJodHRwczovL25nZGMuY25jYi5hYy5jbi9nYXBpL2d3YXMvZ3dhc2lkcz9nd2FzSWQ9Iitnd2FzbGlzdCsiJm9yZ2FuaXNtSWQ9Iitnd2FzaWQrIiZvZmZzZXQ9MCZwYWdlc2l6ZT0xMCZ0b3RhbD0xMCZnZW5lSWQ9Iitnd2FzR2VuZUlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzRGFyYT1yZXNwb25zZS5kYXRhDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpdGVtIG9mIHJlc0RhcmEpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmd3YXNHZW5lSWQ9Z3dhc0dlbmVJZDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS50b3B0cmFpdE5hbWU9aS50cmFpdE5hbWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhaXREYXRhPXJlc0RhcmE7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coInRoaXMudHJhaXREYXRhOiIsdGhpcy50cmFpdERhdGEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSkuZmluYWxseSgoKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ29sb2FkaW5nPWZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTsNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH1lbHNlIGlmKGRhdGFjbGFzcz09ImV4cHJlc3Npb24iKXsNCiAgICAgICAgICAgICAgICBpZihpLnByakxpc3QubGVuZ3RoPjApew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dFeHBJbmZvVGFibGU9dHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBsb2FkaW5nPXRydWU7DQogICAgICAgICAgICAgICAgICAgIGxldCBwcmpsaXN0PWkucHJqTGlzdC5qb2luKCcsJykNCiAgICAgICAgICAgICAgICAgICAgbGV0IFBBVEg9Imh0dHBzOi8vbmdkYy5jbmNiLmFjLmNuL2dlbi9hcGkvanNvbi9nZW5lL2V4cHJlc3Npb25zP3RheG9ub215SWQ9IitpLnRheG9uSWQrIiZhY2Nlc3Npb249IitpLmdlbmVJZCsiJmJpb1Byb2plY3RJZD0iK3Byamxpc3QNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYXhpb3MuZ2V0KFBBVEgpLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleHBkYXRhPXJlc3BvbnNlLmRhdGEucmVzdWx0LmV4cHJlc3Npb25Qcm9maWxlczsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleHBUYWJsZWRhdGE9W107DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGtleWFhIGluIGV4cGRhdGEgKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJqTGlzdD1leHBkYXRhW2tleWFhXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleHBOdW09MDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXQgc2FtcGxlTnVtPTA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpc3N1ZT17fTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGl0ZW0gb2YgcHJqTGlzdCl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNhbXBsZU51bSArPSAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBOdW0gKz0gaXRlbS50cG07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpdGVtVGlzc3VlPWl0ZW0udGlzc3VlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKE9iamVjdC5rZXlzKHRpc3N1ZSkuaW5kZXhPZihpdGVtVGlzc3VlKSA9PSAtMSApew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlzc3VlW2l0ZW1UaXNzdWVdPVtleHBOdW1dDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlzc3VlW2l0ZW1UaXNzdWVdLnB1c2goZXhwTnVtKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgdGlzc3VlTmFtZSBpbiB0aXNzdWUpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWVMaXN0PXRpc3N1ZVt0aXNzdWVOYW1lXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsc3VtPWV2YWwodmFsdWVMaXN0LmpvaW4oIisiKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGV4cEF2Zz0odmFsc3VtL3ZhbHVlTGlzdC5sZW5ndGgpLnRvRml4ZWQoNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGl0ZW09ew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInByb2plY3RJZCI6a2V5YWEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidGlzc3VlIjp0aXNzdWVOYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImV4cEF2ZyI6TnVtYmVyKGV4cEF2ZyksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZ2VuZUlkIjppLmdlbmVJZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJnZW5PcmdJZCI6aS5nZW5PcmdpZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cFRhYmxlZGF0YS5wdXNoKGl0ZW0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwbG9hZGluZz1mYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3JpZXhwVGFibGVkYXRhPWV4cFRhYmxlZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwVGFibGVkYXRhPWV4cFRhYmxlZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICB9DQogICAgfSl9LA0KICAgIGhpbGlndERiQ29scyh7cm93SW5kZXgsIGNvbHVtbkluZGV4fSl7DQogICAgICAgIGlmKHJvd0luZGV4PT09MCAmJiBjb2x1bW5JbmRleD49Nil7DQogICAgICAgICAgICByZXR1cm4gImNvbG9yOiAjZmZmO2JhY2tncm91bmQtY29sb3I6cmdiYSg5MiwxNjUsMjE0LDAuNykgIWltcG9ydGFudCINCiAgICAgICAgfQ0KICAgIH0sDQogICAgZmlsdGVyRXhwRGFyYSgpew0KICAgICAgICBjb25zb2xlLmxvZygiZmlsdGVyRXhwRGFyYToiLHRoaXMuZmlsdGVyVmFsdWUpOw0KICAgICAgICBjb25zb2xlLmxvZygiZXhwVGFibGVkYXRhOiIsdGhpcy5leHBUYWJsZWRhdGEpOw0KICAgICAgICB0aGlzLmV4cFRhYmxlZGF0YT0gdGhpcy5vcmlleHBUYWJsZWRhdGEuZmlsdGVyKGl0ZW09PnsNCiAgICAgICAgICAgIHJldHVybiBOdW1iZXIoaXRlbS5leHBBdmcpPk51bWJlcih0aGlzLmZpbHRlclZhbHVlKQ0KICAgICAgICB9KQ0KICAgIH0sDQogICAgc2hvd09yaUV4cCgpew0KICAgICAgICB0aGlzLmV4cFRhYmxlZGF0YT0gdGhpcy5vcmlleHBUYWJsZWRhdGENCiAgICB9DQogIH0sDQogIG1vdW50ZWQ6ZnVuY3Rpb24gKCkgew0KICAgIC8vIGlmKHdpbmRvdy5tYXRjaE1lZGlhKCIobWF4LXdpZHRoOiA3NjdweCkiKS5tYXRjaGVzKXsNCiAgICAvLyAgICAgdGhpcy53aW5kb3dTaXplPTE7DQogICAgLy8gICAgY29uc29sZS5sb2coIui/meaYr+S4gOS4quenu+WKqOiuvuWkh+OAgiIpOw0KDQogICAgLy8gfWVsc2UgaWYod2luZG93Lm1hdGNoTWVkaWEoIihtYXgtd2lkdGg6IDk5MnB4KSIpLm1hdGNoZXMpew0KICAgIC8vICAgICB0aGlzLndpbmRvd1NpemU9MjsNCiAgICAvLyAgICAgY29uc29sZS5sb2coIui/meaYr+W5s+adv+eUteiEkeaIluWPsOW8j+eUteiEkeOAgiIpOw0KDQogICAgLy8gfWVsc2V7DQogICAgLy8gICAgIHRoaXMud2luZG93U2l6ZT0zOw0KICAgIC8vICAgICBjb25zb2xlLmxvZygi5aSn5bGPIik7DQogICAgLy8gfQ0KDQogICAgLy8gbGV0IGxvYWRpbmdTZXJ2aWNlID0gTG9hZGluZy5zZXJ2aWNlKHsNCiAgICAvLyAgICAgbG9jazogdHJ1ZSwNCiAgICAvLyAgICAgdGV4dDogJ0xvYWRpbmcnLA0KICAgIC8vICAgICBzcGlubmVyOiAnZWwtaWNvbi1sb2FkaW5nJywNCiAgICAvLyAgICAgYmFja2dyb3VuZDogJ3JnYmEoMCwgMCwgMCwgMC43KScsDQogICAgLy8gICAgIGZ1bGxzY3JlZW46dHJ1ZQ0KICAgIC8vIH0pOw0KICAgIGxldCBoZGJJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmhkYklkOw0KICAgIC8vIOafpeivomdv77yMdmFy77yMdHJhaXTpnIDopoFlbnNlbWJsIGdlbmUgaWQNCiAgICBsZXQgdGF4b25JZD10aGlzLiRyb3V0ZS5xdWVyeS50YXhvbklkOw0KICAgIC8vIGxldCBlbnNlbWJsR2VuZUlkOw0KICAgIHRoaXMuJGF4aW9zDQogICAgLy8g6I635Y+WZ2VuZSBiYXNpYyBpbmZv55qE5o6l5Y+j77yM55uu5YmN5piv5p+l6K+iZW50cmV6IGlkDQogICAgLy8g6L+U5Zue5Lik5LiqbGlzdOaVsOaNru+8jDDmmK9nYmlpbmZv77yMMeaYr29ydGhvbGlzdA0KICAgICAgLmdldCgnaHR0cHM6Ly9uZ2RjLmNuY2IuYWMuY24vaGFwaS9hcGkvZ2VuZS1kZXRhaWwnLHtwYXJhbXM6IHsnaGRiSWQnOiBoZGJJZCwgJ3RheG9uaWQnOiB0YXhvbklkfX0pDQogICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMubG9hZGluZz1mYWxzZTsNCiAgICAgICAgbGV0IGdlbmVkZXRhaWwgPSByZXNwb25zZS5kYXRhWzBdOw0KICAgICAgICB0aGlzLmdlbmVCYXNpY0luZm89Z2VuZWRldGFpbFswXTsNCiAgICAgICAgLy8gZW5zZW1ibEdlbmVJZD10aGlzLmdlbmVCYXNpY0luZm8uZW5zZW1ibEdlbmVJZDsNCiAgICAgICAgbGV0IG9ydGhvTGlzdCA9IHJlc3BvbnNlLmRhdGFbMV07DQogICAgICAgIC8vIHRoaXMuZ29Cc2ljTGlzdD1yZXNwb25zZS5kYXRhWzJdOw0KICAgICAgICAvLyDnu5jliLbliJ3lp4vng63lm74NCiAgICAvLyAgICBnZW5lU3ltYm9sPWdlbmVkZXRhaWxbMF0uZ2VuZVN5bWJvbDsNCiAgICAgICAgdGhpcy50YWJsZURhdGEgPSBnZW5lZGV0YWlsOw0KICAgICAgICAvLyDlrZjlgqjlkIzmupDmlbDmja4NCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICBsZXQgb3J0aG89W10NCiAgICAgICAgbGV0IGhkYmxpc3Q9W10NCiAgICAgICAgZm9yKGxldCBpdGVtIG9mICBvcnRob0xpc3Qpew0KICAgICAgICAgICAgY29uc29sZS5sb2coIml0ZW06IixpdGVtKTsNCiAgICAgICAgICAgIGlmKGl0ZW0ub3J0aG9Qb3NpdGlvbj09MSl7DQogICAgICAgICAgICAgICAgbGV0IGNvbW1vbk5hbWUgPSBpdGVtLmNvbW1vbk5hbWUxP2l0ZW0uY29tbW9uTmFtZTE6Ii0iOw0KICAgICAgICAgICAgICAgIGxldCBlbnNlbWJsSWQgPSBpdGVtLmVuc2VtYmxJZD9pdGVtLmVuc2VtYmxJZDoiLSI7DQogICAgICAgICAgICAgICAgbGV0IGVudHJleklkPWl0ZW0uZW50cmV6SWQxP2l0ZW0uZW50cmV6SWQxOiItIjsNCiAgICAgICAgICAgICAgICBsZXQgZ2VuZVN5bWJvbD1pdGVtLmdlbmVTeW1ib2w/aXRlbS5nZW5lU3ltYm9sOiItIjsNCiAgICAgICAgICAgICAgICBsZXQgaGRiR2VuZUlkPWl0ZW0uaGRiR2VuZUlkMT9pdGVtLmhkYkdlbmVJZDE6Ii0iOw0KICAgICAgICAgICAgICAgIGxldCB0YXhJZD1pdGVtLnRheElkMT9pdGVtLnRheElkMToiLSI7DQogICAgICAgICAgICAgICAgbGV0IHNob3J0TmFtZT1pdGVtLnNob3J0TmFtZTE7DQogICAgICAgICAgICAgICAgbGV0IGRiRXZpZGVuY2U9aXRlbS5kYkV2aWRlbmNlOw0KICAgICAgICAgICAgICAgIGxldCBsYXRpbk5hbWU9aXRlbS5sYXRpbk5hbWUxDQogICAgICAgICAgICAgICAgbGV0IG9ydGhvaXRlbT17DQogICAgICAgICAgICAgICAgICAgICJjb21tb25OYW1lIjpjb21tb25OYW1lLA0KICAgICAgICAgICAgICAgICAgICAiZW5zZW1ibElkIjplbnNlbWJsSWQsDQogICAgICAgICAgICAgICAgICAgICJlbnRyZXpJZCI6ZW50cmV6SWQsDQogICAgICAgICAgICAgICAgICAgICJnZW5lU3ltYm9sIjpnZW5lU3ltYm9sLA0KICAgICAgICAgICAgICAgICAgICAiaGRiR2VuZUlkIjpoZGJHZW5lSWQsDQogICAgICAgICAgICAgICAgICAgICJ0YXhJZCI6dGF4SWQsDQogICAgICAgICAgICAgICAgICAgICJkYkV2aWRlbmNlIjpkYkV2aWRlbmNlLA0KICAgICAgICAgICAgICAgICAgICAic2hvcnROYW1lIjpzaG9ydE5hbWUsDQogICAgICAgICAgICAgICAgICAgICJsYXRpbk5hbWUiOmxhdGluTmFtZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyDljrvph43vvIzkv53lrZjllK/kuIDnmoRoZGJpZA0KICAgICAgICAgICAgICAgIGlmKGhkYmxpc3QuaW5kZXhPZihoZGJHZW5lSWQpPT0tMSl7DQogICAgICAgICAgICAgICAgICAgIG9ydGhvLnB1c2gob3J0aG9pdGVtKQ0KICAgICAgICAgICAgICAgICAgICBoZGJsaXN0LnB1c2goaGRiR2VuZUlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIGxldCBjb21tb25OYW1lID0gaXRlbS5jb21tb25OYW1lMj9pdGVtLmNvbW1vbk5hbWUyOiItIjsNCiAgICAgICAgICAgICAgICBsZXQgZW5zZW1ibElkID0gaXRlbS5lbnNlbWJsSWQ/aXRlbS5lbnNlbWJsSWQ6Ii0iOw0KICAgICAgICAgICAgICAgIGxldCBlbnRyZXpJZD1pdGVtLmVudHJleklkMj9pdGVtLmVudHJleklkMjoiLSI7DQogICAgICAgICAgICAgICAgbGV0IGdlbmVTeW1ib2w9aXRlbS5nZW5lU3ltYm9sMj9pdGVtLmdlbmVTeW1ib2wyOiItIjsNCiAgICAgICAgICAgICAgICBsZXQgaGRiR2VuZUlkPWl0ZW0uaGRiR2VuZUlkMj9pdGVtLmhkYkdlbmVJZDI6Ii0iOw0KICAgICAgICAgICAgICAgIGxldCB0YXhJZD1pdGVtLnRheElkMj9pdGVtLnRheElkMjoiLSINCiAgICAgICAgICAgICAgICBsZXQgZGJFdmlkZW5jZT1pdGVtLmRiRXZpZGVuY2U7DQogICAgICAgICAgICAgICAgbGV0IHNob3J0TmFtZT1pdGVtLnNob3J0TmFtZTI7DQogICAgICAgICAgICAgICAgbGV0IGxhdGluTmFtZT1pdGVtLmxhdGluTmFtZTI7DQogICAgICAgICAgICAgICAgbGV0IG9ydGhvaXRlbT17DQogICAgICAgICAgICAgICAgICAgICJjb21tb25OYW1lIjpjb21tb25OYW1lLA0KICAgICAgICAgICAgICAgICAgICAiZW5zZW1ibElkIjplbnNlbWJsSWQsDQogICAgICAgICAgICAgICAgICAgICJlbnRyZXpJZCI6ZW50cmV6SWQsDQogICAgICAgICAgICAgICAgICAgICJnZW5lU3ltYm9sIjpnZW5lU3ltYm9sLA0KICAgICAgICAgICAgICAgICAgICAiaGRiR2VuZUlkIjpoZGJHZW5lSWQsDQogICAgICAgICAgICAgICAgICAgICJ0YXhJZCI6dGF4SWQsDQogICAgICAgICAgICAgICAgICAgICJkYkV2aWRlbmNlIjpkYkV2aWRlbmNlLA0KICAgICAgICAgICAgICAgICAgICAic2hvcnROYW1lIjpzaG9ydE5hbWUsDQogICAgICAgICAgICAgICAgICAgICJsYXRpbk5hbWUiOmxhdGluTmFtZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZihoZGJsaXN0LmluZGV4T2YoaGRiR2VuZUlkKT09LTEpew0KICAgICAgICAgICAgICAgICAgICBvcnRoby5wdXNoKG9ydGhvaXRlbSkNCiAgICAgICAgICAgICAgICAgICAgaGRibGlzdC5wdXNoKGhkYkdlbmVJZCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgdGhpcy50YWJsZU9ydGhvTGlzdD1vcnRobzsNCiAgICAgICAgdGhpcy5vcnRob0luZm89b3J0aG87DQogICAgICAgIC8vICAg5bCG5aSa5Liq57uT5p6c5ZCI5bm25oiQ5LiA5LiqDQogICAgICAgIGlmKGdlbmVkZXRhaWwubGVuZ3RoPjEpew0KICAgICAgICAgICAgbGV0IG9iaj1nZW5lZGV0YWlsWzBdDQogICAgICAgICAgICBmb3IobGV0IGo9MTtqPD0gZ2VuZWRldGFpbC5sZW5ndGg7aisrKXsNCiAgICAgICAgICAgICAgICBsZXQgb2JqMj1nZW5lZGV0YWlsW2pdOw0KICAgICAgICAgICAgICAgIGZvcihsZXQga2V5IGluIG9iajIpew0KICAgICAgICAgICAgICAgICAgICBpZihrZXkgIT09ICJzcGVjaWVzTmFtZSIpew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYob2JqW2tleV0gIT09IG9iajJba2V5XSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1ZhbCA9b2JqW2tleV0rICIsIitvYmoyW2tleV0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpba2V5XT1uZXdWYWwNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmdlbmVCYXNpY0luZm89b2JqDQogICAgICAgIH0NCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJ0aGlzLmdlbmVCYXNpY0luZm86Iix0aGlzLmdlbmVCYXNpY0luZm8pOw0KDQogICAgfSkuZmluYWxseSgoKT0+ew0KICAgICAgICB0aGlzLmZ1bGxMb2FkaW5nPWZhbHNlOw0KICAgICAgICBsZXQgc3ZnX2hlaWdodD00ODA7DQogICAgICAgIC8vIGxldCBnZW5lTmFtZT0iRU5TR0FMRzAwMDAwMDIzNDQzIg0KICAgICAgICBsZXQgc3BlY05hbWU9dGhpcy5nZW5lQmFzaWNJbmZvLnNwZWNpZXNOYW1lLnNob3J0TmFtZTsNCiAgICAgICAgbGV0IGxhdGluTmFtZT10aGlzLmdlbmVCYXNpY0luZm8uc3BlY2llc05hbWUubGF0aW5OYW1lOw0KICAgICAgICBsZXQgY29tbW9uTmFtZT10aGlzLmdlbmVCYXNpY0luZm8uc3BlY2llc05hbWUuY29tbW9uTmFtZTsNCiAgICAgICAgLy8gbGV0IGhkYmlkPXRoaXMuZ2VuZUJhc2ljSW5mby5oZGJHZW5lSWQ7DQogICAgICAgIGxldCBzeW1ib2w7DQogICAgICAgIGlmKHRoaXMuZ2VuZUJhc2ljSW5mby5nZW5lU3ltYm9sLmxlbmd0aD4wKXsNCiAgICAgICAgICAgIHN5bWJvbD10aGlzLmdlbmVCYXNpY0luZm8uZ2VuZVN5bWJvbDsNCiAgICAgICAgfWVsc2V7DQogICAgICAgICAgICBzeW1ib2w9dGhpcy5nZW5lQmFzaWNJbmZvLmVuc2VtYmxHZW5lSWQ7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5jbGFzc2lmaWNhdGlvbj10aGlzLmdlbmVCYXNpY0luZm8uc3BlY2llc05hbWUuY2xhc3NpZmljYXRpb247DQogICAgICAgIHRoaXMuJGF4aW9zLmdldCgnaHR0cHM6Ly9uZ2RjLmNuY2IuYWMuY24vaGFwaS9hcGkvZ2VuZS1kZXRhaWwtZ28tMScse3BhcmFtczogeydoZGJJZCc6IGhkYklkfX0pLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEubGVuZ3RoPjApew0KICAgICAgICAgICAgICAgIHRoaXMuZ29sb2FkaW5nPWZhbHNlOw0KICAgICAgICAgICAgICAgIC8vIHRoaXMuZ29MaXN0PXJlc3BvbnNlLmRhdGENCiAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLmxlbmd0aD4wKXsNCiAgICAgICAgICAgICAgICBsZXQgc3ZnQ29udGFpbmVyID0gZDMuc2VsZWN0KCIjc3ZnLWNvbnRhaW5lci1nbyIpLmFwcGVuZCgic3ZnIikuYXR0cigid2lkdGgiLCAiMTQ1MHB4IikuYXR0cigiaGVpZ2h0Iiwgc3ZnX2hlaWdodCs2MCkuYXR0cignaWQnLCAnc3ZnY29udGFpbmVyLWdvJyk7DQogICAgICAgICAgICAgICAgdGhpcy5kcmF3R29SZWN0Q2hhcnQocmVzcG9uc2UuZGF0YSxzdmdDb250YWluZXIsImdvIixzcGVjTmFtZSxsYXRpbk5hbWUsY29tbW9uTmFtZSxzeW1ib2wsdGhpcy5nZW5lQmFzaWNJbmZvLnRheG9uSWQsdGhpcy5nZW5lQmFzaWNJbmZvLmhkYkdlbmVJZCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIHRoaXMuJGF4aW9zLmdldCgnaHR0cHM6Ly9uZ2RjLmNuY2IuYWMuY24vaGFwaS9hcGkvZ2VuZS1kZXRhaWwtdmFyLTEnLHtwYXJhbXM6IHsnaGRiSWQnOiBoZGJJZH19KS50aGVuKHJlc3BvbnNlPT57DQogICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLmxlbmd0aD4wKXsNCiAgICAgICAgICAgIGxldCBzdmdDb250YWluZXIgPSBkMy5zZWxlY3QoIiNzdmctY29udGFpbmVyLXZhciIpLmFwcGVuZCgic3ZnIikuYXR0cigid2lkdGgiLCAiOTglIikuYXR0cigiaGVpZ2h0Iiwgc3ZnX2hlaWdodCkuYXR0cignaWQnLCAnc3ZnY29udGFpbmVyLXZhcicpOw0KICAgICAgICAgICAgdGhpcy5kcmF3R29SZWN0Q2hhcnQocmVzcG9uc2UuZGF0YSxzdmdDb250YWluZXIsInZhciIsc3BlY05hbWUsbGF0aW5OYW1lLGNvbW1vbk5hbWUsc3ltYm9sLHRoaXMuZ2VuZUJhc2ljSW5mby50YXhvbklkLHRoaXMuZ2VuZUJhc2ljSW5mby5oZGJHZW5lSWQpDQogICAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC8vIGxldCB0cmFpdEdlbmVOYW1lPSJPczA1ZzA1NTYzMDAiDQogICAgICAgIHRoaXMuJGF4aW9zLmdldCgnaHR0cHM6Ly9uZ2RjLmNuY2IuYWMuY24vaGFwaS9hcGkvZ2VuZS1kZXRhaWwtdHJhaXQtMScse3BhcmFtczogeydoZGJJZCc6IGhkYklkfX0pLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgICAgIGxldCBzdmdDb250YWluZXIgPSBkMy5zZWxlY3QoIiNzdmctY29udGFpbmVyLXRyYWl0IikuYXBwZW5kKCJzdmciKS5hdHRyKCJ3aWR0aCIsICI5OCUiKS5hdHRyKCJoZWlnaHQiLCBzdmdfaGVpZ2h0KS5hdHRyKCdpZCcsICdzdmdjb250YWluZXItdHJhaXQnKTsNCiAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEubGVuZ3RoPjApew0KICAgICAgICAgICAgICAgIHRoaXMuZHJhd0dvUmVjdENoYXJ0KHJlc3BvbnNlLmRhdGEsc3ZnQ29udGFpbmVyLCJ0cmFpdCIsc3BlY05hbWUsbGF0aW5OYW1lLGNvbW1vbk5hbWUsc3ltYm9sLHRoaXMuZ2VuZUJhc2ljSW5mby50YXhvbklkLHRoaXMuZ2VuZUJhc2ljSW5mby5oZGJHZW5lSWQpDQogICAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIHRoaXMuJGF4aW9zLmdldCgnaHR0cHM6Ly9uZ2RjLmNuY2IuYWMuY24vaGFwaS9hcGkvc3BlY2llcy1saXN0Jyx7cGFyYW1zOiB7J3RheG9uSWQnOiAiIit0YXhvbklkfX0pLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgICAgIHRoaXMuc3BlY2llcz1yZXNwb25zZS5kYXRhDQogICAgICAgIH0pDQogICAgICAgIHRoaXMuJGF4aW9zLmdldCgnaHR0cHM6Ly9uZ2RjLmNuY2IuYWMuY24vaGFwaS9hcGkvZ2VuZS1kZXRhaWwtZXhwcmVzc2lvbi0xJyx7cGFyYW1zOiB7J2hkYklkJzogaGRiSWQsJ2NsYXNzaWZpY2F0aW9uJzp0aGlzLmNsYXNzaWZpY2F0aW9ufX0pLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgICAgIGxldCBzdmdDb250YWluZXIgPSBkMy5zZWxlY3QoIiNzdmctY29udGFpbmVyLWV4cHJlc3Npb24iKS5hcHBlbmQoInN2ZyIpLmF0dHIoIndpZHRoIiwgIjE0NTBweCIpLmF0dHIoImhlaWdodCIsIHN2Z19oZWlnaHQpLmF0dHIoJ2lkJywgJ3N2Z2NvbnRhaW5lci1leHByZXNzaW9uJyk7DQogICAgICAgICAgICAvLyB0aGlzLnNwZWNpZXM9cmVzcG9uc2UuZGF0YQ0KICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5sZW5ndGg+MCl7DQogICAgICAgICAgICAgICAgdGhpcy5kcmF3R29SZWN0Q2hhcnQocmVzcG9uc2UuZGF0YSxzdmdDb250YWluZXIsImV4cHJlc3Npb24iLHNwZWNOYW1lLGxhdGluTmFtZSxjb21tb25OYW1lLHN5bWJvbCx0aGlzLmdlbmVCYXNpY0luZm8udGF4b25JZCx0aGlzLmdlbmVCYXNpY0luZm8uaGRiR2VuZUlkKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgIH0pDQoNCg0KICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCB0aGlzLndhdGNoU2Nyb2xsKTsNCiAgICAvLyB0aGlzLmdldFRhYmxlTWF4SGVpZ2h0KCk7DQogICAgLy8gbGV0IF90aGlzID0gdGhpczsNCiAgICAvLyB3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbiAoKSB7Ly/nlKjkuo7kvb/ooajmoLzpq5jluqboh6rpgILlupTnmoTmlrnms5UNCiAgICAvLyAgICAgX3RoaXMuZ2V0VGFibGVNYXhIZWlnaHQoKTsvL+iOt+WPluWuueWZqOW9k+WJjemrmOW6pu+8jOmHjeiuvuihqOagvOeahOacgOWkp+mrmOW6pg0KICAgIC8vIH0NCiAgfSwNCg0KfQ0K"},{"version":3,"sources":["gene-detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAycA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"gene-detail.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n<div class=\"table-container\" onscroll=\"menuScroll()\">\r\n    <HeaderBar />\r\n    <Banner />\r\n    <!-- <Navigator />    -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\" class=\"arrow-title\">\r\n        <el-breadcrumb-item :to=\"{ path: '/' }\">Browse</el-breadcrumb-item>\r\n        <el-breadcrumb-item :to=\"{ path: '/gene' }\">Homolog Gene</el-breadcrumb-item>\r\n        <el-breadcrumb-item>Gene Detail</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <el-container style=\"border: 1px solid #eee;margin-top: 15px;\">\r\n        <el-aside width=\"240px\" style=\"background-color: aliceblue;overflow-y: auto;\">\r\n            <!-- <img src=\"../assets/img/arrow1.png\" style=\"width:100%;vertical-align:top;margin:10px 0;\"> -->\r\n            <el-menu\r\n                default-active=\"1\"\r\n                :class=\"navBarFixed == true ? 'navBarWrap' :''\"\r\n                background-color=\"#545c64\"\r\n                text-color=\"#fff\"\r\n                active-text-color=\"#409EFF\"\r\n                style=\"text-align: left;\"\r\n                width=\"100%\"\r\n                @select=\"selectMenu\">\r\n            <el-menu-item index=\"1\">\r\n                <i class=\"el-icon-chat-line-square\"></i>\r\n                <span slot=\"title\">Gene Basic Informations</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"2\">\r\n                <i class=\"el-icon-chat-line-square\"></i>\r\n                <span slot=\"title\">Ortholog Genes</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"3\">\r\n                <i class=\"el-icon-chat-line-square\"></i>\r\n                <span slot=\"title\">GO Annotations</span>\r\n            </el-menu-item>\r\n\r\n\r\n            <el-menu-item index=\"4\">\r\n                <i class=\"el-icon-chat-line-square\"></i>\r\n                <span slot=\"title\">Variants</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"5\">\r\n                <i class=\"el-icon-chat-line-square\"></i>\r\n                <span slot=\"title\">Traits Informations</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"6\">\r\n                <i class=\"el-icon-chat-line-square\"></i>\r\n                <span slot=\"title\">Expression</span>\r\n            </el-menu-item>\r\n            <!-- <el-menu-item index=\"7\">\r\n                <i class=\"el-icon-chat-line-square\"></i>\r\n                <span slot=\"title\">Sequence Viewer</span>\r\n            </el-menu-item> -->\r\n        </el-menu>\r\n        </el-aside>\r\n         <!-- </div> -->\r\n\r\n    <div class=\"tables\" style=\"overflow:hidden\" v-loading=\"fullLoading\">\r\n\r\n        <div class=\"info-div\">\r\n            <div class=\"basic-info\" id=\"item-pos-1\" >\r\n            <!-- <el-card style=\"width:99%;margin: auto;\" shadow=\"none\"> -->\r\n                <!-- <h2 class=\"b-info\">Gene Basic Information</h2> -->\r\n                <div class=\"var-box var-infoBox\">\r\n                    <h3 class=\"var-title\">Gene Basic Information</h3>\r\n                </div>\r\n                <el-card class=\"card-border\">\r\n                    <el-descriptions :column=\"3\" class=\"descriptions\" :size=\"size\"  v-if=\"JSON.stringify(geneBasicInfo) !=='{}'\">\r\n                        <el-descriptions-item label=\"Ensembl Gene Id\"><a target=\"_blank\" :href=\"'https://ensemblgenomes.org/search/?query='+geneBasicInfo.ensemblGeneId\">{{geneBasicInfo.ensemblGeneId}}</a></el-descriptions-item>\r\n                        <el-descriptions-item label=\"Entrez Gene Id\"><a target=\"_blank\" :href=\"'https://www.ncbi.nlm.nih.gov/gene/?term='+geneBasicInfo.entrezGene\">{{geneBasicInfo.entrezGene}}</a>\r\n                        <!-- <img :src=\"linkIcon\" style=\"width:18px;height:18px;margin-left:5px\"> -->\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item label=\"Refseq Id\">\r\n                            <a v-if=\"geneBasicInfo.refseqId!=='-'\" target=\"_blank\" :href=\"'https://www.ncbi.nlm.nih.gov/nuccore/'+geneBasicInfo.refseqId\">{{geneBasicInfo.refseqId}}</a>\r\n                            <div v-else>{{geneBasicInfo.refseqId}}</div>\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item label=\"Protein Id\">\r\n                            <a :href=\"'https://www.uniprot.org/uniprot/'+geneBasicInfo.hdbId\" target='_blank'>{{geneBasicInfo.hdbId}}</a>\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item label=\"Gene Synonym\">\r\n                            <div v-if=\"geneBasicInfo.geneSynonym!==''&& geneBasicInfo.geneSynonym\">{{geneBasicInfo.geneSynonym}}</div>\r\n                            <div v-else>-</div>\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item label=\"Gene Symbol\">\r\n                            <div v-if=\"geneBasicInfo.geneSymbol!==''&& geneBasicInfo.geneSymbol\">{{geneBasicInfo.geneSymbol}}</div>\r\n                            <div v-else>-</div>\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item label=\"Gene Type\">{{geneBasicInfo.geneType}}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"Latin Name\">{{geneBasicInfo.speciesName.latinName}}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"Species Common Name\">{{geneBasicInfo.speciesName.commonName}}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"Taxon Id\">{{geneBasicInfo.speciesName.taxonId}}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"Chromosom\">{{geneBasicInfo.chromosom}}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"Gene Start\">{{geneBasicInfo.geneStart}}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"Gene End\">{{geneBasicInfo.geneEnd}}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"Gene Description\">{{geneBasicInfo.geneDescription}}</el-descriptions-item>\r\n                    </el-descriptions>\r\n                </el-card>\r\n        </div>\r\n        <!-- <el-divider></el-divider> -->\r\n        <div id=\"item-pos-2\">\r\n            <!-- <div class=\"p-ele top-p-ele\"><span class=\"style_categoryLabel__3AJmg style_gene__1pSX1 style_pageCategory__1ur8P\" >Gene Ortholog Informations</span></div> -->\r\n            <div class=\"var-box var-infoBox\">\r\n                <h3 class=\"var-title\">Gene Homolog</h3>\r\n            </div>\r\n            <el-card class=\"card-border\">\r\n                <div class=\"filt-div\">\r\n                    <el-select v-model=\"form.species.ortho\" multiple placeholder=\"Choose Species\" class=\"filt-spe-select\">\r\n                        <!-- <el-option label=\"Org1\" value=\"shanghai\"></el-option>\r\n                        <el-option label=\"Org2\" value=\"beijing\"></el-option> -->\r\n                        <el-option\r\n                            v-for=\"item in species\"\r\n                            :key=\"item.value\"\r\n                            :label=\"item.label\"\r\n                            :value=\"item.value\"\r\n                            >\r\n                        </el-option>\r\n                    </el-select>\r\n                    <el-button icon=\"el-icon-search\"  type=\"success\"  plain id=\"filter-search\" @click=\"searchFilter(form.species.ortho)\">Filter</el-button>\r\n                    <el-button icon=\"el-icon-delete\"  type=\"primary\"  plain id=\"filter-search\" @click=\"clearFilter()\">Clear</el-button>\r\n                </div>\r\n                <!-- </el-card> -->\r\n            <el-table\r\n                :data=\"tableOrthoList\"\r\n                class=\"info-table\"\r\n                v-loading=\"loading\"\r\n                :max-height=\"tableHeight\"\r\n                :border=\"false\"\r\n                :default-sort = \"{prop: 'commonName', order: 'ascending'}\"\r\n                >\r\n                <!-- <el-table-column> -->\r\n                    <!-- <template slot-scope=\"scope\"> -->\r\n                    <el-table-column prop=\"commonName\" label=\"Species\" ></el-table-column>\r\n                    <el-table-column prop=\"taxId\" label=\"Taxon Id\"></el-table-column>\r\n                    <el-table-column prop=\"ensemblId\" label=\"Ensembl Id\"></el-table-column>\r\n                    <el-table-column prop=\"entrezId\" label=\"Entrez Id\">\r\n                        <template slot-scope=\"scope\">\r\n                            <a :href=\"'https://www.ncbi.nlm.nih.gov/gene/?term='+scope.row.entrezId\" target='_blank'  v-if=\"scope.row.entrezId!=='-'\">\r\n                                {{ scope.row.entrezId }}\r\n                            </a>\r\n                            <div  v-if=\"scope.row.entrezId=='-'\">{{ scope.row.entrezId }}</div>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <!-- <el-table-column prop=\"geneSymbol\" label=\"Gene Symbol\"></el-table-column> -->\r\n                    <el-table-column prop=\"hdbGeneId\" label=\"Protein\">\r\n                        <template slot-scope=\"scope\" >\r\n                            <a :href=\"'https://www.uniprot.org/uniprot/'+scope.row.hdbGeneId\" target='_blank' v-if=\"scope.row.hdbGeneId.slice(0,2)!=='EN'\">\r\n                                {{ scope.row.hdbGeneId }}\r\n                            </a>\r\n                            <a :href=\"'https://asia.ensembl.org/Multi/Search/Results?q='+scope.row.hdbGeneId+';site=ensembl'\" target='_blank' v-if=\"scope.row.hdbGeneId.slice(0,2)=='EN'\">\r\n                                {{ scope.row.hdbGeneId }}\r\n                            </a>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column  label=\"Data Source\" align=\"center\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-popover\r\n                                placement=\"top\"\r\n                                title=\"Data Source\"\r\n                                width=\"200\"\r\n                                trigger=\"hover\"\r\n                                :content=\"scope.row.dbEvidence\">\r\n                                <i class=\"el-icon-s-order\" slot=\"reference\"></i>\r\n                            </el-popover>\r\n                            \r\n                        </template>\r\n                    </el-table-column>\r\n            </el-table>\r\n            </el-card>\r\n        </div>\r\n        <div id=\"item-pos-3\">\r\n            <div class=\"var-box var-infoBox\">\r\n                    <h3 class=\"var-title\">Gene Ontology</h3>\r\n            </div>\r\n        <!-- 提示信息不显示 -->\r\n    <el-card class=\"card-border draw-card\">\r\n        <!-- <el-tooltip content=\"Bottom center\" placement=\"hieranoid\" effect=\"light\">\r\n            <div><i class=\"el-icon-question question-icon\"></i></div>\r\n        </el-tooltip> -->\r\n\r\n        <div class=\"filt-div\">\r\n            <el-checkbox v-model=\"checked.go\" style=\"float:left\" class=\"filt-spe-select\" :disabled=\"waitResponse.go\" @change=\"compareOrthoGo(form.species.go)\">Compare Ortholog Genes</el-checkbox>\r\n                <el-select v-model=\"form.species.go\" multiple placeholder=\"Show All Species\" class=\"filt-spe-select\">\r\n                    <!-- <el-option label=\"Org1\" value=\"shanghai\"></el-option>\r\n                    <el-option label=\"Org2\" value=\"beijing\"></el-option> -->\r\n                    <el-option\r\n                        v-for=\"item in species\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                        >\r\n                    </el-option>\r\n                </el-select>\r\n            \r\n                <el-button icon=\"el-icon-search\"  type=\"success\"  plain id=\"filter-search\" @click=\"compareOrthoGo(form.species.go)\">Filter</el-button>\r\n                <el-button icon=\"el-icon-delete\"  type=\"primary\"  plain id=\"filter-search\" @click=\"clearOrthoGo()\">Clear</el-button>\r\n        </div>\r\n        <div class=\"filt-div\"></div>\r\n        <div id=\"svg-container-go\"></div>\r\n        <el-table \r\n            :data=\"goInfoData\"\r\n            id=\"subTable\"\r\n            max-height=\"500px\"\r\n            v-if=\"showGoTable\"\r\n            >\r\n            <el-table-column prop=\"goId\" label=\"GO Id\" align=\"center\" width=\"130px\"></el-table-column>\r\n            <el-table-column prop=\"goAnnotations\" label=\"GO Name\" align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"topClass\" label=\"GO classification\" align=\"center\" width=\"150px\"></el-table-column>\r\n            <el-table-column prop=\"goList\" label=\"Sub GO Id\" align=\"center\" ></el-table-column>\r\n            <el-table-column prop=\"definition\" label=\"GO Definition\" align=\"center\"></el-table-column>\r\n            \r\n                \r\n        </el-table>\r\n    </el-card>\r\n                   \r\n        </div>\r\n        <div id=\"item-pos-4\">\r\n            <div class=\"var-box var-infoBox\">\r\n                <h3 class=\"var-title\">Variants</h3>\r\n            </div>\r\n            <el-card class=\"card-border\">\r\n                <!-- <el-tooltip content=\"Bottom center\" placement=\"hieranoid\" effect=\"light\">\r\n                    <div><i class=\"el-icon-question question-icon\"></i></div>\r\n                </el-tooltip> -->\r\n                <div class=\"filt-div\">\r\n                <el-checkbox v-model=\"checked.var\" style=\"float:left\" class=\"filt-spe-select\" :disabled=\"waitResponse.var\" @change=\"compareOrthoVar(form.species.go)\">Compare Ortholog Genes</el-checkbox>\r\n                <el-select v-model=\"form.species.var\" multiple placeholder=\"Show All Species\" class=\"filt-spe-select\">\r\n                    <el-option\r\n                        v-for=\"item in species\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                        >\r\n                    </el-option>\r\n                </el-select>\r\n                <el-button icon=\"el-icon-search\"  type=\"success\"  plain id=\"filter-search\" @click=\"compareOrthoVar(form.species.var)\">Filter</el-button>\r\n                <el-button icon=\"el-icon-delete\"  type=\"primary\"  plain id=\"filter-search\" @click=\"clearOrthoVar()\">Clear</el-button>\r\n                </div>\r\n                <div id=\"svg-container-var\"></div>\r\n                <!-- 根据snplist取值的表 -->\r\n            <el-table\r\n                :data=\"varList\"\r\n                class=\"info-table\"\r\n                v-loading=\"varLoading\"\r\n                :border=\"false\"\r\n                v-if=\"showVarInfoTable\"\r\n                max-height=\"800px\"\r\n            >\r\n                <el-table-column\r\n                    prop=\"geneName\"\r\n                    label=\"Gene Id\"\r\n                    align=\"center\"\r\n                    >\r\n                </el-table-column>\r\n                \r\n                <el-table-column\r\n                    prop=\"rsnpId\"\r\n                    label=\"Var Id\"\r\n                    align=\"center\">\r\n                    <template slot-scope=\"scope\">\r\n                        <a v-bind:href=\"'https://ngdc.cncb.ac.cn/gvm/snp/getSNPDetail?snpname='+scope.row.rsnpId+'&chrom='+scope.row.chrom+'&position='+scope.row.position+'&orgId='+scope.row.gwasid\" target='_blank'>\r\n                        {{ scope.row.rsnpId }}\r\n                        </a>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"finalposition\"\r\n                    label=\"Position\"\r\n                    align=\"center\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"finalallele\"\r\n                    label=\"Allele\"\r\n                    align=\"center\"\r\n                >\r\n                </el-table-column>\r\n               \r\n\r\n                <el-table-column\r\n                    prop=\"finalmaf\"\r\n                    label=\"MAF\"\r\n                    align=\"center\">\r\n                </el-table-column>\r\n              \r\n\r\n                <el-table-column\r\n                    prop=\"snpClassId\"\r\n                    label=\"Class\"\r\n                    align=\"center\">\r\n                </el-table-column>\r\n               \r\n                <el-table-column\r\n                    prop=\"conseqtype\"\r\n                    label=\"Consequence Type/Effect\"\r\n                    align=\"center\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"gene.genealias\"\r\n                    label=\"Gene Symbol\"\r\n                    align=\"center\"\r\n                >\r\n                 <template slot-scope=\"scope\">\r\n                        <div v-if=\"scope.row.gene.genealias!==''&& scope.row.gene.genealias\">{{scope.row.gene.genealias}}</div>\r\n                        <div v-else>-</div>\r\n                    </template>\r\n                </el-table-column>\r\n                \r\n            </el-table>\r\n            </el-card>\r\n        </div>\r\n        <div id=\"item-pos-5\">\r\n                <!-- <p class=\"p-ele\"><span class=\"style_categoryLabel__3AJmg style_gene__1pSX1 style_pageCategory__1ur8P\" >Traits</span></p> -->\r\n            <div class=\"var-box var-infoBox var-box var-infoBox\">\r\n                <h3 class=\"var-title\">Traits</h3>\r\n            </div>\r\n                    <!-- 提示信息不显示 -->\r\n            <el-card class=\"card-border\">\r\n            <!-- <el-tooltip content=\"Bottom center\" placement=\"hieranoid\" effect=\"light\">\r\n                <div><i class=\"el-icon-question question-icon\"></i></div>\r\n            </el-tooltip> -->\r\n            <div class=\"filt-div\">\r\n            <el-checkbox v-model=\"checked.trait\" style=\"float:left\" class=\"filt-spe-select\" :disabled=\"waitResponse.trait\" @change=\"compareOrthoTrait(form.species.go)\">Compare Ortholog Genes</el-checkbox>\r\n            <el-select v-model=\"form.species.trait\" multiple placeholder=\"Show All Species\" class=\"filt-spe-select\">\r\n                <el-option\r\n                    v-for=\"item in species\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\"\r\n                    >\r\n                </el-option>\r\n            </el-select>\r\n            <el-button icon=\"el-icon-search\"  type=\"success\" plain id=\"filter-search\" @click=\"compareOrthoTrait(form.species.trait)\">Filter</el-button>\r\n            <el-button icon=\"el-icon-delete\"  type=\"primary\" plain id=\"filter-search\" @click=\"clearOrthoTrait()\">Clear</el-button>\r\n            </div>\r\n\r\n                <!-- </el-container> -->\r\n            <!-- </el-card> -->\r\n            <div id=\"svg-container-trait\"></div>\r\n            <!-- <el-table :data=\"traitData\" class=\"info-table\"  v-loading=\"goloading\" :border=\"false\" v-if=\"showTraitTable\">\r\n                <el-table-column  prop=\"traitName\" label=\"Trait Name\" align=\"center\"></el-table-column>\r\n                <el-table-column  prop=\"traitId\" label=\"Trait Id\" width=\"80px\" align=\"center\"></el-table-column>\r\n                <el-table-column  prop=\"definition\" label=\"Trait Definition\" align=\"center\"></el-table-column>\r\n                <el-table-column  prop=\"gwasList\" label=\"Gwas Id\" align=\"center\"></el-table-column>\r\n                \r\n            </el-table> -->\r\n            <el-table \r\n                :data=\"traitData\"\r\n                id=\"subTable\"\r\n                :row-style=\"{height: '0'}\"\r\n                max-height=\"800\"\r\n                v-loading=\"goloading\"\r\n                v-if=\"showTraitTable\"\r\n              >\r\n                \r\n                <el-table-column prop=\"toptraitName\" label=\"Trait Name\" align=\"center\"></el-table-column>\r\n                <el-table-column prop=\"gwasGeneId\" label=\"Gene Id\" align=\"center\"></el-table-column>\r\n                <el-table-column prop=\"varId\" label=\"Var Id\" align=\"center\">\r\n                  <template slot-scope=\"scope\">\r\n                    <a v-bind:href=\"'https://ngdc.cncb.ac.cn/gvm/snp/getSNPDetail?snpname='+scope.row.varId+'&chrom='+scope.row.chrom+'&position='+scope.row.endPos+'&orgId='+scope.row.orgId\" target='_blank'>\r\n                      {{ scope.row.varId }}\r\n                    </a>\r\n                  </template>\r\n                </el-table-column>\r\n                \r\n                <el-table-column prop=\"traitName\" label=\"Sub Trait Name\" align=\"center\"></el-table-column>\r\n                <el-table-column prop=\"speciesCommonName\" label=\"Species\" align=\"center\"></el-table-column>\r\n                <el-table-column prop=\"pmid\" label=\"Pubmed Id\" align=\"center\">\r\n                  <template slot-scope=\"scope\">\r\n                    <a v-bind:href=\"'https://pubmed.ncbi.nlm.nih.gov/'+scope.row.pmid\" target='_blank'>\r\n                      {{ scope.row.pmid }}\r\n                    </a>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"pvalue\" label=\"Pvalue\" align=\"center\"></el-table-column>\r\n              </el-table>\r\n            </el-card>\r\n        </div>\r\n        <div id=\"item-pos-6\">\r\n            <div class=\"var-box var-infoBox\">\r\n                    <h3 class=\" var-title\">Expression</h3>\r\n            </div>\r\n            <el-card class=\"card-border draw-card\">\r\n                    <!-- 提示信息不显示 -->\r\n\r\n                    <!-- <el-container direction=\"vertical\" > -->\r\n                        <!-- <el-tooltip content=\"Bottom center\" placement=\"hieranoid\" effect=\"light\">\r\n                            <div><i class=\"el-icon-question question-icon\"></i></div>\r\n                        </el-tooltip> -->\r\n                <div class=\"filt-div\">\r\n                <el-checkbox v-model=\"checked.expression\" style=\"float:left\" class=\"filt-spe-select\" :disabled=\"waitResponse.expression\" @change=\"compareOrthoExpre(form.species.go)\">Compare Ortholog Genes</el-checkbox>\r\n                <el-select v-model=\"form.species.expression\" multiple placeholder=\"Show All Species\" class=\"filt-spe-select\">\r\n                    <el-option\r\n                        v-for=\"item in species\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                        >\r\n                    </el-option>\r\n                </el-select>\r\n                <el-button icon=\"el-icon-search\"  type=\"success\" plain id=\"filter-search\" @click=\"compareOrthoExpre(form.species.expression)\">Filter</el-button>\r\n                <el-button icon=\"el-icon-delete\"  type=\"primary\" plain id=\"filter-search\" @click=\"clearOrthoExpre()\">Clear</el-button>\r\n                </div>\r\n                <div id=\"svg-container-expression\"></div>\r\n                <div class=\"filter-box\" v-if=\"showExpInfoTable\"> <div style=\"line-height:32px\">Filter TPM value > </div><el-input v-model=\"filterValue\" size=\"small\"  style=\"width:100px;\" @change=filterExpDara clearable></el-input></div>\r\n                <el-table :data=\"expTabledata\"  class=\"info-table\"  v-loading=\"exploading\" :border=\"false\" v-if=\"showExpInfoTable\" >\r\n                    <el-table-column  prop=\"geneId\" label=\"Gene Id\" align=\"center\">\r\n                        <template slot-scope=\"scope\">\r\n                            <a :href=\"'https://ngdc.cncb.ac.cn/gen/gene/'+scope.row.genOrgId+'/'+scope.row.geneId\" target='_blank'>\r\n                                {{ scope.row.geneId }}\r\n                            </a>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column  prop=\"projectId\" label=\"Bioproject Id\" align=\"center\">\r\n                        <template slot-scope=\"scope\">\r\n                            <a :href=\"'https://ngdc.cncb.ac.cn/gen/project/accession/'+scope.row.projectId\" target='_blank'>\r\n                                {{ scope.row.projectId }}\r\n                            </a>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column  prop=\"tissue\" label=\"Tissue\" align=\"center\"></el-table-column>\r\n                    <el-table-column  prop=\"expAvg\" label=\"Average TPM\" align=\"center\" sortable></el-table-column>\r\n                </el-table>\r\n            </el-card>\r\n        </div>\r\n        </div>\r\n    </div>\r\n    </el-container>\r\n    <!-- </el-card> -->\r\n    <FooterBar/>\r\n    <template>\r\n    <el-backtop\r\n      :bottom=\"100\"\r\n      style=\"z-index: 999;\"\r\n      class=\"backTop\"\r\n    >\r\n      <div\r\n        style=\"\r\n           {\r\n            height: 100%;\r\n            width: 100%;\r\n            box-shadow: 0 0 6px rgba(0, 0, 0, 0.12);\r\n            text-align: center;\r\n            line-height: 40px;\r\n            color: #1989fa;\r\n            border-radius: 50%;\r\n            background-color: white;\r\n          }\r\n        \"\r\n      >\r\n      <i class=\"el-icon-caret-top\"></i>\r\n      </div>\r\n    </el-backtop>\r\n    </template>\r\n</div>\r\n\r\n</template>\r\n<style src=\"../assets/css/gene-detail.css\" scoped></style>\r\n<script>\r\n// @ is an alias to /src\r\nimport HeaderBar from '@/components/HeaderBar.vue';\r\nimport FooterBar from '@/components/FooterBar.vue';\r\nimport Banner from \"@/components/banner.vue\";\r\nimport linkIcon from \"@/assets/img/icon/link-icon-4.svg\";\r\nimport * as d3 from 'd3';\r\n// import { Loading } from 'element-ui';\r\nexport default {\r\n  name: 'GeneDetail',\r\n  components: {\r\n    // Navigator,\r\n    Banner,\r\n    HeaderBar,\r\n    FooterBar,\r\n\r\n  },\r\n  data(){\r\n      return {\r\n        tableData: [],\r\n        tabPosition:\"left\",\r\n        size:\"medium\",\r\n        geneBasicInfo:{},\r\n        orthoInfo:[],\r\n        tableOrthoList:[],\r\n        // goList:[],\r\n        varList:[],\r\n        loading:true,\r\n        goloading:true,\r\n        linkIcon,\r\n        dbEvidence:\"\",\r\n        form:{\"species\":{\"go\":\"\",\"ortho\":\"\",\"var\":\"\",\"trait\":\"\",\"expression\":\"\"}},\r\n        checked:{\"go\":\"\",\"var\":\"\",\"trait\":\"\",\"expression\":\"\"},\r\n        species:[],\r\n        navBarFixed:\"false\",\r\n        tableHeight:700,\r\n        tooltip:\"\",\r\n        showVarInfoTable:false,\r\n        waitResponse:{\"go\":false,\"var\":false,\"trait\":false,\"expression\":false},\r\n        clicked:{\"go\":false,\"var\":false,\"trait\":false,\"expression\":false},\r\n        classification:\"\",\r\n        windowSize:3,\r\n        fullLoading:true,\r\n        showGoTable:false,\r\n        goInfoData:[],\r\n        expTabledata:[],\r\n        showExpInfoTable:false,\r\n        exploading:false,\r\n        traitData:[],\r\n        showTraitTable:false,\r\n        filterValue:\"\"\r\n        }\r\n    },\r\n\r\n    methods: {\r\n      selectMenu(key){\r\n        // scrollIntoView() js原生方法，实现锚点滚动过渡\r\n        const target = document.querySelector(\"#item-pos-\"+key)\r\n        target.scrollIntoView({ behavior: 'smooth' })\r\n        // scrollTo() 把内容滚动到指定的坐标。减去导航高度的目的：导航用定位固定在顶部，如果不减去，导航栏会遮挡一部分内容\r\n        window.scrollTo(0, target.offsetTop)\r\n      },\r\n      searchFilter(key){\r\n          let filterOrtho=this.tableOrthoList.filter(item=>{\r\n              return  key.indexOf(\"\"+item.taxId) >-1\r\n          })\r\n          this.tableOrthoList=filterOrtho\r\n\r\n      },\r\n      clearFilter(){\r\n          this.tableOrthoList=this.orthoInfo\r\n      },\r\n      compareOrthoGo(filtSpecies){\r\n        this.clearOrthoGo()\r\n        this.compareFuntion(\"go\",filtSpecies)\r\n      },\r\n      clearOrthoGo(){\r\n        this.cleatFunction('go')\r\n      },\r\n      compareOrthoVar(filtSpecies){\r\n        this.clearOrthoVar()\r\n        this.compareFuntion('var',filtSpecies)\r\n\r\n      },\r\n      clearOrthoVar(){\r\n        this.cleatFunction('var')\r\n      },\r\n      compareOrthoTrait(filtSpecies){\r\n        this.clearOrthoTrait()\r\n        this.compareFuntion(\"trait\",filtSpecies)\r\n      },\r\n      clearOrthoTrait(){\r\n        this.cleatFunction('trait')\r\n      },\r\n      compareOrthoExpre(filtSpecies){\r\n        this.clearOrthoExpre()\r\n        this.compareFuntion(\"expression\",filtSpecies)\r\n      },\r\n      clearOrthoExpre(){\r\n        this.cleatFunction('expression')\r\n      },\r\n      cleatFunction(key){\r\n\r\n        this.checked[key]=false;\r\n        this.clicked[key]=false;\r\n        let svgContainer=d3.select(\"#svgcontainer-\"+key)\r\n        d3.selectAll(\"#group_total_\"+key).remove()\r\n        if(key=='go'){svgContainer.attr('height','400')}else{\r\n            svgContainer.attr('height','300')\r\n        }\r\n        if(key=='var'){\r\n            this.showVarInfoTable=false;\r\n        }else if(key=='go'){\r\n            this.showGoTable=false;\r\n        }else if(key=='expression'){\r\n            this.showExpInfoTable=false;\r\n        }\r\n        this.waitResponse[key]=false;\r\n        this.form.species[key]=\"\";\r\n      },\r\n    //   点击show button 调用的函数\r\n      compareFuntion(key,filtSpecies){\r\n        let filterOrtho;\r\n        if(filtSpecies.length>0){\r\n            filterOrtho=this.orthoInfo.filter(item=>{\r\n                return  filtSpecies.indexOf(\"\"+item.taxId) >-1\r\n            })\r\n        }else{\r\n            filterOrtho=this.orthoInfo;\r\n        }\r\n        if(!this.clicked[key]){\r\n        this.clicked[key]=true;\r\n        this.checked[key]=true;\r\n        this.waitResponse[key]=true;\r\n        //   取当前table的同源基因，循环查询对应的数据，如果有的话，添加一行\r\n        let index=0;\r\n        let num=0;\r\n        for(let i=0;i<filterOrtho.length;i++){\r\n            let orthoItem=filterOrtho[i];\r\n            //   let classification=orthoItem.species.classification;\r\n            //   if(orthoItem.gbiInfo!=null){\r\n            let hdbId=orthoItem.hdbGeneId;\r\n            let symbol;\r\n            if(orthoItem.geneSymbol!==\"-\" & orthoItem.geneSymbol!==\"\"){\r\n                // symbol-ensemblgid-entrezid-hdbid\r\n                symbol =orthoItem.geneSymbol\r\n            }else if(orthoItem.ensemblId!==\"-\" & orthoItem.ensembId!==\"\"){\r\n                symbol=orthoItem.ensemblId;\r\n            }else if(orthoItem.entrezId!==\"-\" & orthoItem.entrezId!==\"\"){\r\n                symbol=orthoItem.entrezId;\r\n            }else{\r\n                symbol=orthoItem.hdbGeneId;\r\n            }\r\n           let taxonid=orthoItem.taxId\r\n            // let speciesName=orthoItem.commonName.slice(0,3)\r\n            let params= {'hdbId': hdbId}\r\n            console.log(\"orthoItem.shortName:\",orthoItem);\r\n            if(key==\"expression\"){params= {'hdbId': hdbId,'classification':this.classification}}\r\n            this.$axios.get(\"https://ngdc.cncb.ac.cn/hapi/api/gene-detail-\"+key,{params:params})\r\n            .then(response=>{\r\n                if(response.data.length>0){\r\n                    num+=response.data.length;\r\n                    index += 1;\r\n                    let svgContainer=d3.select(\"#svgcontainer-\"+key)\r\n                    let tooltip=d3.select(\"#tooltip\")\r\n                    console.log(\"orthoItem:\",orthoItem);\r\n                    this.drawSubRectChart(response.data,svgContainer,key,index,tooltip,orthoItem.shortName,orthoItem.latinName,orthoItem.commonName, symbol,taxonid,orthoItem.hdbGeneId)\r\n                }\r\n                \r\n            })\r\n\r\n            //   }\r\n          }\r\n          setTimeout(() => {\r\n            if(num==0){\r\n                this.$message('No Annotation Data Here');\r\n            }\r\n          }, 1000);\r\n          \r\n        }\r\n      },\r\n      getTableMaxHeight(){\r\n        this.$nextTick(function () {\r\n        let box = document.querySelector(\".info-div\").attributes\r\n        let box_clientHeight = box[0].ownerElement.clientHeight;\r\n        this.tableHeight = box_clientHeight - 100;\r\n        })\r\n    },\r\n      watchScroll() {\r\n      var scrollTop =\r\n        window.pageYOffset ||\r\n        document.documentElement.scrollTop ||\r\n        document.body.scrollTop;\r\n      //  当滚动超过 288 时，实现吸顶效果\r\n      if (scrollTop > 288) {\r\n        this.navBarFixed = true;\r\n      } else {\r\n        this.navBarFixed = false;\r\n      }\r\n    },\r\ndrawGoRectChart(value,svgContainer,dataclass,shortName,latinName,commonName,geneName,taxonid,hdbid){\r\n    let rectHeight=18;\r\n    // 绘制文字部分\r\n    let tooltip = d3.select('.tables')\r\n        .append('div')\r\n        .attr(\"id\", \"tooltip\")\r\n        .style('position', 'absolute')\r\n        .style('z-index', '1000')\r\n        .style('display','none')\r\n        .style('line-height','18px')\r\n        .style('text-align','justify')\r\n        .style('font-size', '14px')\r\n        .style('text-align','left')\r\n        .style('padding', '15px')\r\n        .style('border-radius',\"5%\")\r\n        .style('color','white')\r\n        .style('background-color','#808080')\r\n    // 用来判断当前类别，不同类别中间间隔开\r\n    let top_class;\r\n    let class_count=0;\r\n    let class_PADDING=30;\r\n    if(dataclass==\"var\"){top_class=value[0].voClassification;}else if(dataclass==\"go\"){\r\n        top_class=value[0].topClass;\r\n    }else if(dataclass==\"expression\"){top_class=value[0].eoClassification}\r\n    for(let iii in value ){\r\n        let text_top=180;\r\n        let text_x=115;\r\n        if(dataclass==\"go\"){text_top+=25;text_x-=25}\r\n        let item=value[iii]\r\n\r\n        let G_PADDING=rectHeight;\r\n        // 不同分类间的间隔\r\n        if(dataclass==\"var\"){\r\n            if(item.voClassification!==top_class){top_class=item.voClassification;class_count+=1}\r\n        }else if(dataclass==\"go\"){\r\n            if(item.topClass!==top_class){top_class=item.topClass;class_count+=1}\r\n        }else if(dataclass==\"expression\"){\r\n            if(item.eoClassification!==top_class){top_class=item.eoClassification;class_count+=1}\r\n        }\r\n\r\n        // trait和variant注释类型比较少，所以隔宽点\r\n        // if(dataclass==\"var\"||dataclass==\"trait\"){G_PADDING+=7;}\r\n        let group_text = svgContainer.append('g').attr(\"id\", \"text_group\"+iii).attr(\"transform\",\"translate(\"+((iii*G_PADDING)+(class_PADDING*class_count)-70)+\",\"+text_top+\") rotate(-45)\")\r\n        let gene_fontsize=12\r\n        let textgs = group_text.selectAll(\"text\").data([item]).enter()\r\n        if(dataclass=='go'){\r\n            textgs.append(\"text\")\r\n                .attr(\"fill\", \"black\")\r\n                .attr(\"text-anchor\", \"start\")\r\n                .attr(\"font-family\", \"sans-serif\")\r\n                .attr(\"font-size\", gene_fontsize)\r\n                .attr(\"x\", text_x)\r\n                .attr(\"y\", text_top)\r\n                .text(d => {\r\n                    let txtfile=d.goAnnotations\r\n                    if(d.goAnnotations.length>40){\r\n                        txtfile=d.goAnnotations.slice(0,40)+\"...\"\r\n                    }\r\n                    return  txtfile\r\n                })\r\n        }else if(dataclass=='var'){\r\n             textgs.append(\"text\")\r\n            .attr(\"fill\", \"black\")\r\n            .attr(\"text-anchor\", \"start\")\r\n            .attr(\"font-family\", \"sans-serif\")\r\n            .attr(\"font-size\", gene_fontsize)\r\n            .attr(\"x\", text_x)\r\n            .attr(\"y\", text_top)\r\n            .text(d => {\r\n                return  d.voAnnotaion\r\n            })\r\n        }else if(dataclass==\"expression\"){\r\n            textgs.append(\"text\")\r\n            .attr(\"fill\", \"black\")\r\n            .attr(\"text-anchor\", \"start\")\r\n            .attr(\"font-family\", \"sans-serif\")\r\n            .attr(\"font-size\", gene_fontsize)\r\n            .attr(\"x\", text_x)\r\n            .attr(\"y\", text_top)\r\n            .text(d => {\r\n                return  d.eoAnnotation\r\n            })\r\n        }\r\n        else{\r\n             textgs.append(\"text\")\r\n            .attr(\"fill\", \"black\")\r\n            .attr(\"text-anchor\", \"start\")\r\n            .attr(\"font-family\", \"sans-serif\")\r\n            .attr(\"font-size\", gene_fontsize)\r\n            .attr(\"x\", text_x)\r\n            .attr(\"y\", text_top)\r\n            .text(d => {\r\n                return  d.traitName\r\n            })\r\n        }\r\n        }\r\n    // let speciesName=\r\n    // 绘制热图rect部分\r\n    this.drawSubRectChart(value,svgContainer,dataclass,0,tooltip,shortName,latinName,commonName,geneName,taxonid,hdbid)\r\n\r\n    },\r\n    // 封装绘制rect方法\r\n    drawSubRectChart(value,svgContainer,dataclass,index,tooltip,shortName,latinName,commonName,geneName,taxonid12,hdbid){\r\n        console.log(\"value:\",value);\r\n        // geneName=geneName.length>10?geneName.slice(0,10)+\"..\":geneName;\r\n        let rectHeight=18\r\n        let rect_top=228;\r\n        if(dataclass==\"go\"){rect_top+=60}\r\n        // let RECT_WIDTH=rectHeight;\r\n        // let rect_height=rectHeight;\r\n        let PADDING=rectHeight;\r\n        let oriSvgHeight=300;\r\n        if(dataclass==\"go\"){oriSvgHeight=400}\r\n        svgContainer.attr('height',`${oriSvgHeight+index*18}`)\r\n        let group_total;\r\n        if(index==0){\r\n            group_total = svgContainer.append('g').attr(\"id\", \"group_total_0\").attr('transform',`translate(0,${PADDING*index})`)\r\n        }else{\r\n            group_total = svgContainer.append('g').attr(\"id\", \"group_total_\"+dataclass).attr('transform',`translate(0,${PADDING*index})`)\r\n        }\r\n        let gene_fontsize=12\r\n        group_total.append('text')\r\n            .attr('x',0)\r\n            .attr('y',rect_top+rectHeight/2+5)\r\n            .attr(\"font-size\", gene_fontsize)\r\n            .text(`${geneName.length>10?geneName.slice(0,10)+\"..\":geneName}(${shortName})`)\r\n        let rect_group = group_total.selectAll(\"rect\")\r\n            .data(value)\r\n            .enter()\r\n        let RECT_PADDING=rectHeight;\r\n        let RECT_x=128;\r\n        // 判断绘图时的数据类别，不同类别间隔开\r\n        let top_class;\r\n        let class_count=0;\r\n        let class_PADDING=30;\r\n        if(dataclass==\"var\"){top_class=value[0].voClassification;}else if(dataclass==\"go\"){\r\n            top_class=value[0].topClass;\r\n        }else if(dataclass==\"expression\"){top_class=value[0].eoClassification}\r\n\r\n\r\n        // if(dataclass==\"var\"||dataclass==\"trait\"){RECT_PADDING=25;}\r\n        rect_group.append('rect')\r\n        .attr(\"x\", (d, i) => {\r\n             // 不同分类间的间隔\r\n            if(dataclass==\"var\"){\r\n                if(d.voClassification!==top_class){top_class=d.voClassification;class_count+=1}\r\n            }else if(dataclass==\"go\"){\r\n                if(d.topClass!==top_class){top_class=d.topClass;class_count+=1}\r\n            }else if(dataclass==\"expression\"){\r\n                if(d.eoClassification!==top_class){top_class=d.eoClassification;class_count+=1}\r\n            }\r\n\r\n            let startRate = RECT_x+i*RECT_PADDING+class_count*class_PADDING\r\n            return startRate\r\n        })\r\n        .attr(\"y\", rect_top )\r\n        .attr(\"width\", rectHeight )\r\n        .attr(\"height\", rectHeight )\r\n        .attr(\"fill\", d=>d.opacity>0?\"rgba(141,192,252,\"+(d.opacity+0.2)+\")\":\"rgba(141,192,252,0)\")\r\n        .attr('stroke',\"darkgray\")\r\n        .attr('cursor',d=>d.opacity>0?'pointer':'')\r\n        .on(\"mousemove\", function(d, i){\r\n            let htmlInfo;\r\n            if( dataclass ==\"go\"){\r\n                htmlInfo=`\r\n            <div><strong>Gene Id: </strong>${geneName}</div>\r\n            <div><strong>Species: </strong>${latinName} (${commonName})</div>\r\n            <div><strong>GO Annotation Number: </strong>${i.goNum>0?i.goNum:\"-\"}</div>\r\n            <div><strong>GO Id: </strong>${i.goId}</div>\r\n            <div><strong>Annotate Subclass GO Id: </strong>${i.goList==null?\"-\":i.goList.slice(0,2)}${i.goList!==null&&i.goList.length>2?\"...\":\"\"}</div>\r\n            <div><strong>Go Term: </strong>${i.goAnnotations}</div>\r\n            <div><strong>Go Classification: </strong>${i.topClass}</div>\r\n            <div><strong>Go Definition: </strong>${i.definition}</div>\r\n            `\r\n            }else if( dataclass ==\"var\"){\r\n                 htmlInfo=`\r\n            <div><strong>Gene Id: </strong>${geneName}</div>\r\n            <div><strong>Species: </strong>${latinName} (${commonName})</div>\r\n            <div>Variant Number: ${i.snpNum>0?i.snpNum:\"-\"}</div>\r\n            <div>Variant List: ${i.snpList==null?\"-\":i.snpList.slice(0,2)}${i.snpList!==null&&i.snpList.length>2?\"...\":\"\"}</div>\r\n            <div>Consequence Type: ${i.voAnnotaion}</div>\r\n            <div>Effect: ${i.voClassification}</div>\r\n\r\n            `\r\n            }else if( dataclass ==\"expression\"){\r\n                htmlInfo=`\r\n            <div><strong>Gene Id: </strong>${geneName}</div>\r\n            <div><strong>Species: </strong>${latinName} (${commonName})</div>\r\n            <div>Expression Project Number: ${i.prjNum>0?i.prjNum:\"-\"}</div>\r\n            <div>Bioproject List: ${i.prjList==null?\"-\":i.prjList.slice(0,2)}${i.prjList!==null&&i.prjList.length>2?\"...\":\"\"}</div>\r\n            <div>Expression Classification: ${i.eoClassification}</div>\r\n            <div>Expression Annotation: ${i.eoAnnotation}</div>\r\n            `\r\n            }else {\r\n                htmlInfo=`\r\n            <div><strong>Gene Id: </strong>${geneName}</div>\r\n            <div><strong>Species: </strong>${latinName} (${commonName})</div>\r\n            <div>Gwas Number: ${i.gwasNum>0?i.gwasNum:\"-\"}</div>\r\n            <div>Gwas List: ${i.gwasList==null?\"-\":i.gwasList.slice(0,2)}${i.gwasList!==null&&i.gwasList.length>2?\"...\":\"\"}</div>\r\n            <div>Trait Id: ${i.traitId}</div>\r\n            <div>Trait Name: ${i.traitName}</div>\r\n            `\r\n            }\r\n            let pos_y=d.pageY+20;\r\n            let WIDTH=350\r\n            let pos_x=d.pageX+20;\r\n            if(pos_x+WIDTH>d.clientX){\r\n                pos_x-=WIDTH\r\n            }\r\n            \r\n            tooltip.interrupt().style(\"display\", \"block\").html(htmlInfo)\r\n                .style(\"opacity\",\"0.8\")\r\n                .style(\"border\",\"none\")\r\n                .style('text-align','left')\r\n                .style('top', pos_y+\"px\")\r\n                .style('left',pos_x+\"px\")\r\n                .style('width',WIDTH+\"px\")\r\n        })\r\n        .on('mouseout', function () {\r\n            tooltip.style('display', 'none')\r\n        })\r\n        .on(\"click\", (d,i)=>{\r\n            // let classification=this.geneBasicInfo.speciesName.classification;\r\n            console.log(\"d,i:\",d,i);\r\n            if(dataclass==\"var\"){\r\n                if(i.snpList.length>0){\r\n                    this.varLoading=true;\r\n                    this.showVarInfoTable=true;\r\n                    let dataSource=i.dataSource;\r\n\r\n                    this.$axios.get(\"https://ngdc.cncb.ac.cn/hapi/api/species-gwasorg\",{params:{'taxonId': taxonid12,\"hdbId\":hdbid}}).then(response=>{\r\n                        let gwasid=response.data.gwasOrgid;\r\n                        // let gwasGeneId=response.data.gwasGeneId;\r\n\r\n                        let BASEPATH=\"\";\r\n                        if(dataSource != null && dataSource.length >0 ){\r\n                        if(dataSource.indexOf(\"v2\")>0){BASEPATH=\"https://ngdc.cncb.ac.cn/gvmRESTV2/v2/variants/getlist?dataSource=\"}\r\n                        else{BASEPATH=\"https://ngdc.cncb.ac.cn/gvmRESTV3/v2/variants/getlist?dataSource=\"}\r\n                        \r\n                        let snpAll=i.snpList.join(',')\r\n                        if(BASEPATH.length>0){\r\n                        let PATH=BASEPATH+dataSource+\"&snplist=\"+snpAll;\r\n                        if(i.snpList.length>0){\r\n                            this.$axios.get(PATH).then(response=>{\r\n                                // this.showVarInfoTable=true;\r\n                                // var table绑定返回的snp数据\r\n                                console.log(\"response:\",response.data);\r\n                                this.varList=[];\r\n                                if(response.data != null){\r\n                                this.varList=response.data.snp;\r\n                                console.log(\"this.rsnpId:\",this.varList);\r\n                                // for(let item of tresponse.data.snp){}\r\n                                if(this.varList.length){this.varList=response.data.snp;}else{this.varList=[response.data.snp];}\r\n                                for(let item of this.varList){\r\n                                    let pos=item.chrom+\":\"+item.position;\r\n                                    let allele=item.refallele+\"/\"+item.allele;\r\n                                    let maf=item.maf+\":\"+item.maffreq.slice(0,7);\r\n                                    let classsnp=\"SNP\";\r\n                                    item.finalposition=pos;\r\n                                //item.position=pos;\r\n                                //item.allele=allele;\r\n                                //item.maf=maf;\r\n                                    item.finalallele=allele;\r\n                                    item.finalmaf=maf;\r\n                                    item.snpClassId=classsnp;\r\n                                    item.gwasid=gwasid;\r\n                                    if(Array.isArray(item.gene)){\r\n                                        let geneName=[]\r\n                                        let consequence_type=[]\r\n                                        for(let geneitem of item.gene){\r\n                                            geneName.push(geneitem.genename)\r\n                                            if(consequence_type.indexOf(geneitem.conseqtype)==-1){\r\n                                                consequence_type.push(geneitem.conseqtype)\r\n                                            }\r\n                                        }\r\n                                        item.geneName=geneName.join(\",\");\r\n                                        item.conseqtype=consequence_type.join(\",\");\r\n                                    }else{\r\n                                        item.geneName=item.gene.genename\r\n                                        item.conseqtype=item.gene.conseqtype\r\n                                    }\r\n                                }\r\n                                this.varLoading=false;\r\n                                }\r\n                            })\r\n                        }\r\n                        }\r\n                        }\r\n                        this.varLoading=false;\r\n                    })\r\n                }\r\n            }else if(dataclass==\"go\"){\r\n                if(i.goList.length>0){\r\n                    i.goList=i.goList.join(\",\")\r\n                    this.goInfoData=[i]\r\n                    // this.goInfoData.goList=listgo\r\n                    this.showGoTable=true;\r\n                }\r\n            }else if(dataclass==\"trait\"){\r\n                if(i.gwasList.length>0){\r\n                    this.goloading=true;\r\n                    this.showTraitTable=true;\r\n                    let gwaslist=i.gwasList.join(\",\")\r\n                    // this.traitData=[i]\r\n                    this.$axios.get(\"https://ngdc.cncb.ac.cn/hapi/api/species-gwasorg\",{params:{'taxonId': taxonid12,\"hdbId\":hdbid}}).then(response=>{\r\n                        let gwasid=response.data.gwasOrgid;\r\n                        let gwasGeneId=response.data.gwasGeneId;\r\n                        this.$axios.get(\"https://ngdc.cncb.ac.cn/gapi/gwas/gwasids?gwasId=\"+gwaslist+\"&organismId=\"+gwasid+\"&offset=0&pagesize=10&total=10&geneId=\"+gwasGeneId)\r\n                        .then(response=>{\r\n                            let resDara=response.data\r\n                            for(let item of resDara){\r\n                                item.gwasGeneId=gwasGeneId;\r\n                                item.toptraitName=i.traitName;\r\n                            }\r\n                            this.traitData=resDara;\r\n                            // console.log(\"this.traitData:\",this.traitData);\r\n                        }).finally(()=>{\r\n                            setTimeout(() => {\r\n                            this.goloading=false;\r\n                        }, 100);\r\n                    })\r\n                        \r\n                    })\r\n                   \r\n                }\r\n            }else if(dataclass==\"expression\"){\r\n                if(i.prjList.length>0){\r\n                    this.showExpInfoTable=true;\r\n                    this.exploading=true;\r\n                    let prjlist=i.prjList.join(',')\r\n                    let PATH=\"https://ngdc.cncb.ac.cn/gen/api/json/gene/expressions?taxonomyId=\"+i.taxonId+\"&accession=\"+i.geneId+\"&bioProjectId=\"+prjlist\r\n                    this.$axios.get(PATH).then(response=>{\r\n                        let expdata=response.data.result.expressionProfiles;\r\n                        let expTabledata=[];\r\n                        for(let keyaa in expdata ){\r\n                            let prjList=expdata[keyaa]\r\n                            let expNum=0;\r\n                            // let sampleNum=0;\r\n                            let tissue={};\r\n                            for(let item of prjList){\r\n                                // sampleNum += 1;\r\n                                expNum += item.tpm;\r\n                                let itemTissue=item.tissue\r\n                                if(Object.keys(tissue).indexOf(itemTissue) == -1 ){\r\n                                    tissue[itemTissue]=[expNum]\r\n                                }else{\r\n                                    tissue[itemTissue].push(expNum)\r\n                                }\r\n                            }\r\n                            for(let tissueName in tissue){\r\n                                let valueList=tissue[tissueName]\r\n                                let valsum=eval(valueList.join(\"+\"))\r\n                                let expAvg=(valsum/valueList.length).toFixed(4)\r\n                                let item={\r\n                                    \"projectId\":keyaa,\r\n                                    \"tissue\":tissueName,\r\n                                    \"expAvg\":Number(expAvg),\r\n                                    \"geneId\":i.geneId,\r\n                                    \"genOrgId\":i.genOrgid\r\n                                }\r\n                                expTabledata.push(item)\r\n                                \r\n                            }\r\n                        }\r\n                        this.exploading=false;\r\n                        this.oriexpTabledata=expTabledata;\r\n                        this.expTabledata=expTabledata;\r\n                        \r\n                    })\r\n                }\r\n    }\r\n    })},\r\n    hiligtDbCols({rowIndex, columnIndex}){\r\n        if(rowIndex===0 && columnIndex>=6){\r\n            return \"color: #fff;background-color:rgba(92,165,214,0.7) !important\"\r\n        }\r\n    },\r\n    filterExpDara(){\r\n        console.log(\"filterExpDara:\",this.filterValue);\r\n        console.log(\"expTabledata:\",this.expTabledata);\r\n        this.expTabledata= this.oriexpTabledata.filter(item=>{\r\n            return Number(item.expAvg)>Number(this.filterValue)\r\n        })\r\n    },\r\n    showOriExp(){\r\n        this.expTabledata= this.oriexpTabledata\r\n    }\r\n  },\r\n  mounted:function () {\r\n    // if(window.matchMedia(\"(max-width: 767px)\").matches){\r\n    //     this.windowSize=1;\r\n    //    console.log(\"这是一个移动设备。\");\r\n\r\n    // }else if(window.matchMedia(\"(max-width: 992px)\").matches){\r\n    //     this.windowSize=2;\r\n    //     console.log(\"这是平板电脑或台式电脑。\");\r\n\r\n    // }else{\r\n    //     this.windowSize=3;\r\n    //     console.log(\"大屏\");\r\n    // }\r\n\r\n    // let loadingService = Loading.service({\r\n    //     lock: true,\r\n    //     text: 'Loading',\r\n    //     spinner: 'el-icon-loading',\r\n    //     background: 'rgba(0, 0, 0, 0.7)',\r\n    //     fullscreen:true\r\n    // });\r\n    let hdbId = this.$route.query.hdbId;\r\n    // 查询go，var，trait需要ensembl gene id\r\n    let taxonId=this.$route.query.taxonId;\r\n    // let ensemblGeneId;\r\n    this.$axios\r\n    // 获取gene basic info的接口，目前是查询entrez id\r\n    // 返回两个list数据，0是gbiinfo，1是ortholist\r\n      .get('https://ngdc.cncb.ac.cn/hapi/api/gene-detail',{params: {'hdbId': hdbId, 'taxonid': taxonId}})\r\n      .then(response => {\r\n        this.loading=false;\r\n        let genedetail = response.data[0];\r\n        this.geneBasicInfo=genedetail[0];\r\n        // ensemblGeneId=this.geneBasicInfo.ensemblGeneId;\r\n        let orthoList = response.data[1];\r\n        // this.goBsicList=response.data[2];\r\n        // 绘制初始热图\r\n    //    geneSymbol=genedetail[0].geneSymbol;\r\n        this.tableData = genedetail;\r\n        // 存储同源数据\r\n        \r\n        \r\n        let ortho=[]\r\n        let hdblist=[]\r\n        for(let item of  orthoList){\r\n            console.log(\"item:\",item);\r\n            if(item.orthoPosition==1){\r\n                let commonName = item.commonName1?item.commonName1:\"-\";\r\n                let ensemblId = item.ensemblId?item.ensemblId:\"-\";\r\n                let entrezId=item.entrezId1?item.entrezId1:\"-\";\r\n                let geneSymbol=item.geneSymbol?item.geneSymbol:\"-\";\r\n                let hdbGeneId=item.hdbGeneId1?item.hdbGeneId1:\"-\";\r\n                let taxId=item.taxId1?item.taxId1:\"-\";\r\n                let shortName=item.shortName1;\r\n                let dbEvidence=item.dbEvidence;\r\n                let latinName=item.latinName1\r\n                let orthoitem={\r\n                    \"commonName\":commonName,\r\n                    \"ensemblId\":ensemblId,\r\n                    \"entrezId\":entrezId,\r\n                    \"geneSymbol\":geneSymbol,\r\n                    \"hdbGeneId\":hdbGeneId,\r\n                    \"taxId\":taxId,\r\n                    \"dbEvidence\":dbEvidence,\r\n                    \"shortName\":shortName,\r\n                    \"latinName\":latinName\r\n                }\r\n                // 去重，保存唯一的hdbid\r\n                if(hdblist.indexOf(hdbGeneId)==-1){\r\n                    ortho.push(orthoitem)\r\n                    hdblist.push(hdbGeneId)\r\n                }\r\n            }else{\r\n                let commonName = item.commonName2?item.commonName2:\"-\";\r\n                let ensemblId = item.ensemblId?item.ensemblId:\"-\";\r\n                let entrezId=item.entrezId2?item.entrezId2:\"-\";\r\n                let geneSymbol=item.geneSymbol2?item.geneSymbol2:\"-\";\r\n                let hdbGeneId=item.hdbGeneId2?item.hdbGeneId2:\"-\";\r\n                let taxId=item.taxId2?item.taxId2:\"-\"\r\n                let dbEvidence=item.dbEvidence;\r\n                let shortName=item.shortName2;\r\n                let latinName=item.latinName2;\r\n                let orthoitem={\r\n                    \"commonName\":commonName,\r\n                    \"ensemblId\":ensemblId,\r\n                    \"entrezId\":entrezId,\r\n                    \"geneSymbol\":geneSymbol,\r\n                    \"hdbGeneId\":hdbGeneId,\r\n                    \"taxId\":taxId,\r\n                    \"dbEvidence\":dbEvidence,\r\n                    \"shortName\":shortName,\r\n                    \"latinName\":latinName\r\n                }\r\n                if(hdblist.indexOf(hdbGeneId)==-1){\r\n                    ortho.push(orthoitem)\r\n                    hdblist.push(hdbGeneId)\r\n                }\r\n            }\r\n        }\r\n        this.tableOrthoList=ortho;\r\n        this.orthoInfo=ortho;\r\n        //   将多个结果合并成一个\r\n        if(genedetail.length>1){\r\n            let obj=genedetail[0]\r\n            for(let j=1;j<= genedetail.length;j++){\r\n                let obj2=genedetail[j];\r\n                for(let key in obj2){\r\n                    if(key !== \"speciesName\"){\r\n                        if(obj[key] !== obj2[key]){\r\n                            let newVal =obj[key]+ \",\"+obj2[key]\r\n                            obj[key]=newVal\r\n                        }\r\n                    }\r\n            }\r\n        }\r\n            this.geneBasicInfo=obj\r\n        }\r\n            console.log(\"this.geneBasicInfo:\",this.geneBasicInfo);\r\n\r\n    }).finally(()=>{\r\n        this.fullLoading=false;\r\n        let svg_height=480;\r\n        // let geneName=\"ENSGALG00000023443\"\r\n        let specName=this.geneBasicInfo.speciesName.shortName;\r\n        let latinName=this.geneBasicInfo.speciesName.latinName;\r\n        let commonName=this.geneBasicInfo.speciesName.commonName;\r\n        // let hdbid=this.geneBasicInfo.hdbGeneId;\r\n        let symbol;\r\n        if(this.geneBasicInfo.geneSymbol.length>0){\r\n            symbol=this.geneBasicInfo.geneSymbol;\r\n        }else{\r\n            symbol=this.geneBasicInfo.ensemblGeneId;\r\n        }\r\n        this.classification=this.geneBasicInfo.speciesName.classification;\r\n        this.$axios.get('https://ngdc.cncb.ac.cn/hapi/api/gene-detail-go-1',{params: {'hdbId': hdbId}}).then(response=>{\r\n            if(response.data.length>0){\r\n                this.goloading=false;\r\n                // this.goList=response.data\r\n                if(response.data.length>0){\r\n                let svgContainer = d3.select(\"#svg-container-go\").append(\"svg\").attr(\"width\", \"1450px\").attr(\"height\", svg_height+60).attr('id', 'svgcontainer-go');\r\n                this.drawGoRectChart(response.data,svgContainer,\"go\",specName,latinName,commonName,symbol,this.geneBasicInfo.taxonId,this.geneBasicInfo.hdbGeneId)\r\n                }\r\n            }\r\n        })\r\n        this.$axios.get('https://ngdc.cncb.ac.cn/hapi/api/gene-detail-var-1',{params: {'hdbId': hdbId}}).then(response=>{\r\n            if(response.data.length>0){\r\n            let svgContainer = d3.select(\"#svg-container-var\").append(\"svg\").attr(\"width\", \"98%\").attr(\"height\", svg_height).attr('id', 'svgcontainer-var');\r\n            this.drawGoRectChart(response.data,svgContainer,\"var\",specName,latinName,commonName,symbol,this.geneBasicInfo.taxonId,this.geneBasicInfo.hdbGeneId)\r\n            }\r\n        })\r\n        // let traitGeneName=\"Os05g0556300\"\r\n        this.$axios.get('https://ngdc.cncb.ac.cn/hapi/api/gene-detail-trait-1',{params: {'hdbId': hdbId}}).then(response=>{\r\n            let svgContainer = d3.select(\"#svg-container-trait\").append(\"svg\").attr(\"width\", \"98%\").attr(\"height\", svg_height).attr('id', 'svgcontainer-trait');\r\n            if(response.data.length>0){\r\n                this.drawGoRectChart(response.data,svgContainer,\"trait\",specName,latinName,commonName,symbol,this.geneBasicInfo.taxonId,this.geneBasicInfo.hdbGeneId)\r\n            }\r\n        })\r\n        this.$axios.get('https://ngdc.cncb.ac.cn/hapi/api/species-list',{params: {'taxonId': \"\"+taxonId}}).then(response=>{\r\n            this.species=response.data\r\n        })\r\n        this.$axios.get('https://ngdc.cncb.ac.cn/hapi/api/gene-detail-expression-1',{params: {'hdbId': hdbId,'classification':this.classification}}).then(response=>{\r\n            let svgContainer = d3.select(\"#svg-container-expression\").append(\"svg\").attr(\"width\", \"1450px\").attr(\"height\", svg_height).attr('id', 'svgcontainer-expression');\r\n            // this.species=response.data\r\n            if(response.data.length>0){\r\n                this.drawGoRectChart(response.data,svgContainer,\"expression\",specName,latinName,commonName,symbol,this.geneBasicInfo.taxonId,this.geneBasicInfo.hdbGeneId)\r\n            }\r\n        })\r\n    })\r\n\r\n\r\n    window.addEventListener(\"scroll\", this.watchScroll);\r\n    // this.getTableMaxHeight();\r\n    // let _this = this;\r\n    // window.onresize = function () {//用于使表格高度自适应的方法\r\n    //     _this.getTableMaxHeight();//获取容器当前高度，重设表格的最大高度\r\n    // }\r\n  },\r\n\r\n}\r\n</script>\r\n"]}]}