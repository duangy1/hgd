{"remainingRequest":"F:\\hdb\\fronteir\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\hdb\\fronteir\\src\\views\\Expression.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\hdb\\fronteir\\src\\views\\Expression.vue","mtime":1660101540422},{"path":"F:\\hdb\\fronteir\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\hdb\\fronteir\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1656480286244},{"path":"F:\\hdb\\fronteir\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\hdb\\fronteir\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\hdb\\fronteir\\node_modules\\vue-loader\\lib\\index.js","mtime":1656480287592}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBAIGlzIGFuIGFsaWFzIHRvIC9zcmMNCi8vIGltcG9ydCBOYXZpZ2F0b3IgZnJvbSAiQC9jb21wb25lbnRzL25hdmlnYXRvci52dWUiOw0KaW1wb3J0IGV4cE9udG9sb2d5IGZyb20gIkAvYXNzZXRzL3N0YXRpYy9leHByZXNzaW9uLmpzb24iOw0KaW1wb3J0IEJhbm5lciBmcm9tICJAL2NvbXBvbmVudHMvYmFubmVyLnZ1ZSI7DQppbXBvcnQgRm9vdGVyQmFyIGZyb20gIkAvY29tcG9uZW50cy9Gb290ZXJCYXIudnVlIjsNCmltcG9ydCBIZWFkZXJCYXIgZnJvbSAiQC9jb21wb25lbnRzL0hlYWRlckJhci52dWUiOw0KLy8gaW1wb3J0IHFzIGZyb20gInFzIjsNCi8vIC8vIGljb25zDQppbXBvcnQgc2FtZVRyYWl0SWNvbiBmcm9tICJAL2Fzc2V0cy9pbWcvaWNvbi9zdGFyLnN2ZyI7DQppbXBvcnQgZGV0YWlsSWNvbiBmcm9tICJAL2Fzc2V0cy9pbWcvaWNvbi9kZXRhaWxzLnN2ZyI7DQppbXBvcnQgb3J0aG9JY29uIGZyb20gIkAvYXNzZXRzL2ltZy9pY29uL2h1YWZ1LnN2ZyI7DQppbXBvcnQgc2luZ2xlVHJhaXRJY29uIGZyb20gIkAvYXNzZXRzL2ltZy9pY29uL29yYW5nZS5zdmciOw0KLy8gaW1wb3J0ICJAL2Fzc2V0cy9jc3MvdHJhaXRzLmNzcyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJUcmFpdHMiLA0KICBjb21wb25lbnRzOiB7DQogICAgLy8gTmF2aWdhdG9yLA0KICAgIEZvb3RlckJhciwNCiAgICBIZWFkZXJCYXIsDQogICAgQmFubmVyLA0KICAgIA0KICB9LA0KICB3YXRjaDogew0KICAgIGZpbHRlclRleHQodmFsKSB7DQogICAgICB0aGlzLiRyZWZzLnRyZWUuZmlsdGVyKHZhbCk7DQogICAgfSwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc2FtZVRyYWl0SWNvbiwNCiAgICAgIGRldGFpbEljb24sDQogICAgICBvcnRob0ljb24sDQogICAgICBzaW5nbGVUcmFpdEljb24sDQogICAgICB2aXNpYmxlOmZhbHNlLA0KICAgICAgdmlzaWJsZV8xOmZhbHNlLA0KICAgICAgZmlsdGVyVGV4dDogIiIsDQogICAgICB0cmVlZGF0YTogZXhwT250b2xvZ3kudHJlZSwNCiAgICAgIHNob3dTdWJUYWJsZUJveDpmYWxzZSwNCiAgICAgIGd3YXNMb2FkaW5nOnRydWUsDQogICAgICBvcnRob0xvYWRpbmc6dHJ1ZSwNCiAgICAgIGRyYXdlcjpmYWxzZSwNCiAgICAgIGRpcmVjdGlvbjoibHRyIiwNCiAgICAgICAvLyDkv53lrZjlkIzmupDniannp43vvIznlKjkuo7ooajmoLznlJ/miJDliJcNCiAgICAgIHNwZWNpZXNMaXN0X2FuaW1hbDpbXSwNCiAgICAgIHNwZWNpZXNMaXN0X3BsYW50OltdLA0KICAgICAgIC8vIOS/neWtmOWQjOa6kOeJqeenjW9iau+8jOeUqOS6juWKqOaAgemAieaLqeWIlw0KICAgICAgc3BlY2llc0xpc3RfYW5pbWFsXzE6W10sDQogICAgICBzcGVjaWVzTGlzdF9wbGFudF8xOltdLA0KICAgICAgdHJhaXREYXRhX2FuaW1hbDogW10sDQogICAgICB0cmFpdERhdGFfcGxhbnQ6W10sDQogICAgICBvcnRob1RhYmxlRGF0YTogW10sDQogICAgICB2YWx1ZTogIiIsDQogICAgICBleHBJdGVtOnsNCiAgICAgICAgZXhwTmFtZToiQ2FyZGlvdmFzY3VsYXIgc3lzdGVtIg0KICAgICAgfSwNCiAgICAgIGN1cnJlbnRQYWdlNDogMSwNCiAgICAgIHRvdGFsU2l6ZV9hbmltYWw6IDAsDQogICAgICB0b3RhbFNpemVfcGxhbnQ6IDAsDQogICAgICBmb3JtOiB7DQogICAgICAgIHF1ZXJ5U3BlY2llczoiIiwNCiAgICAgIH0sDQogICAgICBwYWdlU2l6ZTogMTAsDQogICAgICBnd2FzSW5mb0RhdGE6W10sDQogICAgICBsb2FkaW5nX2FuaW1hbDp0cnVlLA0KICAgICAgbG9hZGluZ19wbGFudDp0cnVlLA0KICAgICAgc2hvd09ydGhvU3ViVGFibGU6ZmFsc2UsDQogICAgICBjbGFzc2lmaWNhdGlvbjoiYW5pbWFsIiwNCiAgICAgIG5hdkJhckZpeGVkOiJmYWxzZSIsDQogICAgICBzaG93VHJhaXRTYW1lSWNvbjpmYWxzZSwNCiAgICAgICAvLyDku47mjqXlj6Pojrflj5bmiYDmnInmnIl0cmFpdOaVsOaNrueahOeJqeenje+8jOeUqOS6jueJqeenjemAieaLqe+8jOaPkOS6pHNlYXJjaA0KICAgICAgcXVlcnlTcGVjaWVzTGlzdF9hbmltYWw6W10sDQogICAgICBxdWVyeVNwZWNpZXNMaXN0X3BsYW50OltdLA0KICAgICAgcXVlcnlTcGVjaWVzTGlzdDpbXSwNCiAgICAgIHNlbGVjdEdlbmU6e30sDQogICAgICBleHBfcHJqTGlzdDpbXSwNCiAgICAgIHByb2plY3RfdmFsOiIiLA0KICAgICAgdmlzaWJsZV8yOmZhbHNlDQogICAgfTsNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICANCiAgICBjaGFuZ2VDbGFzcygpew0KICAgICAgICB0aGlzLnNob3dPcnRob1N1YlRhYmxlPWZhbHNlOw0KICAgICAgICB0aGlzLnNob3dTdWJUYWJsZUJveD1mYWxzZTsNCiAgICAgICAgdGhpcy4kcmVmc1sndGFibGUnXS5kb0xheW91dCgpOw0KICAgICAgICB0aGlzLmZvcm0ucXVlcnlTcGVjaWVzPScnOw0KICAgIH0sDQoNCiAgICBjb25maXJtYnV0dG9uKCl7DQogICAgdGhpcy52aXNpYmxlXzEgPSBmYWxzZTsNCiAgICB0aGlzLnZpc2libGUgPSBmYWxzZTsNCiAgICB0aGlzLiRyZWZzLnRhYmxlLmRvTGF5b3V0KCk7DQogICB9LA0KICAgY29uZmlybWJ1dHRvbjIoKXsNCiAgICB0aGlzLnZpc2libGVfMiA9IGZhbHNlOw0KICAgIHRoaXMudmlzaWJsZTIgPSBmYWxzZTsNCiAgIH0sDQogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpew0KICAgICAgLy8gdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgIGlmKHRoaXMuY2xhc3NpZmljYXRpb249PSJhbmltYWwiKXt0aGlzLmxvYWRpbmdfYW5pbWFsPXRydWU7fWVsc2V7dGhpcy5sb2FkaW5nX3BsYW50PXRydWV9DQogICAgICB0aGlzLnBhZ2VTaXplID0gdmFsOw0KICAgICAgdGhpcy5nZXRUcmFpdERhdGEodGhpcy5leHBJdGVtLmV4cE5hbWUsdGhpcy5jbGFzc2lmaWNhdGlvbix0aGlzLnBhZ2VTaXplLDEsdGhpcy5mb3JtLnF1ZXJ5U3BlY2llcykNCiAgICB9LA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7DQogICAgICBpZih0aGlzLmNsYXNzaWZpY2F0aW9uPT0iYW5pbWFsIil7DQogICAgICAgIHRoaXMubG9hZGluZ19hbmltYWw9dHJ1ZTsNCiAgICAgICAgLy8gdHJhaXRJZCxjbGFzc2lmaWNhdGlvbixwYWdlc2l6ZSxwYWdlbnVtLHNwZWNpZXNOYW1lDQogICAgICAgIHRoaXMuZ2V0VHJhaXREYXRhKHRoaXMuZXhwSXRlbS5leHBOYW1lLHRoaXMuY2xhc3NpZmljYXRpb24sdGhpcy5wYWdlU2l6ZSx2YWwsdGhpcy5mb3JtLnF1ZXJ5U3BlY2llcykNCiAgICAgIH1lbHNlew0KICAgICAgICB0aGlzLmxvYWRpbmdfcGxhbnQ9dHJ1ZTsNCiAgICAgICAgdGhpcy5nZXRUcmFpdERhdGEodGhpcy5leHBJdGVtLmV4cE5hbWUsdGhpcy5jbGFzc2lmaWNhdGlvbix0aGlzLnBhZ2VTaXplLHZhbCx0aGlzLmZvcm0ucXVlcnlTcGVjaWVzKQ0KICAgICAgfQ0KICAgICAgdGhpcy5jdXJyZW50UGFnZTQgPSB2YWw7DQoNCiAgICB9LA0KICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSh2YWwpIHsNCiAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24gPSB2YWw7DQogICAgfSwNCiAgICBmaWx0ZXJOb2RlKHZhbHVlLCBkYXRhKSB7DQogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gdHJ1ZTsNCiAgICAgIHJldHVybiBkYXRhLmxhYmVsLmluZGV4T2YodmFsdWUpICE9PSAtMTsNCiAgICB9LA0KICAgIGdldEluZm9CeVRyYWl0KHZhbHVlLCBkYXRhKSB7DQogICAgICB0aGlzLmV4cEl0ZW0uZXhwTmFtZT12YWx1ZS5sYWJlbDsNCiAgICAgIHRoaXMubG9hZGluZ19hbmltYWw9dHJ1ZTsNCiAgICAgIHRoaXMuZ2V0VHJhaXREYXRhKHZhbHVlLmxhYmVsLCJhbmltYWwiLHRoaXMucGFnZVNpemUsMSx0aGlzLmZvcm0ucXVlcnlTcGVjaWVzKTsNCiAgICAgIHRoaXMubG9hZGluZ19wbGFudD10cnVlOw0KICAgICAgdGhpcy5nZXRUcmFpdERhdGEodmFsdWUubGFiZWwsInBsYW50Iix0aGlzLnBhZ2VTaXplLDEsdGhpcy5mb3JtLnF1ZXJ5U3BlY2llcykNCg0KICAgICAgdGhpcy5jdXJyZW50UGFnZTQ9MTsNCiAgICAgIGRhdGEuY2hlY2tlZCA9IHRydWU7DQogICAgICB0aGlzLnNob3dTdWJUYWJsZUJveD1mYWxzZTsNCiAgICAgIHRoaXMuc2hvd09ydGhvU3ViVGFibGU9ZmFsc2U7DQogICAgfSwNCiAgICBzaG93U2VsZWN0ZWRHZW5lKHJvd0RhdGEsaW5kZXgpew0KICAgICAgY29uc29sZS5sb2coInJvd0RhdGEsaW5kZXg6Iixyb3dEYXRhLGluZGV4KTsNCiAgICAgIHRoaXMuc2VsZWN0R2VuZT1yb3dEYXRhOw0KICB9LA0KICAgIA0KICBzaG93T3J0aG9JbmZvVGFibGUocm93RGF0YSxpbmRleCl7DQogICAgIHRoaXMuc2hvd1NlbGVjdGVkR2VuZShyb3dEYXRhLGluZGV4KQ0KICAgIC8vIGNvbnNvbGUubG9nKCJyb3dEYXRhLGluZGV4OiIscm93RGF0YSxpbmRleCk7DQogICAgLy8gcm93RGF0YS5vcnRob0xpc3Rbcm93RGF0YS5zcGVjaWVzTGlzdERhdGEuaW5kZXhPZihpbmRleCldOw0KICAgIGxldCBvcnRob2xpc3Q9W107DQogICAgcm93RGF0YS5zcGVjaWVzTGlzdERhdGEuZm9yRWFjaCgoaWQsaWR4KT0+ew0KICAgICAgaWYoaWQ9PWluZGV4KXsNCiAgICAgICAgb3J0aG9saXN0LnB1c2gocm93RGF0YS5vcnRob2xpc3RbaWR4XSkNCiAgICB9fSkNCiAgICAvLyBjb25zb2xlLmxvZygiaW5kZXggbGlzdDoiLG9ydGhvbGlzdCk7DQoNCiAgICAvLyByb3dEYXRhLg0KICAgIHRoaXMuc2hvd09ydGhvU3ViVGFibGUgPSB0cnVlOw0KICAgIHRoaXMuc2hvd1N1YlRhYmxlQm94PWZhbHNlOw0KICAgIHRoaXMub3J0aG9Mb2FkaW5nPWZhbHNlOw0KICAgIHRoaXMub3J0aG9UYWJsZURhdGE9W10NCiAgICBvcnRob2xpc3QuZm9yRWFjaChpdGVtPT57DQogICAgICBsZXQgaGRiaWQ9aXRlbS5oZGJJZDsNCiAgICAgIHRoaXMuJGF4aW9zLmdldCgiaHR0cHM6Ly9uZ2RjLmNuY2IuYWMuY24vaGFwaS9hcGkvZ2VuZS1kZXRhaWwtb3J0aG8iLHtwYXJhbXM6eyJoZGJJZCI6aGRiaWR9fSkudGhlbigocmVzKT0+ew0KICAgICAgICBjb25zb2xlLmxvZygiZ2VuZSByZXM6IixyZXMpOw0KICAgICAgICBpdGVtLmVuc2VtYmxHZW5lSWQ9cmVzLmRhdGEuZW5zZW1ibEdlbmVJZC5sZW5ndGg+MD9yZXMuZGF0YS5lbnNlbWJsR2VuZUlkOiItIjsNCiAgICAgICAgaXRlbS5nZW5lU3ltYm9sPXJlcy5kYXRhLmdlbmVTeW1ib2wubGVuZ3RoPjA/cmVzLmRhdGEuZ2VuZVN5bWJvbDoiLSI7DQogICAgICAgIHRoaXMub3J0aG9UYWJsZURhdGEucHVzaChpdGVtKQ0KICAgICAgICB0aGlzLm9ydGhvTG9hZGluZz1mYWxzZTsNCiAgICAgIH0pDQogICAgfSkNCiAgICAvLyB0aGlzLm9ydGhvVGFibGVEYXRhPW9ydGhvbGlzdDsNCiAgICBjb25zb2xlLmxvZygib3J0aG9UYWJsZURhdGE6Iix0aGlzLm9ydGhvVGFibGVEYXRhKTsNCiAgICAvLyDlupTor6Xlj5HpgIHor7fmsYLljrtnZW5lYmFzaWNpbmZv5p+l5YW35L2T55qE5Z+65Zug55u45YWz5L+h5oGvDQoNCiAgfSwNCiANCiAgLy8g6KGo5qC86auY5bqm6Ieq6YCC5bqUDQogIGdldFRhYmxlTWF4SGVpZ2h0KCl7DQogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7DQogICAgICBsZXQgYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnRyYWl0LWluZm8iKS5hdHRyaWJ1dGVzDQogICAgICBsZXQgYm94X2NsaWVudEhlaWdodCA9IGJveFswXS5vd25lckVsZW1lbnQuY2xpZW50SGVpZ2h0Ow0KICAgICAgdGhpcy50YWJsZUhlaWdodCA9IGJveF9jbGllbnRIZWlnaHQgLSAxMDA7DQogICAgfSkNCiAgfSwNCiAgYnV0dG9uRnVuY3Rpb24oKXsNCiAgICB0aGlzLmRyYXdlciA9IHRydWU7DQogICB9LA0KICBkcmF3Qm94UGxvdChleHBUYWJsZWRhdGFUb3RhbCxpbmRleCxuYW1lTGlzdCl7DQogICAgdmFyIGNoYXJ0RG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4nKTsNCiAgICBjb25zb2xlLmxvZygiZXhwVGFibGVkYXRhVG90YWw6IixleHBUYWJsZWRhdGFUb3RhbFtpbmRleF0pOw0KICAgIHZhciBteUNoYXJ0ID0gdGhpcy4kZWNoYXJ0cy5pbml0KGNoYXJ0RG9tKTsNCiAgICB2YXIgb3B0aW9uOw0KDQogICAgb3B0aW9uID0gew0KICAgICAgdGl0bGU6IFsNCiAgICAgICAgew0KICAgICAgICAgIHRleHQ6ICdFeHByZXNzaW9uIHZhbHVlIGRldGFpbCBpbiBiaW9wcm9qZWN0JywNCiAgICAgICAgICBsZWZ0OiAnY2VudGVyJw0KICAgICAgICB9LA0KICAgICAgICANCiAgICAgIF0sDQogICAgICBkYXRhc2V0OiBbDQogICAgICAgIHsNCiAgICAgICAgICAvLyBwcmV0dGllci1pZ25vcmUNCiAgICAgICAgICBzb3VyY2U6IGV4cFRhYmxlZGF0YVRvdGFsW2luZGV4XVswXQ0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdHJhbnNmb3JtOiB7DQogICAgICAgICAgICB0eXBlOiAnYm94cGxvdCcsDQogICAgICAgICAgICBjb25maWc6IHsgaXRlbU5hbWVGb3JtYXR0ZXI6IGZ1bmN0aW9uKHBhcmFtcyl7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5hbWVMaXN0W2luZGV4XVtwYXJhbXMudmFsdWVdDQogICAgICAgICAgICB9IH0NCiAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBmcm9tRGF0YXNldEluZGV4OiAxLA0KICAgICAgICAgIGZyb21UcmFuc2Zvcm1SZXN1bHQ6IDENCiAgICAgICAgfQ0KICAgICAgXSwNCiAgICAgIHRvb2x0aXA6IHsNCiAgICAgICAgdHJpZ2dlcjogJ2l0ZW0nLA0KICAgICAgICBheGlzUG9pbnRlcjogew0KICAgICAgICAgIHR5cGU6ICdzaGFkb3cnDQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBncmlkOiB7DQogICAgICAgIGxlZnQ6ICcxMCUnLA0KICAgICAgICByaWdodDogJzEwJScsDQogICAgICAgIGJvdHRvbTogJzE1JScNCiAgICAgIH0sDQogICAgICB4QXhpczogew0KICAgICAgICB0eXBlOiAnY2F0ZWdvcnknLA0KICAgICAgICBib3VuZGFyeUdhcDogdHJ1ZSwNCiAgICAgICAgbmFtZTogJ1Rpc3N1ZScsDQogICAgICAgIG5hbWVHYXA6IDMwLA0KICAgICAgICBzcGxpdEFyZWE6IHsNCiAgICAgICAgICBzaG93OiBmYWxzZQ0KICAgICAgICB9LA0KICAgICAgICBzcGxpdExpbmU6IHsNCiAgICAgICAgICBzaG93OiBmYWxzZQ0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgeUF4aXM6IHsNCiAgICAgICAgdHlwZTogJ3ZhbHVlJywNCiAgICAgICAgc3BsaXRBcmVhOiB7DQogICAgICAgICAgc2hvdzogdHJ1ZQ0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgc2VyaWVzOiBbDQogICAgICAgIHsNCiAgICAgICAgICBuYW1lOiAnYm94cGxvdCcsDQogICAgICAgICAgdHlwZTogJ2JveHBsb3QnLA0KICAgICAgICAgIGRhdGFzZXRJbmRleDogMQ0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbmFtZTogJ291dGxpZXInLA0KICAgICAgICAgIHR5cGU6ICdzY2F0dGVyJywNCiAgICAgICAgICBkYXRhc2V0SW5kZXg6IDINCiAgICAgICAgfQ0KICAgICAgXQ0KICAgIH07DQoNCiAgICBvcHRpb24gJiYgbXlDaGFydC5zZXRPcHRpb24ob3B0aW9uKTsNCg0KICAgfSwNCiAgc2hvd0RldGFpbEV4cHJlc3Npb24odmFsdWUpew0KICAgIGlmKHZhbHVlLnNlbGVjdFByaiAhPT1udWxsICYmIHZhbHVlLnNlbGVjdFByaiE9PXVuZGVmaW5lZCl7DQogICAgdmFsdWUuc2hvd3BvcD1mYWxzZTsNCiAgICBjb25zb2xlLmxvZygic2VsZWN0UHJqOiIsdmFsdWUuc2VsZWN0UHJqKTsNCiAgICB0aGlzLnZpc2libGVfMiA9ICF0aGlzLnZpc2libGVfMg0KICAgIGNvbnNvbGUubG9nKCJleHAgdmFsdWU6Iix2YWx1ZSk7DQogICAgbGV0IFBBVEg9Imh0dHBzOi8vbmdkYy5jbmNiLmFjLmNuL2dlbi9hcGkvanNvbi9nZW5lL2V4cHJlc3Npb25zP3RheG9ub215SWQ9Iit2YWx1ZS50YXhvbklkKyImYWNjZXNzaW9uPSIrdmFsdWUuZ2VuZUlkKyImYmlvUHJvamVjdElkPSIrdmFsdWUuYmlvUHJvamVjdElkDQogICAgLy8gY29uc3QgaCA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQ7DQogICAgdGhpcy4kYXhpb3MuZ2V0KFBBVEgpLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgbGV0IGV4cGRhdGE9cmVzcG9uc2UuZGF0YS5yZXN1bHQuZXhwcmVzc2lvblByb2ZpbGVzDQogICAgICAgIGNvbnNvbGUubG9nKCJleHByZXNzaW9uIHJlc3BvbnNlOiIscmVzcG9uc2UuZGF0YS5yZXN1bHQuZXhwcmVzc2lvblByb2ZpbGVzKTsNCiAgICAgICAgdGhpcy5leHBfcHJqTGlzdD12YWx1ZS5iaW9Qcm9qZWN0SWQuc3BsaXQoJywnKTsNCiAgICAgICAgdGhpcy4kYWxlcnQoYA0KICAgICAgICAgIDxkaXYgaWQ9Im1haW4iIHN0eWxlPSJ3aWR0aDoxMzAwcHg7aGVpZ2h0OjgwMHB4Ij48L2Rpdj4NCiAgICAgICAgYCwgew0KICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZQ0KICAgICAgICB9KQ0KICAgICAgICBsZXQgZXhwVGFibGVkYXRhVG90YWw9W107DQogICAgICAgIGxldCBuYW1lTGlzdD1bXTsNCiAgICAgICAgbGV0IHByakxpc3RhbGw9W107DQogICAgICAgIGZvcihsZXQga2V5YWEgaW4gZXhwZGF0YSApew0KICAgICAgICAgIGlmKHByakxpc3RhbGwuaW5kZXhPZihrZXlhYSk9PS0xKXsNCiAgICAgICAgICAgIHByakxpc3RhbGwucHVzaChrZXlhYSkNCiAgICAgICAgICB9DQogICAgICAgICAgICBsZXQgZXhwVGFibGVkYXRhPVtdOw0KICAgICAgICAgICAgbGV0IHByakxpc3Q9ZXhwZGF0YVtrZXlhYV0NCiAgICAgICAgICAgIGxldCBleHBOdW09MDsNCiAgICAgICAgICAgIC8vIGxldCBzYW1wbGVOdW09MDsNCiAgICAgICAgICAgIGxldCB0aXNzdWU9e307DQogICAgICAgICAgICBsZXQgc3VibmFtZWxpc3Q9W107DQogICAgICAgICAgICBmb3IobGV0IGl0ZW0gb2YgcHJqTGlzdCl7DQogICAgICAgICAgICAgICAgLy8gc2FtcGxlTnVtICs9IDE7DQogICAgICAgICAgICAgICAgZXhwTnVtICs9IGl0ZW0udHBtOw0KICAgICAgICAgICAgICAgIGxldCBpdGVtVGlzc3VlPWl0ZW0udGlzc3VlDQogICAgICAgICAgICAgICAgaWYoT2JqZWN0LmtleXModGlzc3VlKS5pbmRleE9mKGl0ZW1UaXNzdWUpID09IC0xICl7DQogICAgICAgICAgICAgICAgICAgIHRpc3N1ZVtpdGVtVGlzc3VlXT1bZXhwTnVtXQ0KICAgICAgICAgICAgICAgICAgICBzdWJuYW1lbGlzdC5wdXNoKGl0ZW1UaXNzdWUpOw0KICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICB0aXNzdWVbaXRlbVRpc3N1ZV0ucHVzaChleHBOdW0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBmb3IobGV0IHRpc3N1ZU5hbWUgaW4gdGlzc3VlKXsNCiAgICAgICAgICAgICAgICBsZXQgdmFsdWVMaXN0PXRpc3N1ZVt0aXNzdWVOYW1lXTsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidmFsdWVMaXN0OiIsdmFsdWVMaXN0LHRpc3N1ZU5hbWUpOw0KICAgICAgICAgICAgICAgIGV4cFRhYmxlZGF0YS5wdXNoKHZhbHVlTGlzdCk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9DQogICAgICAgICAgICBleHBUYWJsZWRhdGFUb3RhbC5wdXNoKFtleHBUYWJsZWRhdGFdKQ0KICAgICAgICAgICAgbmFtZUxpc3QucHVzaChzdWJuYW1lbGlzdCkNCiAgICAgICAgfQ0KICAgICAgICBjb25zb2xlLmxvZygibmFtZUxpc3Q6IixuYW1lTGlzdCk7DQogICAgICAgIGxldCBpbmRleD1wcmpMaXN0YWxsLmluZGV4T2YodmFsdWUuc2VsZWN0UHJqKQ0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICB0aGlzLmRyYXdCb3hQbG90KGV4cFRhYmxlZGF0YVRvdGFsLGluZGV4LG5hbWVMaXN0KTsNCiAgICAgICAgfSwgMTAwKTsNCiAgICB9KQ0KICAgIH1lbHNlew0KICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ1BsZXNlIHNlbGVjdCBhIGJpb3Byb2plY3QnKTsNCiAgICB9DQogIH0sDQogIHNob3dHd2FzSW5mb1RhYmxlKHJvd1ZhbHVlLGluZGV4KXsNCiAgICB0aGlzLnNob3dTZWxlY3RlZEdlbmUocm93VmFsdWUsaW5kZXgpDQoNCiAgICBsZXQgb3J0aG9saXN0PVtdOw0KICAgIGxldCBoZGJsaXN0PVtyb3dWYWx1ZS5oZGJJZF0NCiAgICByb3dWYWx1ZS5zcGVjaWVzTGlzdERhdGEuZm9yRWFjaCgoaWQsaWR4KT0+ew0KICAgICAgaWYoaWQ9PWluZGV4KXsNCiAgICAgICAgbGV0IGl0ZW09cm93VmFsdWUub3J0aG9saXN0W2lkeF0NCiAgICAgICAgY29uc29sZS5sb2coIml0ZW06IixpdGVtKTsNCiAgICAgICAgb3J0aG9saXN0LnB1c2goaXRlbSkNCiAgICAgICAgaGRibGlzdC5wdXNoKGl0ZW0uaGRiSWQpDQogICAgfX0pDQoNCiAgICAgb3J0aG9saXN0LmZvckVhY2goaXRlbT0+ew0KICAgICAgbGV0IGhkYmlkPWl0ZW0uaGRiSWQ7DQogICAgICB0aGlzLiRheGlvcy5nZXQoImh0dHBzOi8vbmdkYy5jbmNiLmFjLmNuL2hhcGkvYXBpL2dlbmUtZGV0YWlsLW9ydGhvIix7cGFyYW1zOnsiaGRiSWQiOmhkYmlkfX0pLnRoZW4oKHJlcyk9PnsNCiAgICAgICAgY29uc29sZS5sb2coImdlbmUgcmVzOiIscmVzKTsNCiAgICAgICAgaXRlbS5lbnNlbWJsR2VuZUlkPXJlcy5kYXRhLmVuc2VtYmxHZW5lSWQubGVuZ3RoPjA/cmVzLmRhdGEuZW5zZW1ibEdlbmVJZDoiLSI7DQogICAgICAgIGl0ZW0uZ2VuZVN5bWJvbD1yZXMuZGF0YS5nZW5lU3ltYm9sLmxlbmd0aD4wP3Jlcy5kYXRhLmdlbmVTeW1ib2w6Ii0iOw0KICAgICAgICB0aGlzLm9ydGhvVGFibGVEYXRhLnB1c2goaXRlbSkNCiAgICAgICAgdGhpcy5vcnRob0xvYWRpbmc9ZmFsc2U7DQogICAgICB9KQ0KICAgIH0pDQogICAgLy8gdGhpcy5vcnRob1RhYmxlRGF0YT1vcnRob2xpc3Q7DQogICAgLy8gdGhpcy5vcnRob0xvYWRpbmc9ZmFsc2U7DQogICAgdGhpcy5zaG93U3ViVGFibGVCb3g9dHJ1ZTsNCiAgICB0aGlzLmd3YXNJbmZvRGF0YT1bXTsNCiAgICBoZGJsaXN0LmZvckVhY2goaGRiaWQ9PnsNCiAgICAgIHRoaXMuJGF4aW9zLmdldCgiaHR0cHM6Ly9uZ2RjLmNuY2IuYWMuY24vaGFwaS9hcGkvZXhwcmVzc2lvbi1nZW5lIix7cGFyYW1zOnsnaGRiSWQnOiBoZGJpZH19KQ0KICAgICAgLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgY29uc29sZS5sb2coImd3YXMgcmVzcG9uc2U6IixyZXNwb25zZSk7DQogICAgICAgIGZvcihsZXQgaXRlbSBvZiByZXNwb25zZS5kYXRhKXsNCiAgICAgICAgICBpdGVtLmJpb1Byb2plY3RJZExpc3Q9aXRlbS5iaW9Qcm9qZWN0SWQuc3BsaXQoIiwiKQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuZ3dhc0luZm9EYXRhPXRoaXMuZ3dhc0luZm9EYXRhLmNvbmNhdChyZXNwb25zZS5kYXRhKTsNCiAgICAgICAgdGhpcy5nd2FzTG9hZGluZz1mYWxzZTsNCiAgICAgIH0pDQogICAgfSkNCiAgICB0aGlzLnNob3dPcnRob1N1YlRhYmxlID0gdHJ1ZTsNCg0KICAgfSwNCiAgICBoaWxpZ3REYkNvbHMoe3Jvd0luZGV4fSl7DQogICAgICBpZihyb3dJbmRleD09PTEpew0KICAgICAgICAgIHJldHVybiAid3JpdGluZy1tb2RlOiB2ZXJ0aWNhbC1scjsgIWltcG9ydGFudDt0ZXh0LWFsaWduOnJpZ2h0Ig0KICAgICAgfQ0KICAgICAgDQogICAgfSwNCiANCiAgIA0KICAgIHNlYXJjaEZpbHRlcigpew0KICAgICAgaWYodGhpcy5jbGFzc2lmaWNhdGlvbj09ImFuaW1hbCIpew0KICAgICAgICB0aGlzLmxvYWRpbmdfYW5pbWFsPXRydWU7DQogICAgICB9ZWxzZXsNCiAgICAgICAgdGhpcy5sb2FkaW5nX3BsYW50PXRydWU7DQogICAgICB9DQogICAgICB0aGlzLmdldFRyYWl0RGF0YSh0aGlzLmV4cEl0ZW0uZXhwTmFtZSx0aGlzLmNsYXNzaWZpY2F0aW9uLHRoaXMucGFnZVNpemUsMSx0aGlzLmZvcm0ucXVlcnlTcGVjaWVzKQ0KDQogICAgfSwgDQogICAgY2xlYXJGaWx0ZXIoKXsNCiAgICAgIGlmKHRoaXMuY2xhc3NpZmljYXRpb249PSJhbmltYWwiKXsNCiAgICAgICAgdGhpcy5sb2FkaW5nX2FuaW1hbD10cnVlOw0KICAgICAgfWVsc2V7DQogICAgICAgIHRoaXMubG9hZGluZ19wbGFudD10cnVlOw0KICAgICAgfQ0KICAgICAgdGhpcy5nZXRUcmFpdERhdGEodGhpcy5leHBJdGVtLmV4cE5hbWUsImFuaW1hbCIpDQogICAgICB0aGlzLmdldFRyYWl0RGF0YSh0aGlzLmV4cEl0ZW0uZXhwTmFtZSwicGxhbnQiKQ0KICAgICAgdGhpcy5mb3JtLnF1ZXJ5U3BlY2llcz0iIg0KICAgIH0sDQogICAgYXN5bmMgc2hvd1RhYmxlSWNvbihkYXRhLGNsYXNzc3Mpew0KICAgICAgDQogICAgICBpZihjbGFzc3NzID09ICJwbGFudCIpew0KICAgICAgICB0aGlzLnNwZWNpZXNMaXN0X3BsYW50PVtdOw0KICAgICAgICB0aGlzLnNwZWNpZXNMaXN0X3BsYW50XzE9W107DQogICAgICAgIGlmKGRhdGEubGVuZ3RoPjApew0KICAgICAgICAgIGZvcihsZXQgdmFyRGF0YSBvZiBkYXRhKXsNCiAgICAgICAgICAgIC8vIOWinuWKoOS4gOS4quWxnuaAp+S/neWtmOeJqeenjeeahGluZGV477yM55So5p2l5pi+56S66KGo5qC86YeM55qEaWNvbg0KICAgICAgICAgICAgdmFyRGF0YS5zcGVjaWVzTGlzdERhdGE9W107DQogICAgICAgICAgICAvLyDlop7liqDkuIDkuKrlsZ7mgKfvvIzkv53lrZjmmL7npLrmnIl0cmFpdOaVsOaNrueahOaDheWGtQ0KICAgICAgICAgICAgdmFyRGF0YS50cmFpdExpc3REYXRhMT1bXTsNCiAgICAgICAgICAgIHZhckRhdGEudHJhaXRMaXN0RGF0YTI9W107DQogICAgICAgICAgICBpZih2YXJEYXRhLm9ydGhvbGlzdCl7DQogICAgICAgICAgICAgIGZvcihsZXQgaXRlbSBvZiB2YXJEYXRhLm9ydGhvbGlzdCl7DQogICAgICAgICAgICAgICAgbGV0IHNwZWNpZXNOYW1lPWl0ZW0uc3BlY2llcy5jb21tb25OYW1lDQogICAgICAgICAgICAgICAgaWYodGhpcy5zcGVjaWVzTGlzdF9wbGFudC5pbmRleE9mKHNwZWNpZXNOYW1lKT09LTEpew0KICAgICAgICAgICAgICAgICAgdGhpcy5zcGVjaWVzTGlzdF9wbGFudC5wdXNoKHNwZWNpZXNOYW1lKTsNCiAgICAgICAgICAgICAgICAgIGl0ZW0uc3BlY2llcy5jaGVja2VkPXRydWU7DQogICAgICAgICAgICAgICAgICB0aGlzLnNwZWNpZXNMaXN0X3BsYW50XzEucHVzaChpdGVtLnNwZWNpZXMpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB2YXJEYXRhLnNwZWNpZXNMaXN0RGF0YS5wdXNoKHRoaXMuc3BlY2llc0xpc3RfcGxhbnQuaW5kZXhPZihzcGVjaWVzTmFtZSkpOw0KICAgICAgICAgICAgICAgIGlmKGl0ZW0uYW5ub3RhdGlvbiAhPT0gbnVsbCAmIGl0ZW0uZW9OYW1lIT09bnVsbCl7DQogICAgICAgICAgICAgICAgICB2YXJEYXRhLnRyYWl0TGlzdERhdGEyLnB1c2godGhpcy5zcGVjaWVzTGlzdF9wbGFudC5pbmRleE9mKHNwZWNpZXNOYW1lKSkNCiAgICAgICAgICAgICAgICAgIGxldCB2YXJsaXN0PWl0ZW0uZW9OYW1lLnNwbGl0KCcsJykNCiAgICAgICAgICAgICAgICAgIGlmKHZhcmxpc3QuaW5kZXhPZiggdmFyRGF0YS5hbm5vdGF0aW9uKT4tMSl7DQogICAgICAgICAgICAgICAgICAgICAgdmFyRGF0YS50cmFpdExpc3REYXRhMS5wdXNoKHRoaXMuc3BlY2llc0xpc3RfcGxhbnQuaW5kZXhPZihzcGVjaWVzTmFtZSkpDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMuJHJlZnNbJ3RhYmxlJ10uZG9MYXlvdXQoKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICB9ZWxzZXsNCiAgICAgIHRoaXMuc3BlY2llc0xpc3RfYW5pbWFsPVtdOw0KICAgICAgdGhpcy5zcGVjaWVzTGlzdF9hbmltYWxfMT1bXTsNCiAgICAgICAgaWYoZGF0YS5sZW5ndGg+MCl7DQogICAgICAgICAgZm9yKGxldCB2YXJEYXRhIG9mIGRhdGEpew0KICAgICAgICAgICAgLy8g5aKe5Yqg5LiA5Liq5bGe5oCn5L+d5a2Y54mp56eN55qEaW5kZXjvvIznlKjmnaXmmL7npLrooajmoLzph4znmoRpY29uDQogICAgICAgICAgICB2YXJEYXRhLnNwZWNpZXNMaXN0RGF0YT1bXTsNCiAgICAgICAgICAgIHZhckRhdGEudHJhaXRMaXN0RGF0YTE9W107DQogICAgICAgICAgICB2YXJEYXRhLnRyYWl0TGlzdERhdGEyPVtdOw0KICAgICAgICAgICAgaWYodmFyRGF0YS5vcnRob2xpc3Qpew0KICAgICAgICAgICAgICBmb3IobGV0IGl0ZW0gb2YgdmFyRGF0YS5vcnRob2xpc3Qpew0KICAgICAgICAgICAgICAgIGxldCBzcGVjaWVzTmFtZT1pdGVtLnNwZWNpZXMuY29tbW9uTmFtZTsNCiAgICAgICAgICAgICAgICBpZih0aGlzLnNwZWNpZXNMaXN0X2FuaW1hbC5pbmRleE9mKHNwZWNpZXNOYW1lKT09LTEpew0KICAgICAgICAgICAgICAgICAgdGhpcy5zcGVjaWVzTGlzdF9hbmltYWwucHVzaChzcGVjaWVzTmFtZSk7DQogICAgICAgICAgICAgICAgICBpdGVtLnNwZWNpZXMuY2hlY2tlZD10cnVlOw0KICAgICAgICAgICAgICAgICAgdGhpcy5zcGVjaWVzTGlzdF9hbmltYWxfMS5wdXNoKGl0ZW0uc3BlY2llcyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhckRhdGEuc3BlY2llc0xpc3REYXRhLnB1c2godGhpcy5zcGVjaWVzTGlzdF9hbmltYWwuaW5kZXhPZihzcGVjaWVzTmFtZSkpOw0KICAgICAgICAgICAgICAgIGlmKGl0ZW0uZW9OYW1lICE9PSBudWxsKXsNCiAgICAgICAgICAgICAgICAgIC8vIOaciXRyYWl05L2G5LiN55u45ZCMDQogICAgICAgICAgICAgICAgICAgdmFyRGF0YS50cmFpdExpc3REYXRhMi5wdXNoKHRoaXMuc3BlY2llc0xpc3RfYW5pbWFsLmluZGV4T2Yoc3BlY2llc05hbWUpKQ0KICAgICAgICAgICAgICAgICAgbGV0IHZhcmxpc3Q9aXRlbS5lb05hbWUuc3BsaXQoJywnKQ0KICAgICAgICAgICAgICAgICAgaWYodmFybGlzdC5pbmRleE9mKCB2YXJEYXRhLmFubm90YXRpb24pPi0xKXsNCiAgICAgICAgICAgICAgICAgICAgLy8g5pyJ55u45ZCMdHJhaXQNCiAgICAgICAgICAgICAgICAgICAgICB2YXJEYXRhLnRyYWl0TGlzdERhdGExLnB1c2godGhpcy5zcGVjaWVzTGlzdF9hbmltYWwuaW5kZXhPZihzcGVjaWVzTmFtZSkpDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGF0YSk7DQogICAgfSwNCiAgICAvLyDkuLvopoHojrflj5bmlbDmja7nmoTmlrnms5UNCiAgICAvLyDmoLnmja7liqjmpI3nianliIblvIDojrflj5YNCiAgICBhc3luYyBnZXRUcmFpdERhdGEoZXhwTmFtZSxjbGFzc2lmaWNhdGlvbixwYWdlc2l6ZSxwYWdlbnVtLHNwZWNpZXNOYW1lKXsNCiAgICAgIGNvbnNvbGUubG9nKCJwYXJhbXM6IixleHBOYW1lLGNsYXNzaWZpY2F0aW9uLHBhZ2VzaXplLHBhZ2VudW0sc3BlY2llc05hbWUpOw0KICAgICAgdGhpcy4kYXhpb3MuZ2V0KCJodHRwczovL25nZGMuY25jYi5hYy5jbi9oYXBpL2FwaS9leHByZXNzaW9uLWRhdGEiLHtwYXJhbXM6eydjbGFzc2lmaWNhdGlvbic6IGNsYXNzaWZpY2F0aW9uLCdleHBOYW1lJzpleHBOYW1lLCdsZW5ndGgnOnBhZ2VzaXplLCdwYWdlTm8nOnBhZ2VudW0sJ3RheG9uaWQnOnNwZWNpZXNOYW1lfX0pDQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coInJlc3BvbnNlOiIscmVzcG9uc2UpOw0KICAgICAgICBpZihjbGFzc2lmaWNhdGlvbj09ImFuaW1hbCIpew0KICAgICAgICAgIHRoaXMuZ2V0U3BlY2llcyhleHBOYW1lLCJhbmltYWwiKQ0KICAgICAgICAgIHRoaXMudG90YWxTaXplX2FuaW1hbCA9IHJlc3BvbnNlLmRhdGEucmVjb3Jkc1RvdGFsOw0KICAgICAgICAgIHRoaXMuc2hvd1RhYmxlSWNvbihyZXNwb25zZS5kYXRhLmRhdGEsY2xhc3NpZmljYXRpb24pLnRoZW4oKHJlcyk9PnsgdGhpcy50cmFpdERhdGFfYW5pbWFsPXJlczt0aGlzLmxvYWRpbmdfYW5pbWFsPWZhbHNlO30pOw0KICAgICAgICANCiAgICAgICAgfWVsc2V7DQogICAgICAgICAgdGhpcy5nZXRTcGVjaWVzKGV4cE5hbWUsInBsYW50IikNCiAgICAgICAgICB0aGlzLnRvdGFsU2l6ZV9wbGFudCA9IHJlc3BvbnNlLmRhdGEucmVjb3Jkc1RvdGFsOw0KICAgICAgICAgIHRoaXMuc2hvd1RhYmxlSWNvbihyZXNwb25zZS5kYXRhLmRhdGEsY2xhc3NpZmljYXRpb24pLnRoZW4oKHJlcyk9PnsgdGhpcy50cmFpdERhdGFfcGxhbnQ9cmVzOyB0aGlzLmxvYWRpbmdfcGxhbnQ9ZmFsc2U7fSk7DQogICAgICAgIH0NCg0KICAgICAgfSkNCiAgICAgIC5maW5hbGx5KCgpPT57IHJldHVybiBQcm9taXNlLnJlc29sdmUoKX0pDQogICANCiAgICB9LA0KICAgIC8vIOagueaNruW9k+WJjWNsYXNzaWZpY2F0aW9u5Yik5pat6I635Y+W5Yqo54mp5oiW5qSN54mp5YiX6KGoDQogICAgZ2V0U3BlY2llcyhleHBOYW1lLHNwZWNpZXNUeXBlKXsNCiAgICAgIHRoaXMuJGF4aW9zLmdldCgnaHR0cHM6Ly9uZ2RjLmNuY2IuYWMuY24vaGFwaS9hcGkvc3BlY2llcy1leHAnLHtwYXJhbXM6IHsiZXhwTmFtZSI6ZXhwTmFtZSxzcGVjaWVzVHlwZTogc3BlY2llc1R5cGV9fSkNCiAgICAgICAgLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgICAvLyAy5piv5qSN54mp77yMMeaYr+WKqOeJqQ0KICAgICAgICAgIGlmKHNwZWNpZXNUeXBlPT0ncGxhbnQnKXsNCiAgICAgICAgICAgIHRoaXMucXVlcnlTcGVjaWVzTGlzdF9wbGFudD1yZXNwb25zZS5kYXRhOw0KICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgdGhpcy5xdWVyeVNwZWNpZXNMaXN0X2FuaW1hbD1yZXNwb25zZS5kYXRhOw0KICAgICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCg0KICB9LA0KICANCg0KICBtb3VudGVkKCkgew0KICAgIHRoaXMubG9hZGluZ19hbmltYWwgPSB0cnVlOw0KICAgIHRoaXMubG9hZGluZ19wbGFudD10cnVlOw0KICAvLyBleHBOYW1lLGNsYXNzaWZpY2F0aW9uLHBhZ2VzaXplLHBhZ2VudW0sc3BlY2llc05hbWUNCiAgICB0aGlzLmdldFRyYWl0RGF0YSh0aGlzLmV4cEl0ZW0uZXhwTmFtZSwiYW5pbWFsIik7DQogICAgdGhpcy5nZXRUcmFpdERhdGEodGhpcy5leHBJdGVtLmV4cE5hbWUsInBsYW50Iik7DQoNCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigic2Nyb2xsIiwgdGhpcy53YXRjaFNjcm9sbCk7DQogICAvLyDojrflj5bliqjmpI3nianlkI3np7DliJfooajvvIznlKjkuo7kuIvmi4npgInmi6nmoYYNCiAgICB0aGlzLmdldFNwZWNpZXModGhpcy5leHBJdGVtLmV4cE5hbWUsImFuaW1hbCIpDQogICAgdGhpcy5nZXRTcGVjaWVzKHRoaXMuZXhwSXRlbS5leHBOYW1lLCJwbGFudCIpDQogICAgDQogICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCB0aGlzLndhdGNoU2Nyb2xsKTsNCiAgICAgIHRoaXMuZ2V0VGFibGVNYXhIZWlnaHQoKTsgDQogICAgICBsZXQgX3RoaXMgPSB0aGlzOw0KICAgICAgd2luZG93Lm9ucmVzaXplID0gZnVuY3Rpb24gKCkgey8v55So5LqO5L2/6KGo5qC86auY5bqm6Ieq6YCC5bqU55qE5pa55rOVICANCiAgICAgIF90aGlzLmdldFRhYmxlTWF4SGVpZ2h0KCk7Ly/ojrflj5blrrnlmajlvZPliY3pq5jluqbvvIzph43orr7ooajmoLznmoTmnIDlpKfpq5jluqYNCiAgICB9DQogICAgDQogIH0NCn0NCg0K"},{"version":3,"sources":["Expression.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6qBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Expression.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <HeaderBar />\r\n    <Banner />\r\n    <!-- <Navigator /> -->\r\n    \r\n    <!-- 左侧树结构 -->\r\n    <!-- 抽屉结构 -->\r\n    <el-drawer\r\n      :visible.sync=\"drawer\"\r\n      :direction=\"direction\"\r\n    >\r\n      <div class=\"tree-div\">\r\n      <el-card shadow=\"none\" class=\"tree-card\" >\r\n      <el-input placeholder=\"Enter keywords to filter\" v-model=\"filterText\" class=\"filterInput\"> \r\n      </el-input>\r\n\r\n      <el-tree\r\n        style=\"margin-top: 15px\"\r\n        class=\"filter-tree\"\r\n        :data=\"treedata\"\r\n        default-expand-all\r\n        :filter-node-method=\"filterNode\"\r\n        icon-class=\"el-icon-s-management\"\r\n        ref=\"tree\"\r\n        :expand-on-click-node=\"false\"\r\n        @node-click=\"getInfoByTrait\"\r\n      >\r\n      </el-tree>\r\n      </el-card>\r\n    </div>\r\n    </el-drawer>\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\" class=\"arrow-title\">\r\n      <el-breadcrumb-item :to=\"{ path: '/' }\">Browse</el-breadcrumb-item>\r\n      <el-breadcrumb-item>Expression</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <!-- 侧边栏按钮 -->\r\n  \r\n  <el-container style=\"border: 1px solid #eee;overflow: hidden;\" id=\"trait-container\">\r\n  <div style=\"margin-top:3%\">\r\n  <div class=\"button-wrapper\">\r\n   <el-button @click=\"buttonFunction()\" ref=\"button\" id=\"button\"></el-button>\r\n   <!-- <div class=\"button-text\">Trait Ontology</div> -->\r\n  </div>\r\n    <div class=\"trait-box trait-infoBox\">\r\n      <div style=\"padding-left:29px;margin-top: -15px;\">\r\n        <h2 class=\"trait-title\">Expression : {{ expItem.expName }} </h2>\r\n      </div>\r\n    </div>\r\n    </div>\r\n    <el-card shadow=\"none\" class=\"border-card\">\r\n    <el-tabs v-model=\"classification\" style=\"margin-top:10px;margin-bottom: 1%;\" @tab-click=\"changeClass\">\r\n    <!-- 动物tab -->\r\n    <el-tab-pane label=\"Animal\" name=\"animal\" >\r\n      <!-- <el-card shadow=\"none\" class=\"tableCard\" style=\"margin-top: 10px\"> -->\r\n      <div>\r\n        <div>\r\n            <div class=\"filt-div\">\r\n                <el-input v-model=\"form.gene\" placeholder=\"Query gene\" class=\"gene-input\" clearable></el-input>\r\n                <el-select v-model=\"form.querySpecies\" class=\"filt-spe-select\" placeholder=\"Query species\" clearable>\r\n                    <el-option\r\n                        v-for=\"(item,index) in querySpeciesList_animal\"\r\n                        :key=\"index.id\"\r\n                        :label=\"item.commonName\"\r\n                        :value=\"item.taxonId\"\r\n                        >\r\n                    </el-option>\r\n                </el-select>\r\n                <el-button icon=\"el-icon-search\" type=\"success\"  plain id=\"filter-search\" @click=\"searchFilter()\">Search</el-button>\r\n                <el-button icon=\"el-icon-delete\" type=\"primary\"  plain id=\"filter-search2\" @click=\"clearFilter()\">Clear</el-button>\r\n\r\n\r\n                <el-popover\r\n                  placement=\"bottom-end\"\r\n                  width=\"400\"\r\n                  trigger=\"manual\"\r\n                  class=\"popbox\"\r\n                  v-model=\"visible_1\">\r\n                    <div class=\"checkbox-box\">\r\n                      <el-checkbox v-for=\"item of speciesList_animal_1\" :key=\"item.commonName\" :label=\"item.commonName\" class=\"chooseColBox\" ref=\"one\" v-model=\"item.checked\"></el-checkbox>\r\n                    </div>\r\n                    <div class=\"botton-wrapper\">\r\n                      <el-button size=\"mini\" type=\"primary\"  @click=\"confirmbutton\" class=\"choose-col-button\">confirm</el-button>\r\n                      <el-button size=\"mini\" type=\"text\" plain @click=\"visible_1 = false\" class=\"choose-col-button\">cancel</el-button>\r\n                    </div>\r\n                  <el-button slot=\"reference\" icon=\"el-icon-s-grid\" type=\"primary\" plain id=\"filterCol\" @click=\"visible_1 = !visible_1\" :disabled=\"speciesList_animal_1.length==0\"></el-button>\r\n                </el-popover>\r\n\r\n\r\n\r\n            </div>\r\n          <!-- </el-card> -->\r\n          <div id=\"wrapper\"  >\r\n          <div class=\"trait-info\">\r\n            \r\n      <!-- 使用中的trait表格 -->\r\n      <!-- <el-container style=\"width:100%;border: 1px solid darkgray;\"> -->\r\n        \r\n          <el-table\r\n            :data=\"traitData_animal\"\r\n            class=\"trait-table\"\r\n            row-key=\"id\"\r\n            ref=\"table\"\r\n            :header-cell-style=\"hiligtDbCols\"\r\n            v-loading=\"loading_animal\"\r\n          >\r\n            <el-table-column align=\"center\" class=\"titleCell\" prop=\"annotation\" label=\"Expression\" fixed width=\"280px\" style=\"background-color:white\"></el-table-column>\r\n            <el-table-column align=\"center\" prop=\"geneId\" label=\"Gene Id\" width=\"220px\" fixed>\r\n              <template slot-scope=\"scope\">\r\n                <a :href=\"'./gene-detail?hdbId='+scope.row.hdbId+'&taxonId='+scope.row.taxonId\">\r\n                    {{ scope.row.geneId }}\r\n                </a>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column align=\"center\" prop=\"commonName\" label=\"Species Name\" width=\"150px\" fixed></el-table-column>\r\n            <el-table-column align=\"center\" prop=\"taxonId\" label=\"Taxon Id\" width=\"160px\" fixed>\r\n              <template slot-scope=\"scope\">\r\n                <a :href=\"'https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?mode=Info&id='+scope.row.taxonId+'&lvl=3&lin=f&keep=1&srchmode=1&unlock'\">\r\n                    {{ scope.row.taxonId }}\r\n                </a>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column align=\"center\" prop=\"speciesCommonName\" label=\"Homolog Species Name\">\r\n            <template v-for=\"(item,index) in speciesList_animal_1\">\r\n              <el-table-column align=\"center\" :label=\"item.commonName\" :prop=\"item.commonName\" v-if=\"item.checked\" :key=\"item.commonName\">\r\n                <template slot-scope=\"scope\" >\r\n                  <img\r\n                    :src=\"orthoIcon\"\r\n                    min-width=\"70\"\r\n                    height=\"70\"\r\n                    class=\"iconImg\"\r\n                    v-if='scope.row.speciesListData.indexOf(index)>-1'\r\n                    style=\"cursor:pointer !important\"\r\n                    @click=showOrthoInfoTable(scope.row,index)\r\n                  />\r\n                  <!--这个v-if，先判断在当前的cell内有数值，然后再判断值 -->\r\n                  <img\r\n                    :src=\"sameTraitIcon\"\r\n                    min-width=\"70\"\r\n                    height=\"70\"\r\n                    class=\"iconImg\"\r\n                    v-if='scope.row.traitListData1.indexOf(index)>-1'\r\n                    style=\"cursor:pointer !important\"\r\n                    @click=showGwasInfoTable(scope.row,index)\r\n                  />\r\n                  <img\r\n                    :src=\"singleTraitIcon\"\r\n                    min-width=\"70\"\r\n                    height=\"70\"\r\n                    class=\"iconImg\"\r\n                    v-if='scope.row.traitListData2.indexOf(index)>-1'\r\n                    style=\"cursor:pointer !important\"\r\n                    @click=showGwasInfoTable(scope.row,index)\r\n                  />\r\n                </template>\r\n              </el-table-column>\r\n            </template>\r\n            </el-table-column>\r\n          </el-table>\r\n      \r\n          <div style=\"position: absolute;float: left;padding-top: 0.7%;\">\r\n          <div style=\"display: flex;\">\r\n                    <img :src=\"orthoIcon\"\r\n                      style=\"margin-right: 6px;min-width=70px;height=70px;\"\r\n                      class=\"iconImg\" />\r\n                      <div class=\"note-info\">exists homolog gene</div>\r\n          </div>\r\n          <div style=\"display: flex;\">\r\n                    <img :src=\"singleTraitIcon\"   \r\n                      style=\"margin-right: 6px;min-width=70px;height=70px;\"\r\n                      class=\"iconImg\" /><div class=\"note-info\">exists homolog gene with expression annotation</div>  \r\n          </div>\r\n          <div style=\"display: flex;\">\r\n                    <img :src=\"sameTraitIcon\"   \r\n                      style=\"margin-right: 6px;min-width=70px;height=70px;\"\r\n                      class=\"iconImg\" /><div class=\"note-info\">exists homolog gene with same expression annotation</div>  \r\n          </div>\r\n          \r\n          </div>\r\n          <el-pagination\r\n          \r\n            class=\"trait-pag\"\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"currentPage4\"\r\n            :page-sizes=\"[10, 20, 50, 100]\"\r\n            :page-size=\"10\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"totalSize_animal\"\r\n          >\r\n          </el-pagination>\r\n      <!-- </el-container> -->\r\n      </div>\r\n</div>\r\n\r\n    <!-- 同源表格 -->\r\n    <!-- <el-card shadow=\"none\" class=\"sub-table-card\"> -->\r\n      \r\n      <div class=\"sub-trait-box \" v-if=\"showOrthoSubTable\">\r\n      <el-divider class=\"divider\"></el-divider>\r\n          <div class=\"title-box\">\r\n            <template>\r\n              <el-descriptions title=\"Selected Gene\" >\r\n                <el-descriptions-item label=\"Gene Id\"><a :href=\"'./gene-detail?hdbId='+selectGene.hdbId+'&taxonId='+selectGene.taxonId\">\r\n                    {{ selectGene.geneId }}\r\n                </a></el-descriptions-item>\r\n                <el-descriptions-item label=\"Species Name\">{{selectGene.commonName}}</el-descriptions-item>\r\n                <el-descriptions-item label=\"Classification\">{{selectGene.classification}}</el-descriptions-item>\r\n                <el-descriptions-item label=\"Expression\">\r\n                  <el-tag size=\"small\">{{selectGene.annotation}}</el-tag>\r\n                </el-descriptions-item>\r\n                <!-- <el-descriptions-item label=\"Address\"\r\n                  >No.1188, Wuzhong Avenue, Wuzhong District, Suzhou, Jiangsu\r\n                  Province</el-descriptions-item\r\n                > -->\r\n              </el-descriptions>\r\n            </template>\r\n            <el-divider></el-divider>\r\n            <h2 class=\"trait-sub-title\">Homolog Gene Detail Information</h2>\r\n          </div>\r\n      </div>\r\n      <!-- <div id=\"wrapper\"> -->\r\n          <div class=\"trait-info\">\r\n            <el-table\r\n              :data=\"orthoTableData\"\r\n              class=\"info-table\"\r\n              v-loading=\"orthoLoading\"\r\n              v-if=\"showOrthoSubTable\"\r\n              :border=\"false\"\r\n              fixed\r\n              :header-cell-style=\"{background:'#F5F7FA'}\"\r\n          >\r\n              <el-table-column\r\n                  prop=\"commonName\"\r\n                  label=\"Species\"\r\n              >\r\n              </el-table-column>\r\n              <el-table-column\r\n                  prop=\"tax\"\r\n                  label=\"Taxon Id\"\r\n              >\r\n              <template slot-scope=\"scope\">\r\n                <a :href=\"'https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?mode=Info&id='+scope.row.tax+'&lvl=3&lin=f&keep=1&srchmode=1&unlock'\">\r\n                    {{ scope.row.tax }}\r\n                </a>\r\n              </template>\r\n              </el-table-column>\r\n              <el-table-column\r\n                  prop=\"ensemblGeneId\"\r\n                  label=\"Ensembl Id\"\r\n              >\r\n              </el-table-column>\r\n               <el-table-column\r\n                prop=\"geneSymbol\"\r\n                label=\"Gene Symbol\"\r\n              >\r\n              </el-table-column>\r\n              <el-table-column\r\n                  prop=\"hdbId\"\r\n                  label=\"Protein Id\"\r\n                >\r\n                  <template slot-scope=\"scope\">\r\n                    <a :href=\"'https://www.uniprot.org/uniprot/'+scope.row.hdbId\" target='_blank' v-if=\"scope.row.hdbId.slice(0,2)!=='EN'\">\r\n                        {{ scope.row.hdbId }}\r\n                    </a>\r\n                    <a :href=\"'https://asia.ensembl.org/Multi/Search/Results?q='+scope.row.hdbId+';site=ensembl'\" target='_blank' v-if=\"scope.row.hdbId.slice(0,2)=='EN'\">\r\n                        {{ scope.row.hdbId }}\r\n                    </a>\r\n                  </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </div>\r\n\r\n      <!-- </div> -->\r\n    <!-- </el-card> -->\r\n\r\n      <!-- gwas 表格 -->\r\n    <!-- <el-card shadow=\"none\"  class=\"sub-table-card\"> -->\r\n       \r\n      <div class=\"sub-trait-box\" v-if=\"showSubTableBox\">\r\n        <div  class=\"title-box\" >\r\n          <h3 class=\"trait-sub-title\">Expression Detail Information</h3>\r\n        </div>\r\n        <div id=\"trait-info\">\r\n            <!-- <el-card shadow=\"none\" class=\"gwasDetailCard\"> -->\r\n              <el-table \r\n                :data=\"gwasInfoData\"\r\n                id=\"subTable\"\r\n                :row-style=\"{height: '0'}\"\r\n                max-height=\"800\"\r\n                v-loading=\"gwasLoading\"\r\n                :header-cell-style=\"{background:'#F5F7FA'}\"\r\n              >\r\n                <el-table-column prop=\"geneId\" label=\"Gene Id\">\r\n                  <template slot-scope=\"scope\">\r\n                      <a :href=\"'https://ngdc.cncb.ac.cn/gen/gene/'+scope.row.genOrgId+'/'+scope.row.geneId\" target='_blank'>\r\n                          {{ scope.row.geneId }}\r\n                      </a>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"annotation\" label=\"Expression\"></el-table-column>\r\n                <el-table-column prop=\"bioProjectIdList\" label=\"Bioproject Id\">\r\n                  <template slot-scope=\"scope\">\r\n                    <div v-for=\"(item,index) of scope.row.bioProjectIdList\" :key=\"index\" style=\"display: flex;float:left\">\r\n                      <a :href=\"'https://ngdc.cncb.ac.cn/gen/project/accession/'+item\" target='_blank'>\r\n                          {{ item }}\r\n                      </a>\r\n                      <div v-if=\"index<scope.row.bioProjectIdList.length-1\">,</div>\r\n                    </div>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"commonName\" label=\"Species\"></el-table-column>\r\n                <el-table-column prop=\"taxonId\" label=\"Taxon Id\">\r\n                  <template slot-scope=\"scope\">\r\n                    <a :href=\"'https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?mode=Info&id='+scope.row.taxonId+'&lvl=3&lin=f&keep=1&srchmode=1&unlock'\">\r\n                        {{ scope.row.taxonId }}\r\n                    </a>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"See detail\">\r\n                  <template slot-scope=\"scope\" >\r\n                    <el-popover\r\n                      placement=\"top\"\r\n                      width=\"300\"\r\n                      trigger=\"manual\"\r\n                      class=\"popbox\"\r\n                      v-model=scope.row.showpop\r\n                    >\r\n                    <div class=\"checkbox-box\">\r\n                      <el-radio \r\n                        v-for=\"item in scope.row.bioProjectIdList\"\r\n                        :key=\"item.id\"\r\n                        :label=\"item\"\r\n                        v-model=\"scope.row.selectPrj\">\r\n                      </el-radio >\r\n                    </div>\r\n                      <div class=\"botton-wrapper\">\r\n                        <el-button size=\"mini\" type=\"primary\"  @click=showDetailExpression(scope.row) class=\"choose-col-button\">confirm</el-button>\r\n                        <el-button size=\"mini\" type=\"text\" plain @click=\"scope.row.showpop = false\" class=\"choose-col-button\">cancel</el-button>\r\n                      </div>\r\n                    </el-popover>\r\n                    <img\r\n                      :src=\"detailIcon\"\r\n                      min-width=\"25\"\r\n                      height=\"25\"\r\n                      style=\"cursor:pointer !important\"\r\n                      @click=\"scope.row.showpop = true\"\r\n                    />\r\n                  </template>\r\n                  \r\n                </el-table-column>\r\n              </el-table>\r\n            <!-- </el-card> -->\r\n        </div>\r\n      </div>\r\n    <!-- </el-card> -->\r\n      </div>\r\n      </div>\r\n      <!-- </div> -->\r\n      <!-- </el-card> -->\r\n    </el-tab-pane>\r\n     <!-- 植物tab -->\r\n    <el-tab-pane label=\"Plant\" name=\"plant\">\r\n      <div class=\"filt-div\">\r\n            <el-input v-model=\"form.gene\" placeholder=\"Query gene\" class=\"gene-input\" clearable></el-input>\r\n            <el-select v-model=\"form.querySpecies\" class=\"filt-spe-select\" placeholder=\"Query species\" clearable>\r\n                <el-option\r\n                    v-for=\"(item,index) in querySpeciesList_plant\"\r\n                    :key=\"index.id\"\r\n                    :label=\"item.commonName\"\r\n                    :value=\"item.taxonId\"\r\n                    >\r\n                </el-option>\r\n            </el-select>\r\n            <el-button icon=\"el-icon-search\" type=\"success\" plain id=\"filter-search\" @click=\"searchFilter()\">Search</el-button>\r\n            <el-button icon=\"el-icon-delete\" type=\"primary\" plain id=\"filter-search2\" @click=\"clearFilter()\">Clear</el-button>\r\n\r\n            <el-popover\r\n              placement=\"bottom-end\"\r\n              width=\"400\"\r\n              trigger=\"manual\"\r\n              class=\"popbox\"\r\n              v-model=\"visible\">\r\n                <div class=\"checkbox-box\">\r\n                  <el-checkbox v-for=\"item of speciesList_plant_1\" :key=\"item.commonName\" :label=\"item.commonName\" class=\"chooseColBox\" ref=\"one\" v-model=\"item.checked\"></el-checkbox>\r\n                <!-- <el-checkbox  class=\"chooseColBox\" @change=\"chooseall\" ref=\"all\">Choose All</el-checkbox> -->\r\n                </div>\r\n                <div class=\"botton-wrapper\">\r\n                  <el-button size=\"mini\" type=\"primary\"  @click=\"confirmbutton\" class=\"choose-col-button\">confirm</el-button>\r\n                  <el-button size=\"mini\" type=\"text\" plain @click=\"visible = false\" class=\"choose-col-button\">cancel</el-button>\r\n                </div>\r\n                <el-button slot=\"reference\" icon=\"el-icon-s-grid\" type=\"primary\" plain id=\"filterCol\" @click=\"visible = !visible\" :disabled=\"speciesList_plant_1.length==0\"></el-button>\r\n              </el-popover>\r\n\r\n      </div>\r\n      <!-- <div class=\"wraper\"> -->\r\n        \r\n      <div class=\"trait-info\">\r\n   <!-- 使用中的表格 -->\r\n        <el-table\r\n            :data=\"traitData_plant\"\r\n            \r\n            class=\"trait-table\"\r\n            row-key=\"id\"\r\n            v-loading=\"loading_plant\"\r\n            ref=\"table\"\r\n            :header-cell-style=\"hiligtDbCols\"\r\n          >\r\n            <el-table-column align=\"center\" class=\"titleCell\" prop=\"annotation\" label=\"Expression\" fixed width=\"280px\" style=\"background-color:white\"></el-table-column>\r\n            <el-table-column align=\"center\" prop=\"geneId\" label=\"Gene Id\" width=\"220px\" fixed>\r\n              <template slot-scope=\"scope\">\r\n                <a :href=\"'./gene-detail?hdbId='+scope.row.hdbId+'&taxonId='+scope.row.taxonId\">\r\n                    {{ scope.row.geneId }}\r\n                </a>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column align=\"center\" prop=\"commonName\" label=\"Species Name\" width=\"150px\" fixed></el-table-column>\r\n            <el-table-column align=\"center\" prop=\"taxonId\" label=\"Taxon Id\" width=\"160px\" fixed>\r\n               <template slot-scope=\"scope\">\r\n                <a :href=\"'https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?mode=Info&id='+scope.row.taxonId+'&lvl=3&lin=f&keep=1&srchmode=1&unlock'\">\r\n                    {{ scope.row.taxonId }}\r\n                </a>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column align=\"center\" prop=\"speciesCommonName\" label=\"Homolog Species Name\">\r\n            <template v-for=\"(item,index) in speciesList_plant_1\">\r\n              <el-table-column align=\"center\" :label=\"item.commonName\" :prop=\"item.commonName\" v-if=\"item.checked\" :key=\"item.commonName\">\r\n            <!-- <el-table-column :label=\"item\" :show-overflow-tooltip=\"true\" :prop=\"item\" v-for=\"(item,index) in speciesList_plant\" :key=\"index\"\r\n              class=\"imglink\" height=\"100px\"> -->\r\n                  <template slot-scope=\"scope\" >\r\n                   <img\r\n                    :src=\"orthoIcon\"\r\n                    min-width=\"70\"\r\n                    height=\"70\"\r\n                    class=\"iconImg\"\r\n                    v-if='scope.row.speciesListData.indexOf(index)>-1'\r\n                    style=\"cursor:pointer !important\"\r\n                    @click=showOrthoInfoTable(scope.row,index)\r\n                  />\r\n                  <!--这个v-if，先判断在当前的cell内有数值，然后再判断值 -->\r\n                  <img\r\n                    :src=\"sameTraitIcon\"\r\n                    min-width=\"70\"\r\n                    height=\"70\"\r\n                    class=\"iconImg\"\r\n                    v-if='scope.row.traitListData1.indexOf(index)>-1'\r\n                    style=\"cursor:pointer !important\"\r\n                    @click=showGwasInfoTable(scope.row,index)\r\n                  />\r\n                  <img\r\n                    :src=\"singleTraitIcon\"\r\n                    min-width=\"70\"\r\n                    height=\"70\"\r\n                    class=\"iconImg\"\r\n                    v-if='scope.row.traitListData2.indexOf(index)>-1'\r\n                    style=\"cursor:pointer !important\"\r\n                    @click=showGwasInfoTable(scope.row,index)\r\n                  />\r\n                  </template>\r\n              </el-table-column>\r\n            </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        <div style=\"position: absolute;float: left;padding-top: 0.7%;\">\r\n       <div style=\"display: flex;\">\r\n                    <img :src=\"orthoIcon\"\r\n                      style=\"margin-right: 6px;min-width=70px;height=70px;\"\r\n                      class=\"iconImg\" />\r\n                      <div class=\"note-info\">exists homolog gene</div>\r\n          </div>\r\n          <div style=\"display: flex;\">\r\n                    <img :src=\"singleTraitIcon\"   \r\n                      style=\"margin-right: 6px;min-width=70px;height=70px;\"\r\n                      class=\"iconImg\" /><div class=\"note-info\">exists homolog gene with expression annotation</div>  \r\n          </div>\r\n          <div style=\"display: flex;\">\r\n                    <img :src=\"sameTraitIcon\"   \r\n                      style=\"margin-right: 6px;min-width=70px;height=70px;\"\r\n                      class=\"iconImg\" /><div class=\"note-info\">exists homolog gene with same expression annotation</div>  \r\n          </div>\r\n        </div>\r\n        <el-pagination\r\n          class=\"trait-pag\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"currentPage4\"\r\n          :page-sizes=\"[10, 20, 50, 100]\"\r\n          :page-size=\"10\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"totalSize_plant\"\r\n        >\r\n        </el-pagination>\r\n        <div class=\"sub-trait-box \" v-if=\"showOrthoSubTable\">\r\n      <el-divider style=\"padding-top:5px\"></el-divider>\r\n          <div class=\"title-box\">\r\n            <template>\r\n              <el-descriptions title=\"Selected Gene\" >\r\n                <el-descriptions-item label=\"Gene Id\"><a :href=\"'./gene-detail?hdbId='+selectGene.hdbId+'&taxonId='+selectGene.taxonId\">\r\n                    {{ selectGene.geneId }}\r\n                </a></el-descriptions-item>\r\n                <el-descriptions-item label=\"Species Name\">{{selectGene.speciesCommonName}}</el-descriptions-item>\r\n                <el-descriptions-item label=\"Classification\">{{selectGene.classification}}</el-descriptions-item>\r\n                <el-descriptions-item label=\"Expression\">\r\n                  <el-tag size=\"small\">{{selectGene.annotation}}</el-tag>\r\n                </el-descriptions-item>\r\n                <!-- <el-descriptions-item label=\"Address\"\r\n                  >No.1188, Wuzhong Avenue, Wuzhong District, Suzhou, Jiangsu\r\n                  Province</el-descriptions-item\r\n                > -->\r\n              </el-descriptions>\r\n            </template>\r\n            <el-divider></el-divider>\r\n            <h2 class=\"trait-sub-title\">Homolog Gene Detail Information</h2>\r\n          </div>\r\n      </div>\r\n    <!-- 同源表格 -->\r\n          <el-table\r\n            :data=\"orthoTableData\"\r\n            class=\"info-table\"\r\n            v-loading=\"orthoLoading\"\r\n            v-if=\"showOrthoSubTable\"\r\n            :border=\"false\"\r\n            :header-cell-style=\"{background:'#F5F7FA'}\"\r\n        >\r\n            <el-table-column\r\n                  prop=\"commonName\"\r\n                  label=\"Species\"\r\n            >\r\n              </el-table-column>\r\n              <el-table-column\r\n                  prop=\"tax\"\r\n                  label=\"Taxon Id\"\r\n            >\r\n             <template slot-scope=\"scope\">\r\n                <a :href=\"'https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?mode=Info&id='+scope.row.tax+'&lvl=3&lin=f&keep=1&srchmode=1&unlock'\">\r\n                    {{ scope.row.tax }}\r\n                </a>\r\n              </template>\r\n              </el-table-column>\r\n              <el-table-column\r\n                  prop=\"ensemblGeneId\"\r\n                  label=\"Ensembl Id\"\r\n              >\r\n              </el-table-column>\r\n               <el-table-column\r\n                prop=\"geneSymbol\"\r\n                label=\"Gene Symbol\"\r\n              >\r\n              </el-table-column>\r\n              <el-table-column\r\n                  prop=\"hdbId\"\r\n                  label=\"Protein Id\"\r\n              >\r\n                  <template slot-scope=\"scope\" v-if=\"scope.row.hdbId.slice(0,2)!=='EN'\">\r\n                \r\n                    <a :href=\"'https://www.uniprot.org/uniprot/'+scope.row.hdbId\" target='_blank'>\r\n                        {{ scope.row.hdbId }}\r\n                    </a>\r\n                  </template>\r\n              </el-table-column>\r\n          </el-table>\r\n    <!-- gwas detail info表格 -->\r\n      <div class=\"sub-trait-box\" v-if=\"showSubTableBox\">\r\n        <div  class=\"title-box\" style=\"padding-left:1.5%;margin-bottom:1.3%\">\r\n          <h3 class=\"trait-sub-title\">Expression Detail Information</h3>\r\n        </div>\r\n        <div id=\"trait-info\">\r\n            <!-- <el-card shadow=\"none\" class=\"gwasDetailCard\"> -->\r\n              <el-table \r\n                :data=\"gwasInfoData\"\r\n                style=\"width: 100%;margin-top:3%;\"\r\n                id=\"subTable\"\r\n                :row-style=\"{height: '0'}\"\r\n                max-height=\"800\"\r\n                v-loading=\"gwasLoading\"\r\n                :header-cell-style=\"{background:'#F5F7FA'}\"\r\n              >\r\n                <el-table-column prop=\"geneId\" label=\"Gene Id\">\r\n                  <template slot-scope=\"scope\">\r\n                      <a :href=\"'https://ngdc.cncb.ac.cn/gen/gene/'+scope.row.genOrgId+'/'+scope.row.geneId\" target='_blank'>\r\n                          {{ scope.row.geneId }}\r\n                      </a>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"annotation\" label=\"Expression\"></el-table-column>\r\n                <el-table-column prop=\"bioProjectIdList\" label=\"Bioproject Id\">\r\n                  <template slot-scope=\"scope\">\r\n                    <div v-for=\"(item,index) of scope.row.bioProjectIdList\" :key=\"index\" style=\"display: flex;float:left\">\r\n                      <a :href=\"'https://ngdc.cncb.ac.cn/gen/project/accession/'+item\" target='_blank'>\r\n                          {{ item }}\r\n                      </a>\r\n                      <div v-if=\"index<scope.row.bioProjectIdList.length-1\">,</div>\r\n                    </div>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"speciesCommonName\" label=\"Species\"></el-table-column>\r\n                <el-table-column prop=\"taxonId\" label=\"Taxon Id\">\r\n                   <template slot-scope=\"scope\">\r\n                    <a :href=\"'https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?mode=Info&id='+scope.row.taxonId+'&lvl=3&lin=f&keep=1&srchmode=1&unlock'\">\r\n                        {{ scope.row.taxonId }}\r\n                    </a>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"See detail\">\r\n                  <template slot-scope=\"scope\" >\r\n                    <el-popover\r\n                      placement=\"top\"\r\n                      width=\"300\"\r\n                      trigger=\"manual\"\r\n                      class=\"popbox\"\r\n                      v-model=scope.row.showpop\r\n                    >\r\n                    <div class=\"checkbox-box\">\r\n                      <el-radio \r\n                        v-for=\"item in scope.row.bioProjectIdList\"\r\n                        :key=\"item.id\"\r\n                        :label=\"item\"\r\n                        v-model=\"scope.row.selectPrj\">\r\n                      </el-radio >\r\n                    </div>\r\n                      <div class=\"botton-wrapper\">\r\n                        <el-button size=\"mini\" type=\"primary\"  @click=showDetailExpression(scope.row) class=\"choose-col-button\">confirm</el-button>\r\n                        <el-button size=\"mini\" type=\"text\" plain @click=\"scope.row.showpop = false\" class=\"choose-col-button\">cancel</el-button>\r\n                      </div>\r\n                    </el-popover>\r\n                    <img\r\n                      :src=\"detailIcon\"\r\n                      min-width=\"25\"\r\n                      height=\"25\"\r\n                      style=\"cursor:pointer !important\"\r\n                      @click=\"scope.row.showpop = true\"\r\n                    />\r\n                  </template>\r\n                  \r\n                </el-table-column>\r\n              </el-table>\r\n            <!-- </el-card> -->\r\n        </div>\r\n      </div>\r\n      </div>\r\n    <!-- </div> -->\r\n     \r\n     \r\n      <!-- </el-card> -->\r\n    </el-tab-pane>\r\n    \r\n    \r\n    </el-tabs>\r\n    </el-card>\r\n    </el-container>\r\n    <FooterBar />\r\n    <template>\r\n     <el-backtop\r\n      :bottom=\"100\"\r\n      style=\"z-index: 999;\"\r\n      class=\"backTop\"\r\n    >\r\n      <div\r\n        style=\"\r\n           {\r\n            height: 100%;\r\n            width: 100%;\r\n            box-shadow: 0 0 6px rgba(0, 0, 0, 0.12);\r\n            text-align: center;\r\n            line-height: 40px;\r\n            color: #1989fa;\r\n            border-radius: 50%;\r\n            background-color: white;\r\n          }\r\n        \"\r\n      >\r\n      <i class=\"el-icon-caret-top\"></i>\r\n      </div>\r\n    </el-backtop>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<style src=\"../assets/css/traits.css\" scoped></style>\r\n<style>\r\n.el-message-box{\r\n  width: auto !important;\r\n}\r\n</style>\r\n<script>\r\n// @ is an alias to /src\r\n// import Navigator from \"@/components/navigator.vue\";\r\nimport expOntology from \"@/assets/static/expression.json\";\r\nimport Banner from \"@/components/banner.vue\";\r\nimport FooterBar from \"@/components/FooterBar.vue\";\r\nimport HeaderBar from \"@/components/HeaderBar.vue\";\r\n// import qs from \"qs\";\r\n// // icons\r\nimport sameTraitIcon from \"@/assets/img/icon/star.svg\";\r\nimport detailIcon from \"@/assets/img/icon/details.svg\";\r\nimport orthoIcon from \"@/assets/img/icon/huafu.svg\";\r\nimport singleTraitIcon from \"@/assets/img/icon/orange.svg\";\r\n// import \"@/assets/css/traits.css\";\r\nexport default {\r\n  name: \"Traits\",\r\n  components: {\r\n    // Navigator,\r\n    FooterBar,\r\n    HeaderBar,\r\n    Banner,\r\n    \r\n  },\r\n  watch: {\r\n    filterText(val) {\r\n      this.$refs.tree.filter(val);\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      sameTraitIcon,\r\n      detailIcon,\r\n      orthoIcon,\r\n      singleTraitIcon,\r\n      visible:false,\r\n      visible_1:false,\r\n      filterText: \"\",\r\n      treedata: expOntology.tree,\r\n      showSubTableBox:false,\r\n      gwasLoading:true,\r\n      orthoLoading:true,\r\n      drawer:false,\r\n      direction:\"ltr\",\r\n       // 保存同源物种，用于表格生成列\r\n      speciesList_animal:[],\r\n      speciesList_plant:[],\r\n       // 保存同源物种obj，用于动态选择列\r\n      speciesList_animal_1:[],\r\n      speciesList_plant_1:[],\r\n      traitData_animal: [],\r\n      traitData_plant:[],\r\n      orthoTableData: [],\r\n      value: \"\",\r\n      expItem:{\r\n        expName:\"Cardiovascular system\"\r\n      },\r\n      currentPage4: 1,\r\n      totalSize_animal: 0,\r\n      totalSize_plant: 0,\r\n      form: {\r\n        querySpecies:\"\",\r\n      },\r\n      pageSize: 10,\r\n      gwasInfoData:[],\r\n      loading_animal:true,\r\n      loading_plant:true,\r\n      showOrthoSubTable:false,\r\n      classification:\"animal\",\r\n      navBarFixed:\"false\",\r\n      showTraitSameIcon:false,\r\n       // 从接口获取所有有trait数据的物种，用于物种选择，提交search\r\n      querySpeciesList_animal:[],\r\n      querySpeciesList_plant:[],\r\n      querySpeciesList:[],\r\n      selectGene:{},\r\n      exp_prjList:[],\r\n      project_val:\"\",\r\n      visible_2:false\r\n    };\r\n  },\r\n\r\n  methods: {\r\n   \r\n    changeClass(){\r\n        this.showOrthoSubTable=false;\r\n        this.showSubTableBox=false;\r\n        this.$refs['table'].doLayout();\r\n        this.form.querySpecies='';\r\n    },\r\n\r\n    confirmbutton(){\r\n    this.visible_1 = false;\r\n    this.visible = false;\r\n    this.$refs.table.doLayout();\r\n   },\r\n   confirmbutton2(){\r\n    this.visible_2 = false;\r\n    this.visible2 = false;\r\n   },\r\n    handleSizeChange(val){\r\n      // this.loading = true;\r\n      if(this.classification==\"animal\"){this.loading_animal=true;}else{this.loading_plant=true}\r\n      this.pageSize = val;\r\n      this.getTraitData(this.expItem.expName,this.classification,this.pageSize,1,this.form.querySpecies)\r\n    },\r\n    handleCurrentChange(val) {\r\n      if(this.classification==\"animal\"){\r\n        this.loading_animal=true;\r\n        // traitId,classification,pagesize,pagenum,speciesName\r\n        this.getTraitData(this.expItem.expName,this.classification,this.pageSize,val,this.form.querySpecies)\r\n      }else{\r\n        this.loading_plant=true;\r\n        this.getTraitData(this.expItem.expName,this.classification,this.pageSize,val,this.form.querySpecies)\r\n      }\r\n      this.currentPage4 = val;\r\n\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.multipleSelection = val;\r\n    },\r\n    filterNode(value, data) {\r\n      if (!value) return true;\r\n      return data.label.indexOf(value) !== -1;\r\n    },\r\n    getInfoByTrait(value, data) {\r\n      this.expItem.expName=value.label;\r\n      this.loading_animal=true;\r\n      this.getTraitData(value.label,\"animal\",this.pageSize,1,this.form.querySpecies);\r\n      this.loading_plant=true;\r\n      this.getTraitData(value.label,\"plant\",this.pageSize,1,this.form.querySpecies)\r\n\r\n      this.currentPage4=1;\r\n      data.checked = true;\r\n      this.showSubTableBox=false;\r\n      this.showOrthoSubTable=false;\r\n    },\r\n    showSelectedGene(rowData,index){\r\n      console.log(\"rowData,index:\",rowData,index);\r\n      this.selectGene=rowData;\r\n  },\r\n    \r\n  showOrthoInfoTable(rowData,index){\r\n     this.showSelectedGene(rowData,index)\r\n    // console.log(\"rowData,index:\",rowData,index);\r\n    // rowData.orthoList[rowData.speciesListData.indexOf(index)];\r\n    let ortholist=[];\r\n    rowData.speciesListData.forEach((id,idx)=>{\r\n      if(id==index){\r\n        ortholist.push(rowData.ortholist[idx])\r\n    }})\r\n    // console.log(\"index list:\",ortholist);\r\n\r\n    // rowData.\r\n    this.showOrthoSubTable = true;\r\n    this.showSubTableBox=false;\r\n    this.orthoLoading=false;\r\n    this.orthoTableData=[]\r\n    ortholist.forEach(item=>{\r\n      let hdbid=item.hdbId;\r\n      this.$axios.get(\"https://ngdc.cncb.ac.cn/hapi/api/gene-detail-ortho\",{params:{\"hdbId\":hdbid}}).then((res)=>{\r\n        console.log(\"gene res:\",res);\r\n        item.ensemblGeneId=res.data.ensemblGeneId.length>0?res.data.ensemblGeneId:\"-\";\r\n        item.geneSymbol=res.data.geneSymbol.length>0?res.data.geneSymbol:\"-\";\r\n        this.orthoTableData.push(item)\r\n        this.orthoLoading=false;\r\n      })\r\n    })\r\n    // this.orthoTableData=ortholist;\r\n    console.log(\"orthoTableData:\",this.orthoTableData);\r\n    // 应该发送请求去genebasicinfo查具体的基因相关信息\r\n\r\n  },\r\n \r\n  // 表格高度自适应\r\n  getTableMaxHeight(){\r\n      this.$nextTick(function () {\r\n      let box = document.querySelector(\".trait-info\").attributes\r\n      let box_clientHeight = box[0].ownerElement.clientHeight;\r\n      this.tableHeight = box_clientHeight - 100;\r\n    })\r\n  },\r\n  buttonFunction(){\r\n    this.drawer = true;\r\n   },\r\n  drawBoxPlot(expTabledataTotal,index,nameList){\r\n    var chartDom = document.getElementById('main');\r\n    console.log(\"expTabledataTotal:\",expTabledataTotal[index]);\r\n    var myChart = this.$echarts.init(chartDom);\r\n    var option;\r\n\r\n    option = {\r\n      title: [\r\n        {\r\n          text: 'Expression value detail in bioproject',\r\n          left: 'center'\r\n        },\r\n        \r\n      ],\r\n      dataset: [\r\n        {\r\n          // prettier-ignore\r\n          source: expTabledataTotal[index][0]\r\n        },\r\n        {\r\n          transform: {\r\n            type: 'boxplot',\r\n            config: { itemNameFormatter: function(params){\r\n                return nameList[index][params.value]\r\n            } }\r\n          }\r\n        },\r\n        {\r\n          fromDatasetIndex: 1,\r\n          fromTransformResult: 1\r\n        }\r\n      ],\r\n      tooltip: {\r\n        trigger: 'item',\r\n        axisPointer: {\r\n          type: 'shadow'\r\n        }\r\n      },\r\n      grid: {\r\n        left: '10%',\r\n        right: '10%',\r\n        bottom: '15%'\r\n      },\r\n      xAxis: {\r\n        type: 'category',\r\n        boundaryGap: true,\r\n        name: 'Tissue',\r\n        nameGap: 30,\r\n        splitArea: {\r\n          show: false\r\n        },\r\n        splitLine: {\r\n          show: false\r\n        }\r\n      },\r\n      yAxis: {\r\n        type: 'value',\r\n        splitArea: {\r\n          show: true\r\n        }\r\n      },\r\n      series: [\r\n        {\r\n          name: 'boxplot',\r\n          type: 'boxplot',\r\n          datasetIndex: 1\r\n        },\r\n        {\r\n          name: 'outlier',\r\n          type: 'scatter',\r\n          datasetIndex: 2\r\n        }\r\n      ]\r\n    };\r\n\r\n    option && myChart.setOption(option);\r\n\r\n   },\r\n  showDetailExpression(value){\r\n    if(value.selectPrj !==null && value.selectPrj!==undefined){\r\n    value.showpop=false;\r\n    console.log(\"selectPrj:\",value.selectPrj);\r\n    this.visible_2 = !this.visible_2\r\n    console.log(\"exp value:\",value);\r\n    let PATH=\"https://ngdc.cncb.ac.cn/gen/api/json/gene/expressions?taxonomyId=\"+value.taxonId+\"&accession=\"+value.geneId+\"&bioProjectId=\"+value.bioProjectId\r\n    // const h = this.$createElement;\r\n    this.$axios.get(PATH).then(response=>{\r\n        let expdata=response.data.result.expressionProfiles\r\n        console.log(\"expression response:\",response.data.result.expressionProfiles);\r\n        this.exp_prjList=value.bioProjectId.split(',');\r\n        this.$alert(`\r\n          <div id=\"main\" style=\"width:1300px;height:800px\"></div>\r\n        `, {\r\n          dangerouslyUseHTMLString: true\r\n        })\r\n        let expTabledataTotal=[];\r\n        let nameList=[];\r\n        let prjListall=[];\r\n        for(let keyaa in expdata ){\r\n          if(prjListall.indexOf(keyaa)==-1){\r\n            prjListall.push(keyaa)\r\n          }\r\n            let expTabledata=[];\r\n            let prjList=expdata[keyaa]\r\n            let expNum=0;\r\n            // let sampleNum=0;\r\n            let tissue={};\r\n            let subnamelist=[];\r\n            for(let item of prjList){\r\n                // sampleNum += 1;\r\n                expNum += item.tpm;\r\n                let itemTissue=item.tissue\r\n                if(Object.keys(tissue).indexOf(itemTissue) == -1 ){\r\n                    tissue[itemTissue]=[expNum]\r\n                    subnamelist.push(itemTissue);\r\n                }else{\r\n                    tissue[itemTissue].push(expNum)\r\n                }\r\n            }\r\n            \r\n            for(let tissueName in tissue){\r\n                let valueList=tissue[tissueName];\r\n                console.log(\"valueList:\",valueList,tissueName);\r\n                expTabledata.push(valueList);\r\n                \r\n            }\r\n            expTabledataTotal.push([expTabledata])\r\n            nameList.push(subnamelist)\r\n        }\r\n        console.log(\"nameList:\",nameList);\r\n        let index=prjListall.indexOf(value.selectPrj)\r\n        setTimeout(() => {\r\n          this.drawBoxPlot(expTabledataTotal,index,nameList);\r\n        }, 100);\r\n    })\r\n    }else{\r\n       this.$message.error('Plese select a bioproject');\r\n    }\r\n  },\r\n  showGwasInfoTable(rowValue,index){\r\n    this.showSelectedGene(rowValue,index)\r\n\r\n    let ortholist=[];\r\n    let hdblist=[rowValue.hdbId]\r\n    rowValue.speciesListData.forEach((id,idx)=>{\r\n      if(id==index){\r\n        let item=rowValue.ortholist[idx]\r\n        console.log(\"item:\",item);\r\n        ortholist.push(item)\r\n        hdblist.push(item.hdbId)\r\n    }})\r\n\r\n     ortholist.forEach(item=>{\r\n      let hdbid=item.hdbId;\r\n      this.$axios.get(\"https://ngdc.cncb.ac.cn/hapi/api/gene-detail-ortho\",{params:{\"hdbId\":hdbid}}).then((res)=>{\r\n        console.log(\"gene res:\",res);\r\n        item.ensemblGeneId=res.data.ensemblGeneId.length>0?res.data.ensemblGeneId:\"-\";\r\n        item.geneSymbol=res.data.geneSymbol.length>0?res.data.geneSymbol:\"-\";\r\n        this.orthoTableData.push(item)\r\n        this.orthoLoading=false;\r\n      })\r\n    })\r\n    // this.orthoTableData=ortholist;\r\n    // this.orthoLoading=false;\r\n    this.showSubTableBox=true;\r\n    this.gwasInfoData=[];\r\n    hdblist.forEach(hdbid=>{\r\n      this.$axios.get(\"https://ngdc.cncb.ac.cn/hapi/api/expression-gene\",{params:{'hdbId': hdbid}})\r\n      .then(response=>{\r\n        console.log(\"gwas response:\",response);\r\n        for(let item of response.data){\r\n          item.bioProjectIdList=item.bioProjectId.split(\",\")\r\n        }\r\n        this.gwasInfoData=this.gwasInfoData.concat(response.data);\r\n        this.gwasLoading=false;\r\n      })\r\n    })\r\n    this.showOrthoSubTable = true;\r\n\r\n   },\r\n    hiligtDbCols({rowIndex}){\r\n      if(rowIndex===1){\r\n          return \"writing-mode: vertical-lr; !important;text-align:right\"\r\n      }\r\n      \r\n    },\r\n \r\n   \r\n    searchFilter(){\r\n      if(this.classification==\"animal\"){\r\n        this.loading_animal=true;\r\n      }else{\r\n        this.loading_plant=true;\r\n      }\r\n      this.getTraitData(this.expItem.expName,this.classification,this.pageSize,1,this.form.querySpecies)\r\n\r\n    }, \r\n    clearFilter(){\r\n      if(this.classification==\"animal\"){\r\n        this.loading_animal=true;\r\n      }else{\r\n        this.loading_plant=true;\r\n      }\r\n      this.getTraitData(this.expItem.expName,\"animal\")\r\n      this.getTraitData(this.expItem.expName,\"plant\")\r\n      this.form.querySpecies=\"\"\r\n    },\r\n    async showTableIcon(data,classss){\r\n      \r\n      if(classss == \"plant\"){\r\n        this.speciesList_plant=[];\r\n        this.speciesList_plant_1=[];\r\n        if(data.length>0){\r\n          for(let varData of data){\r\n            // 增加一个属性保存物种的index，用来显示表格里的icon\r\n            varData.speciesListData=[];\r\n            // 增加一个属性，保存显示有trait数据的情况\r\n            varData.traitListData1=[];\r\n            varData.traitListData2=[];\r\n            if(varData.ortholist){\r\n              for(let item of varData.ortholist){\r\n                let speciesName=item.species.commonName\r\n                if(this.speciesList_plant.indexOf(speciesName)==-1){\r\n                  this.speciesList_plant.push(speciesName);\r\n                  item.species.checked=true;\r\n                  this.speciesList_plant_1.push(item.species);\r\n                }\r\n                varData.speciesListData.push(this.speciesList_plant.indexOf(speciesName));\r\n                if(item.annotation !== null & item.eoName!==null){\r\n                  varData.traitListData2.push(this.speciesList_plant.indexOf(speciesName))\r\n                  let varlist=item.eoName.split(',')\r\n                  if(varlist.indexOf( varData.annotation)>-1){\r\n                      varData.traitListData1.push(this.speciesList_plant.indexOf(speciesName))\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n          this.$refs['table'].doLayout();\r\n        }\r\n        \r\n    }else{\r\n      this.speciesList_animal=[];\r\n      this.speciesList_animal_1=[];\r\n        if(data.length>0){\r\n          for(let varData of data){\r\n            // 增加一个属性保存物种的index，用来显示表格里的icon\r\n            varData.speciesListData=[];\r\n            varData.traitListData1=[];\r\n            varData.traitListData2=[];\r\n            if(varData.ortholist){\r\n              for(let item of varData.ortholist){\r\n                let speciesName=item.species.commonName;\r\n                if(this.speciesList_animal.indexOf(speciesName)==-1){\r\n                  this.speciesList_animal.push(speciesName);\r\n                  item.species.checked=true;\r\n                  this.speciesList_animal_1.push(item.species);\r\n                }\r\n                varData.speciesListData.push(this.speciesList_animal.indexOf(speciesName));\r\n                if(item.eoName !== null){\r\n                  // 有trait但不相同\r\n                   varData.traitListData2.push(this.speciesList_animal.indexOf(speciesName))\r\n                  let varlist=item.eoName.split(',')\r\n                  if(varlist.indexOf( varData.annotation)>-1){\r\n                    // 有相同trait\r\n                      varData.traitListData1.push(this.speciesList_animal.indexOf(speciesName))\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n    }\r\n    return Promise.resolve(data);\r\n    },\r\n    // 主要获取数据的方法\r\n    // 根据动植物分开获取\r\n    async getTraitData(expName,classification,pagesize,pagenum,speciesName){\r\n      console.log(\"params:\",expName,classification,pagesize,pagenum,speciesName);\r\n      this.$axios.get(\"https://ngdc.cncb.ac.cn/hapi/api/expression-data\",{params:{'classification': classification,'expName':expName,'length':pagesize,'pageNo':pagenum,'taxonid':speciesName}})\r\n      .then((response) => {\r\n        console.log(\"response:\",response);\r\n        if(classification==\"animal\"){\r\n          this.getSpecies(expName,\"animal\")\r\n          this.totalSize_animal = response.data.recordsTotal;\r\n          this.showTableIcon(response.data.data,classification).then((res)=>{ this.traitData_animal=res;this.loading_animal=false;});\r\n        \r\n        }else{\r\n          this.getSpecies(expName,\"plant\")\r\n          this.totalSize_plant = response.data.recordsTotal;\r\n          this.showTableIcon(response.data.data,classification).then((res)=>{ this.traitData_plant=res; this.loading_plant=false;});\r\n        }\r\n\r\n      })\r\n      .finally(()=>{ return Promise.resolve()})\r\n   \r\n    },\r\n    // 根据当前classification判断获取动物或植物列表\r\n    getSpecies(expName,speciesType){\r\n      this.$axios.get('https://ngdc.cncb.ac.cn/hapi/api/species-exp',{params: {\"expName\":expName,speciesType: speciesType}})\r\n        .then(response=>{\r\n          // 2是植物，1是动物\r\n          if(speciesType=='plant'){\r\n            this.querySpeciesList_plant=response.data;\r\n          }else{\r\n            this.querySpeciesList_animal=response.data;\r\n          }\r\n      })\r\n    },\r\n\r\n  },\r\n  \r\n\r\n  mounted() {\r\n    this.loading_animal = true;\r\n    this.loading_plant=true;\r\n  // expName,classification,pagesize,pagenum,speciesName\r\n    this.getTraitData(this.expItem.expName,\"animal\");\r\n    this.getTraitData(this.expItem.expName,\"plant\");\r\n\r\n    window.addEventListener(\"scroll\", this.watchScroll);\r\n   // 获取动植物名称列表，用于下拉选择框\r\n    this.getSpecies(this.expItem.expName,\"animal\")\r\n    this.getSpecies(this.expItem.expName,\"plant\")\r\n    \r\n     window.addEventListener(\"scroll\", this.watchScroll);\r\n      this.getTableMaxHeight(); \r\n      let _this = this;\r\n      window.onresize = function () {//用于使表格高度自适应的方法  \r\n      _this.getTableMaxHeight();//获取容器当前高度，重设表格的最大高度\r\n    }\r\n    \r\n  }\r\n}\r\n\r\n</script>\r\n"]}]}