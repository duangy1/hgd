{"remainingRequest":"F:\\hdb\\fronteir\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\hdb\\fronteir\\src\\views\\gene-detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\hdb\\fronteir\\src\\views\\gene-detail.vue","mtime":1665407639540},{"path":"F:\\hdb\\fronteir\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\hdb\\fronteir\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\hdb\\fronteir\\node_modules\\vue-loader\\lib\\index.js","mtime":1656480287592}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBAIGlzIGFuIGFsaWFzIHRvIC9zcmMNCmltcG9ydCBIZWFkZXJCYXIgZnJvbSAnQC9jb21wb25lbnRzL0hlYWRlckJhci52dWUnOw0KaW1wb3J0IEZvb3RlckJhciBmcm9tICdAL2NvbXBvbmVudHMvRm9vdGVyQmFyLnZ1ZSc7DQppbXBvcnQgQmFubmVyIGZyb20gIkAvY29tcG9uZW50cy9iYW5uZXIudnVlIjsNCmltcG9ydCBsaW5rSWNvbiBmcm9tICJAL2Fzc2V0cy9pbWcvaWNvbi9saW5rLWljb24tNC5zdmciOw0KaW1wb3J0IGJhcnBsb3RJY29uIGZyb20gIkAvYXNzZXRzL2ltZy9pY29uL2NoYXJ0LWJhci5zdmciOw0KLy8gaW1wb3J0IGNpcmNsZSBmcm9tICJAL2Fzc2V0cy9pbWcvaWNvbi9jaXJjbGUuc3ZnIjsNCmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJzsNCi8vIGltcG9ydCB7IExvYWRpbmcgfSBmcm9tICdlbGVtZW50LXVpJzsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0dlbmVEZXRhaWwnLA0KICBjb21wb25lbnRzOiB7DQogICAgLy8gTmF2aWdhdG9yLA0KICAgIEJhbm5lciwNCiAgICBIZWFkZXJCYXIsDQogICAgRm9vdGVyQmFyLA0KDQogIH0sDQogIGRhdGEoKXsNCiAgICAgIHJldHVybiB7DQogICAgICAgIHRhYmxlRGF0YTogW10sDQogICAgICAgIGJhcnBsb3RJY29uLA0KICAgICAgICB0YWJQb3NpdGlvbjoibGVmdCIsDQogICAgICAgIHNpemU6Im1lZGl1bSIsDQogICAgICAgIGdlbmVCYXNpY0luZm86e30sDQogICAgICAgIG9ydGhvSW5mbzpbXSwNCiAgICAgICAgdGFibGVPcnRob0xpc3Q6W10sDQogICAgICAgIC8vIGdvTGlzdDpbXSwNCiAgICAgICAgdmFyTGlzdDpbXSwNCiAgICAgICAgbG9hZGluZzp0cnVlLA0KICAgICAgICBnb2xvYWRpbmc6dHJ1ZSwNCiAgICAgICAgbGlua0ljb24sDQogICAgICAgIGRiRXZpZGVuY2U6IiIsDQogICAgICAgIGZvcm06eyJzcGVjaWVzIjp7ImdvIjoiIiwib3J0aG8iOiIiLCJ2YXIiOiIiLCJ0cmFpdCI6IiIsImV4cHJlc3Npb24iOiIifX0sDQogICAgICAgIGNoZWNrZWQ6eyJnbyI6IiIsInZhciI6IiIsInRyYWl0IjoiIiwiZXhwcmVzc2lvbiI6IiJ9LA0KICAgICAgICBzcGVjaWVzOltdLA0KICAgICAgICBuYXZCYXJGaXhlZDoiZmFsc2UiLA0KICAgICAgICB0YWJsZUhlaWdodDo3MDAsDQogICAgICAgIHRvb2x0aXA6IiIsDQogICAgICAgIHNob3dWYXJJbmZvVGFibGU6ZmFsc2UsDQogICAgICAgIHdhaXRSZXNwb25zZTp7ImdvIjpmYWxzZSwidmFyIjpmYWxzZSwidHJhaXQiOmZhbHNlLCJleHByZXNzaW9uIjpmYWxzZX0sDQogICAgICAgIGNsaWNrZWQ6eyJnbyI6ZmFsc2UsInZhciI6ZmFsc2UsInRyYWl0IjpmYWxzZSwiZXhwcmVzc2lvbiI6ZmFsc2V9LA0KICAgICAgICBjbGFzc2lmaWNhdGlvbjoiIiwNCiAgICAgICAgd2luZG93U2l6ZTozLA0KICAgICAgICBmdWxsTG9hZGluZzp0cnVlLA0KICAgICAgICBzaG93R29UYWJsZTpmYWxzZSwNCiAgICAgICAgZ29JbmZvRGF0YTpbXSwNCiAgICAgICAgZXhwVGFibGVkYXRhOltdLA0KICAgICAgICBzaG93RXhwSW5mb1RhYmxlOmZhbHNlLA0KICAgICAgICBleHBsb2FkaW5nOmZhbHNlLA0KICAgICAgICB0cmFpdERhdGE6W10sDQogICAgICAgIHNob3dUcmFpdFRhYmxlOmZhbHNlLA0KICAgICAgICBmaWx0ZXJWYWx1ZToiIiwNCiAgICAgICAgdmFyTG9hZGluZzpmYWxzZSwNCiAgICAgICAgZm9ybWVyUmVjdF92YXI6IiIsDQogICAgICAgIHJlY3REYXRhX3Zhcjp7fSwNCiAgICAgICAgZm9ybWVyUmVjdF90cmFpdDoiIiwNCiAgICAgICAgcmVjdERhdGFfdHJhaXQ6e30sDQogICAgICAgIGZvcm1lclJlY3RfZ286IiIsDQogICAgICAgIHJlY3REYXRhX2dvOnt9LA0KICAgICAgICBmb3JtZXJSZWN0X2V4cDoiIiwNCiAgICAgICAgcmVjdERhdGFfZXhwOnt9LA0KICAgICAgICBkYkNvbnRlbnQ6JycsDQogICAgICAgIHRheF9QbGFudDpbIjM3MDIiLCIzNzA4IiwiNDA3MiIsIjM2NTkiLCIzNjM1IiwiMzk4MyIsIjQ1MzAiLCIzODQ3IiwiNDIzNDUiLCIzNjk0IiwiNDA4MSIsIjQ1NTgiLCI0NTY1IiwiMjk3NjAiLCI0NTc3IiwiNDExMyJdDQogICAgICAgIH0NCiAgICB9LA0KDQogICAgbWV0aG9kczogew0KICAgICAgc2VsZWN0TWVudShrZXkpew0KICAgICAgICAvLyBzY3JvbGxJbnRvVmlldygpIGpz5Y6f55Sf5pa55rOV77yM5a6e546w6ZSa54K55rua5Yqo6L+H5rihDQogICAgICAgIGNvbnN0IHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNpdGVtLXBvcy0iK2tleSkNCiAgICAgICAgdGFyZ2V0LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnIH0pDQogICAgICAgIC8vIHNjcm9sbFRvKCkg5oqK5YaF5a655rua5Yqo5Yiw5oyH5a6a55qE5Z2Q5qCH44CC5YeP5Y675a+86Iiq6auY5bqm55qE55uu55qE77ya5a+86Iiq55So5a6a5L2N5Zu65a6a5Zyo6aG26YOo77yM5aaC5p6c5LiN5YeP5Y6777yM5a+86Iiq5qCP5Lya6YGu5oyh5LiA6YOo5YiG5YaF5a65DQogICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCB0YXJnZXQub2Zmc2V0VG9wKQ0KICAgICAgfSwNCiAgICAgIHNlYXJjaEZpbHRlcihrZXkpew0KICAgICAgICBpZihrZXkubGVuZ3RoPjApew0KICAgICAgICAgIGxldCBmaWx0ZXJPcnRobz10aGlzLnRhYmxlT3J0aG9MaXN0LmZpbHRlcihpdGVtPT57DQogICAgICAgICAgICAgIHJldHVybiAga2V5LmluZGV4T2YoIiIraXRlbS50YXhJZCkgPi0xDQogICAgICAgICAgfSkNCiAgICAgICAgICB0aGlzLnRhYmxlT3J0aG9MaXN0PWZpbHRlck9ydGhvOw0KICAgICAgICB9DQoNCiAgICAgIH0sDQogICAgICBjbGVhckZpbHRlcigpew0KICAgICAgICB0aGlzLmZvcm0uc3BlY2llcy5vcnRobz1bXTsNCiAgICAgICAgdGhpcy50YWJsZU9ydGhvTGlzdD10aGlzLm9ydGhvSW5mbw0KICAgICAgfSwNCiAgICAgIGNvbXBhcmVPcnRob0dvKGZpbHRTcGVjaWVzKXsNCiAgICAgICAgdGhpcy5jbGVhck9ydGhvR28oKTsNCiAgICAgICAgdGhpcy5mb3JtLnNwZWNpZXMuZ289ZmlsdFNwZWNpZXM7DQogICAgICAgIHRoaXMuY29tcGFyZUZ1bnRpb24oImdvIixmaWx0U3BlY2llcykNCiAgICAgIH0sDQogICAgICBjbGVhck9ydGhvR28oKXsNCiAgICAgICAgdGhpcy5jbGVhdEZ1bmN0aW9uKCdnbycpDQogICAgICB9LA0KICAgICAgY29tcGFyZU9ydGhvVmFyKGZpbHRTcGVjaWVzKXsNCiAgICAgICAgdGhpcy5jbGVhck9ydGhvVmFyKCk7DQogICAgICAgIHRoaXMuZm9ybS5zcGVjaWVzLnZhcj1maWx0U3BlY2llczsNCiAgICAgICAgdGhpcy5jb21wYXJlRnVudGlvbigndmFyJyxmaWx0U3BlY2llcykNCg0KICAgICAgfSwNCiAgICAgIGNsZWFyT3J0aG9WYXIoKXsNCiAgICAgICAgdGhpcy5jbGVhdEZ1bmN0aW9uKCd2YXInKQ0KICAgICAgfSwNCiAgICAgIGNvbXBhcmVPcnRob1RyYWl0KGZpbHRTcGVjaWVzKXsNCiAgICAgICAgdGhpcy5jbGVhck9ydGhvVHJhaXQoKTsNCiAgICAgICAgdGhpcy5mb3JtLnNwZWNpZXMudHJhaXQ9ZmlsdFNwZWNpZXM7DQogICAgICAgIHRoaXMuY29tcGFyZUZ1bnRpb24oInRyYWl0IixmaWx0U3BlY2llcykNCiAgICAgIH0sDQogICAgICBjbGVhck9ydGhvVHJhaXQoKXsNCiAgICAgICAgdGhpcy5jbGVhdEZ1bmN0aW9uKCd0cmFpdCcpDQogICAgICB9LA0KICAgICAgY29tcGFyZU9ydGhvRXhwcmUoZmlsdFNwZWNpZXMpew0KICAgICAgICB0aGlzLmNsZWFyT3J0aG9FeHByZSgpOw0KICAgICAgICB0aGlzLmZvcm0uc3BlY2llcy5leHByZXNzaW9uPWZpbHRTcGVjaWVzOw0KICAgICAgICB0aGlzLmNvbXBhcmVGdW50aW9uKCJleHByZXNzaW9uIixmaWx0U3BlY2llcykNCiAgICAgIH0sDQogICAgICBjbGVhck9ydGhvRXhwcmUoKXsNCiAgICAgICAgdGhpcy5jbGVhdEZ1bmN0aW9uKCdleHByZXNzaW9uJykNCiAgICAgIH0sDQogICAgICBjbGVhdEZ1bmN0aW9uKGtleSl7DQoNCiAgICAgICAgdGhpcy5jaGVja2VkW2tleV09ZmFsc2U7DQogICAgICAgIHRoaXMuY2xpY2tlZFtrZXldPWZhbHNlOw0KICAgICAgICBsZXQgc3ZnQ29udGFpbmVyPWQzLnNlbGVjdCgiI3N2Z2NvbnRhaW5lci0iK2tleSkNCiAgICAgICAgZDMuc2VsZWN0QWxsKCIjZ3JvdXBfdG90YWxfIitrZXkpLnJlbW92ZSgpDQogICAgICAgIGlmKGtleT09J2dvJyl7c3ZnQ29udGFpbmVyLmF0dHIoJ2hlaWdodCcsJzQwMCcpfWVsc2V7DQogICAgICAgICAgICBzdmdDb250YWluZXIuYXR0cignaGVpZ2h0JywnMzAwJykNCiAgICAgICAgfQ0KICAgICAgICBpZihrZXk9PSd2YXInKXsNCiAgICAgICAgICAgIHRoaXMuc2hvd1ZhckluZm9UYWJsZT1mYWxzZTsNCiAgICAgICAgfWVsc2UgaWYoa2V5PT0nZ28nKXsNCiAgICAgICAgICAgIHRoaXMuc2hvd0dvVGFibGU9ZmFsc2U7DQogICAgICAgIH1lbHNlIGlmKGtleT09J2V4cHJlc3Npb24nKXsNCiAgICAgICAgICAgIHRoaXMuc2hvd0V4cEluZm9UYWJsZT1mYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLndhaXRSZXNwb25zZVtrZXldPWZhbHNlOw0KICAgICAgICB0aGlzLmZvcm0uc3BlY2llc1trZXldPSIiOw0KICAgICAgfSwNCiAgICAvLyAgIOeCueWHu3Nob3cgYnV0dG9uIOiwg+eUqOeahOWHveaVsA0KICAgICAgY29tcGFyZUZ1bnRpb24oa2V5LGZpbHRTcGVjaWVzKXsNCiAgICAgICAgbGV0IGZpbHRlck9ydGhvOw0KICAgICAgICBpZihmaWx0U3BlY2llcy5sZW5ndGg+MCl7DQogICAgICAgICAgICBmaWx0ZXJPcnRobz10aGlzLm9ydGhvSW5mby5maWx0ZXIoaXRlbT0+ew0KICAgICAgICAgICAgICAgIHJldHVybiAgZmlsdFNwZWNpZXMuaW5kZXhPZigiIitpdGVtLnRheElkKSA+LTENCiAgICAgICAgICAgIH0pDQogICAgICAgIH1lbHNlew0KICAgICAgICAgICAgZmlsdGVyT3J0aG89dGhpcy5vcnRob0luZm87DQogICAgICAgIH0NCiAgICAgICAgaWYoIXRoaXMuY2xpY2tlZFtrZXldKXsNCiAgICAgICAgdGhpcy5jbGlja2VkW2tleV09dHJ1ZTsNCiAgICAgICAgdGhpcy5jaGVja2VkW2tleV09dHJ1ZTsNCiAgICAgICAgdGhpcy53YWl0UmVzcG9uc2Vba2V5XT10cnVlOw0KICAgICAgICAvLyAgIOWPluW9k+WJjXRhYmxl55qE5ZCM5rqQ5Z+65Zug77yM5b6q546v5p+l6K+i5a+55bqU55qE5pWw5o2u77yM5aaC5p6c5pyJ55qE6K+d77yM5re75Yqg5LiA6KGMDQogICAgICAgIGxldCBpbmRleD0wOw0KICAgICAgICBsZXQgbnVtPTA7DQogICAgICAgIGZvcihsZXQgaT0wO2k8ZmlsdGVyT3J0aG8ubGVuZ3RoO2krKyl7DQogICAgICAgICAgICBsZXQgb3J0aG9JdGVtPWZpbHRlck9ydGhvW2ldOw0KICAgICAgICAgICAgLy8gICBsZXQgY2xhc3NpZmljYXRpb249b3J0aG9JdGVtLnNwZWNpZXMuY2xhc3NpZmljYXRpb247DQogICAgICAgICAgICAvLyAgIGlmKG9ydGhvSXRlbS5nYmlJbmZvIT1udWxsKXsNCiAgICAgICAgICAgIGxldCBoZGJJZD1vcnRob0l0ZW0uaGRiR2VuZUlkOw0KICAgICAgICAgICAgbGV0IHN5bWJvbDsNCiAgICAgICAgICAgIGlmKG9ydGhvSXRlbS5nZW5lU3ltYm9sIT09Ii0iICYgb3J0aG9JdGVtLmdlbmVTeW1ib2whPT0iIil7DQogICAgICAgICAgICAgICAgLy8gc3ltYm9sLWVuc2VtYmxnaWQtZW50cmV6aWQtaGRiaWQNCiAgICAgICAgICAgICAgICBzeW1ib2wgPW9ydGhvSXRlbS5nZW5lU3ltYm9sDQogICAgICAgICAgICB9ZWxzZSBpZihvcnRob0l0ZW0uZW5zZW1ibElkIT09Ii0iICYgb3J0aG9JdGVtLmVuc2VtYklkIT09IiIpew0KICAgICAgICAgICAgICAgIHN5bWJvbD1vcnRob0l0ZW0uZW5zZW1ibElkOw0KICAgICAgICAgICAgfWVsc2UgaWYob3J0aG9JdGVtLmVudHJleklkIT09Ii0iICYgb3J0aG9JdGVtLmVudHJleklkIT09IiIpew0KICAgICAgICAgICAgICAgIHN5bWJvbD1vcnRob0l0ZW0uZW50cmV6SWQ7DQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICBzeW1ib2w9b3J0aG9JdGVtLmhkYkdlbmVJZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgbGV0IHRheG9uaWQ9b3J0aG9JdGVtLnRheElkDQogICAgICAgICAgICAvLyBsZXQgc3BlY2llc05hbWU9b3J0aG9JdGVtLmNvbW1vbk5hbWUuc2xpY2UoMCwzKQ0KICAgICAgICAgICAgbGV0IHBhcmFtcz0geydoZGJJZCc6IGhkYklkfQ0KICAgICAgICAgICAgaWYoa2V5PT0iZXhwcmVzc2lvbiIpe3BhcmFtcz0geydoZGJJZCc6IGhkYklkLCdjbGFzc2lmaWNhdGlvbic6dGhpcy5jbGFzc2lmaWNhdGlvbn19DQogICAgICAgICAgICB0aGlzLiRheGlvcy5nZXQoImh0dHBzOi8vbmdkYy5jbmNiLmFjLmNuL2hhcGkvYXBpL2dlbmUtZGV0YWlsLSIra2V5LHtwYXJhbXM6cGFyYW1zfSkNCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlPT57DQogICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5sZW5ndGg+MCl7DQogICAgICAgICAgICAgICAgICAgIG51bSs9cmVzcG9uc2UuZGF0YS5sZW5ndGg7DQogICAgICAgICAgICAgICAgICAgIGluZGV4ICs9IDE7DQogICAgICAgICAgICAgICAgICAgIGxldCBzdmdDb250YWluZXI9ZDMuc2VsZWN0KCIjc3ZnY29udGFpbmVyLSIra2V5KQ0KICAgICAgICAgICAgICAgICAgICBsZXQgdG9vbHRpcD1kMy5zZWxlY3QoIiN0b29sdGlwIikNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3U3ViUmVjdENoYXJ0KHJlc3BvbnNlLmRhdGEsc3ZnQ29udGFpbmVyLGtleSxpbmRleCx0b29sdGlwLG9ydGhvSXRlbS5zaG9ydE5hbWUsb3J0aG9JdGVtLmxhdGluTmFtZSxvcnRob0l0ZW0uY29tbW9uTmFtZSwgc3ltYm9sLHRheG9uaWQsb3J0aG9JdGVtLmhkYkdlbmVJZCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9KQ0KDQogICAgICAgICAgICAvLyAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICBpZihudW09PTApew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoJ05vIEFubm90YXRpb24gRGF0YSBIZXJlJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgICAgDQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBnZXRUYWJsZU1heEhlaWdodCgpew0KICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7DQogICAgICAgIGxldCBib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuaW5mby1kaXYiKS5hdHRyaWJ1dGVzDQogICAgICAgIGxldCBib3hfY2xpZW50SGVpZ2h0ID0gYm94WzBdLm93bmVyRWxlbWVudC5jbGllbnRIZWlnaHQ7DQogICAgICAgIHRoaXMudGFibGVIZWlnaHQgPSBib3hfY2xpZW50SGVpZ2h0IC0gMTAwOw0KICAgICAgICB9KQ0KICAgIH0sDQogICAgICB3YXRjaFNjcm9sbCgpIHsNCiAgICAgIHZhciBzY3JvbGxUb3AgPQ0KICAgICAgICB3aW5kb3cucGFnZVlPZmZzZXQgfHwNCiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fA0KICAgICAgICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsNCiAgICAgIC8vICDlvZPmu5rliqjotoXov4cgMjg4IOaXtu+8jOWunueOsOWQuOmhtuaViOaenA0KICAgICAgaWYgKHNjcm9sbFRvcCA+IDI4OCkgew0KICAgICAgICB0aGlzLm5hdkJhckZpeGVkID0gdHJ1ZTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMubmF2QmFyRml4ZWQgPSBmYWxzZTsNCiAgICAgIH0NCiAgICB9LA0Kc2hvd0RldGFpbEV4cHJlc3Npb24odmFsdWUpew0KICAgIGxldCBwcmpJZD12YWx1ZS5wcm9qZWN0SWQ7DQogICAgbGV0IHRheG9uSWQ9dmFsdWUudGF4b25JZDsNCiAgICBsZXQgZ2VuZUlkMT12YWx1ZS5nZW5lSWQ7DQogICAgLy8g5LuF5LuO5ZCM5rqQ5pWw5o2u562b6YCJ5Lya5ryP5o6J56ys5LiA5p2h5pWw5o2u77yM5omA5Lul6Ieq5bex6YCg5LiA5Liq56ys5LiA5p2h5pWw5o2uDQogICAgbGV0IG9yaUl0ZW09ew0KICAgICAgICAiY29tbW9uTmFtZSI6dGhpcy5nZW5lQmFzaWNJbmZvLnNwZWNpZXNOYW1lLmNvbW1vbk5hbWUsDQogICAgICAgICJlbnNlbWJsSWQiOnRoaXMuZ2VuZUJhc2ljSW5mby5lbnNlbWJsR2VuZUlkLA0KICAgICAgICAiZW50cmV6SWQiOnRoaXMuZ2VuZUJhc2ljSW5mby5lbnRyZXpHZW5lLA0KICAgICAgICAiZ2VuZVN5bWJvbCI6dGhpcy5nZW5lQmFzaWNJbmZvLmdlbmVTeW1ib2wsDQogICAgICAgICJoZGJHZW5lSWQiOnRoaXMuZ2VuZUJhc2ljSW5mby5oZGJJZCwNCiAgICAgICAgImxhdGluTmFtZSI6dGhpcy5nZW5lQmFzaWNJbmZvLnNwZWNpZXNOYW1lLmxhdGluTmFtZSwNCiAgICAgICAgInRheElkIjp0aGlzLmdlbmVCYXNpY0luZm8uc3BlY2llc05hbWUudGF4b25JZCwNCiAgICB9DQogICAgLy8g5rex5ou36LSd77yM5LiN5pS55Y+Y5Y6f5pWw5o2uDQogICAgbGV0IE9ydGhvRGF0YTE9SlNPTi5wYXJzZSggICBKU09OLnN0cmluZ2lmeSh0aGlzLnRhYmxlT3J0aG9MaXN0KSAgICkgOw0KICAgIA0KICAgIC8vIOWIpOaWreW9k+WJjeihqOagvOmHjOeahOWQjOa6kOaVsOaNruayoeaciei/meS4gOadoe+8jOWImeWKoOWFpQ0KICAgIGlmKChPYmplY3Qua2V5cyhPcnRob0RhdGExKS5pbmRleE9mKG9yaUl0ZW0uZW5zZW1ibElkKT09LTEpJiZ0YXhvbklkPT1vcmlJdGVtLnRheElkKXtPcnRob0RhdGExLnB1c2gob3JpSXRlbSk7fQ0KICAgIGxldCBvcnRob0RhdGEyPU9ydGhvRGF0YTEuZmlsdGVyKGl0ZW09PnsNCiAgICAgICAgaWYoaXRlbS50YXhJZD09dGF4b25JZCAmJiBpdGVtLmVuc2VtYmxJZCE9PWdlbmVJZDEgJiYgaXRlbS5nZW5lU3ltYm9sICE9PWdlbmVJZDEpew0KICAgICAgICAgICAgcmV0dXJuIGl0ZW0NCiAgICAgICAgfQ0KICAgIH0pDQogICAgbGV0IG9ydGhvUGxvdERhdGFMaXN0PVtdOw0KICAgIGlmKG9ydGhvRGF0YTIubGVuZ3RoPjApew0KICAgICAgICBmb3IobGV0IG9ydGhvR2VuZSBvZiBvcnRob0RhdGEyKXsNCiAgICAgICAgICAgIC8vIGxldCBnZW5lSWQ9b3J0aG9HZW5lLmVuc2VtYmxJZDsNCiAgICAgICAgICAgIGxldCBleHBHZW5lSWQ9b3J0aG9HZW5lLmV4cEdlbmVJZDsNCiAgICAgICAgICAgIGxldCBnZW5lTmFtZT1vcnRob0dlbmUuZW5zZW1ibElkKyIgKCIrb3J0aG9HZW5lLmdlbmVTeW1ib2wrIikiOw0KICAgICAgICAgICAgbGV0IFBBVEg9Imh0dHBzOi8vbmdkYy5jbmNiLmFjLmNuL2dlbi9hcGkvanNvbi9nZW5lL2V4cHJlc3Npb25zP3RheG9ub215SWQ9Iit0YXhvbklkKyImYWNjZXNzaW9uPSIrZXhwR2VuZUlkKyImYmlvUHJvamVjdElkPSIrcHJqSWQNCiAgICAgICAgICAgIHRoaXMuJGF4aW9zLmdldChQQVRIKS50aGVuKHJlc3BvbnNlPT57DQogICAgICAgICAgICAgICAgbGV0IG9ydGhvUGxvdERhdGE9e307DQogICAgICAgICAgICAgICAgbGV0IGV4cGRhdGE9cmVzcG9uc2UuZGF0YS5yZXN1bHQuZXhwcmVzc2lvblByb2ZpbGVzOw0KICAgICAgICAgICAgICAgIC8vIOi/memHjOiCr+WumuaYr+WNleS4qnByb2plY3QNCiAgICAgICAgICAgICAgICBmb3IobGV0IGtleWFhIGluIGV4cGRhdGEgKXsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHByakxpc3Q9ZXhwZGF0YVtrZXlhYV0NCiAgICAgICAgICAgICAgICAgICAgbGV0IGV4cE51bT0wOw0KICAgICAgICAgICAgICAgICAgICAvLyBsZXQgc2FtcGxlTnVtPTA7DQogICAgICAgICAgICAgICAgICAgIC8vIOeUqOS6juWtmOWCqOW9k+WJjXByb2plY3TmnInlk6rkupt0aXNzdWUNCiAgICAgICAgICAgICAgICAgICAgbGV0IHRpc3N1ZT17fTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHBsb3REYXRhPVtdOw0KICAgICAgICAgICAgICAgICAgICBsZXQgcGxwdFRpc3N1ZT1bXTsNCiAgICAgICAgICAgICAgICAgICAgLy8g5b6q546vcHJvamVjdOmHjOmdoueahOWAvO+8jOWIhnRpc3N1Zeiuoeeul+W5s+Wdh+WAvA0KICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGl0ZW0gb2YgcHJqTGlzdCl7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBzYW1wbGVOdW0gKz0gMTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4cE51bSArPSBpdGVtLnRwbTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpdGVtVGlzc3VlPWl0ZW0udGlzc3VlOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoT2JqZWN0LmtleXModGlzc3VlKS5pbmRleE9mKGl0ZW1UaXNzdWUpID09IC0xICl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlzc3VlW2l0ZW1UaXNzdWVdPVtleHBOdW1dDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxwdFRpc3N1ZS5wdXNoKGl0ZW1UaXNzdWUpDQogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXNzdWVbaXRlbVRpc3N1ZV0ucHVzaChleHBOdW0pDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCB0aXNzdWVOYW1lIGluIHRpc3N1ZSl7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWVMaXN0PXRpc3N1ZVt0aXNzdWVOYW1lXQ0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHN1bT1ldmFsKHZhbHVlTGlzdC5qb2luKCIrIikpDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXhwQXZnPSh2YWxzdW0vdmFsdWVMaXN0Lmxlbmd0aCkudG9GaXhlZCg0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGxvdERhdGEucHVzaChleHBBdmcpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIG9ydGhvUGxvdERhdGEuZ2VuZUlkPWdlbmVOYW1lOw0KICAgICAgICAgICAgICAgICAgICBvcnRob1Bsb3REYXRhLmVuc2VtYmxJZD1vcnRob0dlbmUuZW5zZW1ibElkOw0KICAgICAgICAgICAgICAgICAgICBvcnRob1Bsb3REYXRhLmdlbmVTeW1ib2w9b3J0aG9HZW5lLmdlbmVTeW1ib2w7DQogICAgICAgICAgICAgICAgICAgIG9ydGhvUGxvdERhdGEucGxvdERhdGE9cGxvdERhdGE7DQogICAgICAgICAgICAgICAgICAgIG9ydGhvUGxvdERhdGEucGxwdFRpc3N1ZT1wbHB0VGlzc3VlOw0KICAgICAgICAgICAgICAgICAgICBvcnRob1Bsb3REYXRhTGlzdC5wdXNoKG9ydGhvUGxvdERhdGEpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KDQogICAgICAgIA0KICAgIH0NCiAgICB0aGlzLiRhbGVydChgDQogICAgICAgIDxkaXYgaWQ9Im1haW4iIHN0eWxlPSJ3aWR0aDoxMjAwcHg7aGVpZ2h0OjU1MHB4Ij48L2Rpdj4NCiAgICBgLCB7DQogICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZQ0KICAgIH0pDQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIHRoaXMuZHJhd0JveFBsb3QodmFsdWUsb3J0aG9QbG90RGF0YUxpc3QpDQogICAgfSwgMjAwKTsNCiAgfSwNCmRyYXdCb3hQbG90KHZhbHVlLG9ydGhvVmFsdWVMaXN0KXsNCiAgICBjb25zb2xlLmxvZygidmFsdWU6Iix2YWx1ZSk7DQogICAgbGV0IHNwZWNpZXM9dmFsdWUuc3BlY2llc05hbWU7DQogICAgbGV0IHhheGlzPXZhbHVlLnBscHRUaXNzdWU7DQogICAgbGV0IHBsb3REYXRhPXZhbHVlLnBsb3REYXRhOw0KICAgIGxldCBwcmpJZD12YWx1ZS5wcm9qZWN0SWQ7DQogICAgbGV0IGdlbmVJZD12YWx1ZS5nZW5lTmFtZTsNCiAgICBsZXQgc2VyaWVzRGF0YT0gWw0KICAgICAgICB7DQogICAgICAgICAgICBuYW1lOiBnZW5lSWQsDQogICAgICAgICAgICB0eXBlOiAnYmFyJywNCiAgICAgICAgICAgIGRhdGE6IHBsb3REYXRhLA0KICAgICAgICAgICAgYmFyTWF4V2lkdGg6JzE1JScsDQogICAgICAgICAgICBtYXJrUG9pbnQ6IHsNCiAgICAgICAgICAgICAgICBkYXRhOiBbDQogICAgICAgICAgICAgICAgeyB0eXBlOiAnbWF4JywgbmFtZTogJ01heCcgfSwNCiAgICAgICAgICAgICAgICB7IHR5cGU6ICdtaW4nLCBuYW1lOiAnTWluJyB9DQogICAgICAgICAgICAgICAgXQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgfQ0KICAgIF0NCiAgICBsZXQgbGVnZW50RGF0YT17DQogICAgICAgIGRhdGE6IFtnZW5lSWRdLA0KICAgICAgICB0b3A6ICctMSUnLA0KICAgICAgICBsZWZ0OiAnNTAlJw0KICAgIH0NCiAgICANCiAgICBsZXQgc3ltYm9sTGlzdD1bXTsNCiAgICBpZih2YWx1ZS5nZW5lU3ltYm9sIT09Ii0iKXtzeW1ib2xMaXN0LnB1c2godmFsdWUuZ2VuZVN5bWJvbCl9DQogICAgaWYodmFsdWUuZ2VuZUlkIT09Ii0iKXtzeW1ib2xMaXN0LnB1c2godmFsdWUuZ2VuZUlkKX0NCiAgICAvLyBsZXQgZW5zSURMaXN0PVt2YWx1ZS5nZW5lSWRdDQogICAgaWYob3J0aG9WYWx1ZUxpc3QubGVuZ3RoPjApew0KICAgICAgICBmb3IobGV0IG9ydGhvVmFsdWUgb2YgIG9ydGhvVmFsdWVMaXN0KXsNCiAgICAgICAgICAgIGxldCBzMkRhdGE9b3J0aG9WYWx1ZS5wbG90RGF0YTsNCiAgICAgICAgICAgIGxldCBzMkdlbmU9b3J0aG9WYWx1ZS5nZW5lSWQ7DQogICAgICAgICAgICBsZXQgZ2VuZVN5bWJvbD1vcnRob1ZhbHVlLmdlbmVTeW1ib2w7DQogICAgICAgICAgICBsZXQgZW5zZW1ibElkPW9ydGhvVmFsdWUuZW5zZW1ibElkOw0KICAgICAgICAgICAgaWYoc3ltYm9sTGlzdC5pbmRleE9mKGdlbmVTeW1ib2wpPT0tMSAmJiBzeW1ib2xMaXN0LmluZGV4T2YoZW5zZW1ibElkKT09LTEpew0KICAgICAgICAgICAgICAgIGlmKGdlbmVTeW1ib2whPT0iLSIpew0KICAgICAgICAgICAgICAgICAgICBzeW1ib2xMaXN0LnB1c2goZ2VuZVN5bWJvbCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIGVuc0lETGlzdC5wdXNoKGVuc2VtYmxJZCk7DQogICAgICAgICAgICAgICAgbGV0IHNlcmllc0l0ZW09IHsNCiAgICAgICAgICAgICAgICAgICAgbmFtZTogczJHZW5lLA0KICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYmFyJywNCiAgICAgICAgICAgICAgICAgICAgZGF0YTogczJEYXRhLA0KICAgICAgICAgICAgICAgICAgICBiYXJNYXhXaWR0aDonMTUlJywNCiAgICAgICAgICAgICAgICAgICAgbWFya1BvaW50OiB7DQogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbDQogICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdtYXgnLCBuYW1lOiAnTWF4JyB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnbWluJywgbmFtZTogJ01pbicgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgXQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBsZWdlbnREYXRhLmRhdGEucHVzaChzMkdlbmUpDQogICAgICAgICAgICAgICAgc2VyaWVzRGF0YS5wdXNoKHNlcmllc0l0ZW0pDQogICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICBsZXQgdGl0bGU9IkV4cHJlc3Npb24gb2YgaG9tb2xvZ291cyBnZW5lIGluIEJpb1Byb2plY3QgIitwcmpJZDsNCiAgICBsZXQgc3ViVGl0bGU9IlNwZWNpZXM6ICIrc3BlY2llczsNCiAgICBsZXQgY2hhcnREb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbicpOw0KICAgIGxldCBteUNoYXJ0ID0gdGhpcy4kZWNoYXJ0cy5pbml0KGNoYXJ0RG9tKTsNCiAgICBsZXQgb3B0aW9uOw0KDQogICAgb3B0aW9uID0gew0KICAgICAgICB0aXRsZTogew0KICAgICAgICAgICAgdGV4dDogdGl0bGUsDQogICAgICAgICAgICBzdWJ0ZXh0OnN1YlRpdGxlDQogICAgICAgIH0sDQogICAgICAgIHRvb2x0aXA6IHsNCiAgICAgICAgICAgIHRyaWdnZXI6ICdheGlzJw0KICAgICAgICB9LA0KICAgICAgICBncmlkOiB7DQogICAgICAgICAgICBsZWZ0OiAnMTAlJywNCiAgICAgICAgICAgIHJpZ2h0OiAnMTAlJywNCiAgICAgICAgICAgIHRvcDogJzE1JScsDQogICAgICAgICAgICBib3R0b206IjE1JSINCiAgICAgICAgfSwNCiAgICAgICAgbGVnZW5kOiBsZWdlbnREYXRhLA0KICAgICAgICB0b29sYm94OiB7DQogICAgICAgICAgICBzaG93OiB0cnVlLA0KICAgICAgICAgICAgZmVhdHVyZTogew0KICAgICAgICAgICAgDQogICAgICAgICAgICBzYXZlQXNJbWFnZTogeyBzaG93OiB0cnVlIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgY2FsY3VsYWJsZTogdHJ1ZSwNCiAgICAgICAgeEF4aXM6IFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICdjYXRlZ29yeScsDQogICAgICAgICAgICAvLyBwcmV0dGllci1pZ25vcmUNCiAgICAgICAgICAgIGRhdGE6IHhheGlzLA0KICAgICAgICAgICAgbmFtZTogJ1Rpc3N1ZScsDQogICAgICAgICAgICBuYW1lR2FwOiAzMCwNCiAgICAgICAgICAgIGF4aXNMYWJlbDogeyAvL+iuvue9rnjovbTnmoTlrZcNCiAgICAgICAgICAgICAgICBzaG93OnRydWUsDQogICAgICAgICAgICAgICAgaW50ZXJ2YWw6MCwvL+S9v3jovbTmqKrlnZDmoIflhajpg6jmmL7npLoNCiAgICAgICAgICAgICAgICB0ZXh0U3R5bGU6IHsvL3jovbTlrZfkvZPmoLflvI8NCiAgICAgICAgICAgICAgICAgICAgLy8gY29sb3I6ICJyZ2JhKDIxOSwyMjUsMjU1LDEpIiwNCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICByb3RhdGU6MTUsDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIA0KICAgICAgICB9DQogICAgICAgIF0sDQogICAgICAgIHlBeGlzOiBbDQogICAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAndmFsdWUnLA0KICAgICAgICAgICAgbmFtZTogJ0F2ZXJhZ2UgVFBNIHZhbHVlJywNCiAgICAgICAgICAgIH0NCiAgICAgICAgXSwNCiAgICAgICAgc2VyaWVzOiBzZXJpZXNEYXRhDQogICAgfTsNCiAgICBteUNoYXJ0LmNsZWFyKCkNCiAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgb3B0aW9uICYmIG15Q2hhcnQuc2V0T3B0aW9uKG9wdGlvbik7DQogICAgfSwgMjAwKTsgDQogIH0sDQpkcmF3R29SZWN0Q2hhcnQodmFsdWUsc3ZnQ29udGFpbmVyLGRhdGFjbGFzcyxzaG9ydE5hbWUsbGF0aW5OYW1lLGNvbW1vbk5hbWUsZ2VuZU5hbWUsdGF4b25pZCxoZGJpZCl7DQogICAgbGV0IHJlY3RIZWlnaHQ9MTg7DQogICAgLy8g57uY5Yi25paH5a2X6YOo5YiGDQogICAgbGV0IHRvb2x0aXAgPSBkMy5zZWxlY3QoJy50YWJsZXMnKQ0KICAgICAgICAuYXBwZW5kKCdkaXYnKQ0KICAgICAgICAuYXR0cigiaWQiLCAidG9vbHRpcCIpDQogICAgICAgIC5zdHlsZSgncG9zaXRpb24nLCAnYWJzb2x1dGUnKQ0KICAgICAgICAuc3R5bGUoJ3otaW5kZXgnLCAnMTAwMCcpDQogICAgICAgIC5zdHlsZSgnZGlzcGxheScsJ25vbmUnKQ0KICAgICAgICAuc3R5bGUoJ2xpbmUtaGVpZ2h0JywnMThweCcpDQogICAgICAgIC5zdHlsZSgndGV4dC1hbGlnbicsJ2p1c3RpZnknKQ0KICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICcxNHB4JykNCiAgICAgICAgLnN0eWxlKCd0ZXh0LWFsaWduJywnbGVmdCcpDQogICAgICAgIC5zdHlsZSgncGFkZGluZycsICcxNXB4JykNCiAgICAgICAgLnN0eWxlKCdib3JkZXItcmFkaXVzJywiNSUiKQ0KICAgICAgICAuc3R5bGUoJ2NvbG9yJywnd2hpdGUnKQ0KICAgICAgICAuc3R5bGUoJ2JhY2tncm91bmQtY29sb3InLCcjODA4MDgwJykNCiAgICAvLyDnlKjmnaXliKTmlq3lvZPliY3nsbvliKvvvIzkuI3lkIznsbvliKvkuK3pl7Tpl7TpmpTlvIANCiAgICBsZXQgdG9wX2NsYXNzOw0KICAgIGxldCBjbGFzc19jb3VudD0wOw0KICAgIGxldCBjbGFzc19QQURESU5HPTMwOw0KICAgIGlmKGRhdGFjbGFzcz09InZhciIpe3RvcF9jbGFzcz12YWx1ZVswXS52b0NsYXNzaWZpY2F0aW9uO31lbHNlIGlmKGRhdGFjbGFzcz09ImdvIil7DQogICAgICAgIHRvcF9jbGFzcz12YWx1ZVswXS50b3BDbGFzczsNCiAgICB9ZWxzZSBpZihkYXRhY2xhc3M9PSJleHByZXNzaW9uIil7dG9wX2NsYXNzPXZhbHVlWzBdLmVvQ2xhc3NpZmljYXRpb259DQogICAgZm9yKGxldCBpaWkgaW4gdmFsdWUgKXsNCiAgICAgICAgbGV0IHRleHRfdG9wPTE4MDsNCiAgICAgICAgbGV0IHRleHRfeD0xMTU7DQogICAgICAgIGlmKGRhdGFjbGFzcz09ImdvIil7dGV4dF90b3ArPTI1O3RleHRfeC09MjV9DQogICAgICAgIGxldCBpdGVtPXZhbHVlW2lpaV0NCg0KICAgICAgICBsZXQgR19QQURESU5HPXJlY3RIZWlnaHQ7DQogICAgICAgIC8vIOS4jeWQjOWIhuexu+mXtOeahOmXtOmalA0KICAgICAgICBpZihkYXRhY2xhc3M9PSJ2YXIiKXsNCiAgICAgICAgICAgIGlmKGl0ZW0udm9DbGFzc2lmaWNhdGlvbiE9PXRvcF9jbGFzcyl7dG9wX2NsYXNzPWl0ZW0udm9DbGFzc2lmaWNhdGlvbjtjbGFzc19jb3VudCs9MX0NCiAgICAgICAgfWVsc2UgaWYoZGF0YWNsYXNzPT0iZ28iKXsNCiAgICAgICAgICAgIGlmKGl0ZW0udG9wQ2xhc3MhPT10b3BfY2xhc3Mpe3RvcF9jbGFzcz1pdGVtLnRvcENsYXNzO2NsYXNzX2NvdW50Kz0xfQ0KICAgICAgICB9ZWxzZSBpZihkYXRhY2xhc3M9PSJleHByZXNzaW9uIil7DQogICAgICAgICAgICBpZihpdGVtLmVvQ2xhc3NpZmljYXRpb24hPT10b3BfY2xhc3Mpe3RvcF9jbGFzcz1pdGVtLmVvQ2xhc3NpZmljYXRpb247Y2xhc3NfY291bnQrPTF9DQogICAgICAgIH0NCg0KICAgICAgICAvLyB0cmFpdOWSjHZhcmlhbnTms6jph4rnsbvlnovmr5TovoPlsJHvvIzmiYDku6XpmpTlrr3ngrkNCiAgICAgICAgLy8gaWYoZGF0YWNsYXNzPT0idmFyInx8ZGF0YWNsYXNzPT0idHJhaXQiKXtHX1BBRERJTkcrPTc7fQ0KICAgICAgICBsZXQgZ3JvdXBfdGV4dCA9IHN2Z0NvbnRhaW5lci5hcHBlbmQoJ2cnKS5hdHRyKCJpZCIsICJ0ZXh0X2dyb3VwIitpaWkpLmF0dHIoInRyYW5zZm9ybSIsInRyYW5zbGF0ZSgiKygoaWlpKkdfUEFERElORykrKGNsYXNzX1BBRERJTkcqY2xhc3NfY291bnQpLTcwKSsiLCIrdGV4dF90b3ArIikgcm90YXRlKC00NSkiKQ0KICAgICAgICBsZXQgZ2VuZV9mb250c2l6ZT0xMg0KICAgICAgICBsZXQgdGV4dGdzID0gZ3JvdXBfdGV4dC5zZWxlY3RBbGwoInRleHQiKS5kYXRhKFtpdGVtXSkuZW50ZXIoKQ0KICAgICAgICBpZihkYXRhY2xhc3M9PSdnbycpew0KICAgICAgICAgICAgdGV4dGdzLmFwcGVuZCgidGV4dCIpDQogICAgICAgICAgICAgICAgLmF0dHIoImZpbGwiLCAiYmxhY2siKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJ0ZXh0LWFuY2hvciIsICJzdGFydCIpDQogICAgICAgICAgICAgICAgLmF0dHIoImZvbnQtZmFtaWx5IiwgInNhbnMtc2VyaWYiKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJmb250LXNpemUiLCBnZW5lX2ZvbnRzaXplKQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJ4IiwgdGV4dF94KQ0KICAgICAgICAgICAgICAgIC5hdHRyKCJ5IiwgdGV4dF90b3ApDQogICAgICAgICAgICAgICAgLnRleHQoZCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGxldCB0eHRmaWxlPWQuZ29Bbm5vdGF0aW9ucw0KICAgICAgICAgICAgICAgICAgICBpZihkLmdvQW5ub3RhdGlvbnMubGVuZ3RoPjQwKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHR4dGZpbGU9ZC5nb0Fubm90YXRpb25zLnNsaWNlKDAsNDApKyIuLi4iDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICB0eHRmaWxlDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgfWVsc2UgaWYoZGF0YWNsYXNzPT0ndmFyJyl7DQogICAgICAgICAgICAgdGV4dGdzLmFwcGVuZCgidGV4dCIpDQogICAgICAgICAgICAuYXR0cigiZmlsbCIsICJibGFjayIpDQogICAgICAgICAgICAuYXR0cigidGV4dC1hbmNob3IiLCAic3RhcnQiKQ0KICAgICAgICAgICAgLmF0dHIoImZvbnQtZmFtaWx5IiwgInNhbnMtc2VyaWYiKQ0KICAgICAgICAgICAgLmF0dHIoImZvbnQtc2l6ZSIsIGdlbmVfZm9udHNpemUpDQogICAgICAgICAgICAuYXR0cigieCIsIHRleHRfeCkNCiAgICAgICAgICAgIC5hdHRyKCJ5IiwgdGV4dF90b3ApDQogICAgICAgICAgICAudGV4dChkID0+IHsNCiAgICAgICAgICAgICAgICByZXR1cm4gIGQudm9Bbm5vdGFpb24NCiAgICAgICAgICAgIH0pDQogICAgICAgIH1lbHNlIGlmKGRhdGFjbGFzcz09ImV4cHJlc3Npb24iKXsNCiAgICAgICAgICAgIHRleHRncy5hcHBlbmQoInRleHQiKQ0KICAgICAgICAgICAgLmF0dHIoImZpbGwiLCAiYmxhY2siKQ0KICAgICAgICAgICAgLmF0dHIoInRleHQtYW5jaG9yIiwgInN0YXJ0IikNCiAgICAgICAgICAgIC5hdHRyKCJmb250LWZhbWlseSIsICJzYW5zLXNlcmlmIikNCiAgICAgICAgICAgIC5hdHRyKCJmb250LXNpemUiLCBnZW5lX2ZvbnRzaXplKQ0KICAgICAgICAgICAgLmF0dHIoIngiLCB0ZXh0X3gpDQogICAgICAgICAgICAuYXR0cigieSIsIHRleHRfdG9wKQ0KICAgICAgICAgICAgLnRleHQoZCA9PiB7DQogICAgICAgICAgICAgICAgcmV0dXJuICBkLmVvQW5ub3RhdGlvbg0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgICBlbHNlew0KICAgICAgICAgICAgIHRleHRncy5hcHBlbmQoInRleHQiKQ0KICAgICAgICAgICAgLmF0dHIoImZpbGwiLCAiYmxhY2siKQ0KICAgICAgICAgICAgLmF0dHIoInRleHQtYW5jaG9yIiwgInN0YXJ0IikNCiAgICAgICAgICAgIC5hdHRyKCJmb250LWZhbWlseSIsICJzYW5zLXNlcmlmIikNCiAgICAgICAgICAgIC5hdHRyKCJmb250LXNpemUiLCBnZW5lX2ZvbnRzaXplKQ0KICAgICAgICAgICAgLmF0dHIoIngiLCB0ZXh0X3gpDQogICAgICAgICAgICAuYXR0cigieSIsIHRleHRfdG9wKQ0KICAgICAgICAgICAgLnRleHQoZCA9PiB7DQogICAgICAgICAgICAgICAgcmV0dXJuICBkLnRyYWl0TmFtZQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgICB9DQogICAgLy8gbGV0IHNwZWNpZXNOYW1lPQ0KICAgIC8vIOe7mOWItueDreWbvnJlY3Tpg6jliIYNCiAgICB0aGlzLmRyYXdTdWJSZWN0Q2hhcnQodmFsdWUsc3ZnQ29udGFpbmVyLGRhdGFjbGFzcywwLHRvb2x0aXAsc2hvcnROYW1lLGxhdGluTmFtZSxjb21tb25OYW1lLGdlbmVOYW1lLHRheG9uaWQsaGRiaWQpDQoNCiAgICB9LA0KICAgIC8vIOWwgeijhee7mOWItnJlY3Tmlrnms5UNCiAgICBkcmF3U3ViUmVjdENoYXJ0KHZhbHVlLHN2Z0NvbnRhaW5lcixkYXRhY2xhc3MsaW5kZXgsdG9vbHRpcCxzaG9ydE5hbWUsbGF0aW5OYW1lLGNvbW1vbk5hbWUsZ2VuZU5hbWUsdGF4b25pZDEyLGhkYmlkKXsNCiAgICAgICAgLy8gZ2VuZU5hbWU9Z2VuZU5hbWUubGVuZ3RoPjEwP2dlbmVOYW1lLnNsaWNlKDAsMTApKyIuLiI6Z2VuZU5hbWU7DQogICAgICAgIGxldCByZWN0SGVpZ2h0PTE4DQogICAgICAgIGxldCByZWN0X3RvcD0yMjg7DQogICAgICAgIGlmKGRhdGFjbGFzcz09ImdvIil7cmVjdF90b3ArPTYwfQ0KICAgICAgICAvLyBsZXQgUkVDVF9XSURUSD1yZWN0SGVpZ2h0Ow0KICAgICAgICAvLyBsZXQgcmVjdF9oZWlnaHQ9cmVjdEhlaWdodDsNCiAgICAgICAgbGV0IFBBRERJTkc9cmVjdEhlaWdodDsNCiAgICAgICAgbGV0IG9yaVN2Z0hlaWdodD0zMDA7DQogICAgICAgIGlmKGRhdGFjbGFzcz09ImdvIil7b3JpU3ZnSGVpZ2h0PTQwMH0NCiAgICAgICAgc3ZnQ29udGFpbmVyLmF0dHIoJ2hlaWdodCcsYCR7b3JpU3ZnSGVpZ2h0K2luZGV4KjE4fWApDQogICAgICAgIGxldCBncm91cF90b3RhbDsNCiAgICAgICAgaWYoaW5kZXg9PTApew0KICAgICAgICAgICAgZ3JvdXBfdG90YWwgPSBzdmdDb250YWluZXIuYXBwZW5kKCdnJykuYXR0cigiaWQiLCAiZ3JvdXBfdG90YWxfMCIpLmF0dHIoJ3RyYW5zZm9ybScsYHRyYW5zbGF0ZSgwLCR7UEFERElORyppbmRleH0pYCkNCiAgICAgICAgfWVsc2V7DQogICAgICAgICAgICBncm91cF90b3RhbCA9IHN2Z0NvbnRhaW5lci5hcHBlbmQoJ2cnKS5hdHRyKCJpZCIsICJncm91cF90b3RhbF8iK2RhdGFjbGFzcykuYXR0cigndHJhbnNmb3JtJyxgdHJhbnNsYXRlKDAsJHtQQURESU5HKmluZGV4fSlgKQ0KICAgICAgICB9DQogICAgICAgIGxldCBnZW5lX2ZvbnRzaXplPTEyDQogICAgICAgIGdyb3VwX3RvdGFsLmFwcGVuZCgndGV4dCcpDQogICAgICAgICAgICAuYXR0cigneCcsMCkNCiAgICAgICAgICAgIC5hdHRyKCd5JyxyZWN0X3RvcCtyZWN0SGVpZ2h0LzIrNSkNCiAgICAgICAgICAgIC5hdHRyKCJmb250LXNpemUiLCBnZW5lX2ZvbnRzaXplKQ0KICAgICAgICAgICAgLnRleHQoYCR7Z2VuZU5hbWUubGVuZ3RoPjEwP2dlbmVOYW1lLnNsaWNlKDAsMTApKyIuLiI6Z2VuZU5hbWV9KCR7c2hvcnROYW1lfSlgKQ0KICAgICAgICBsZXQgcmVjdF9ncm91cCA9IGdyb3VwX3RvdGFsLnNlbGVjdEFsbCgicmVjdCIpDQogICAgICAgICAgICAuZGF0YSh2YWx1ZSkNCiAgICAgICAgICAgIC5lbnRlcigpDQogICAgICAgIGxldCBSRUNUX1BBRERJTkc9cmVjdEhlaWdodDsNCiAgICAgICAgbGV0IFJFQ1RfeD0xMjg7DQogICAgICAgIC8vIOWIpOaWree7mOWbvuaXtueahOaVsOaNruexu+WIq++8jOS4jeWQjOexu+WIq+mXtOmalOW8gA0KICAgICAgICBsZXQgdG9wX2NsYXNzOw0KICAgICAgICBsZXQgY2xhc3NfY291bnQ9MDsNCiAgICAgICAgbGV0IGNsYXNzX1BBRERJTkc9MzA7DQogICAgICAgIHZhciBfdGhpcz10aGlzOw0KICAgICAgICBfdGhpcy4kYXhpb3M9dGhpcy4kYXhpb3M7DQogICAgICAgIA0KICAgICAgICBpZihkYXRhY2xhc3M9PSJ2YXIiKXt0b3BfY2xhc3M9dmFsdWVbMF0udm9DbGFzc2lmaWNhdGlvbjt9ZWxzZSBpZihkYXRhY2xhc3M9PSJnbyIpew0KICAgICAgICAgICAgdG9wX2NsYXNzPXZhbHVlWzBdLnRvcENsYXNzOw0KICAgICAgICB9ZWxzZSBpZihkYXRhY2xhc3M9PSJleHByZXNzaW9uIil7dG9wX2NsYXNzPXZhbHVlWzBdLmVvQ2xhc3NpZmljYXRpb259DQoNCg0KICAgICAgICAvLyBpZihkYXRhY2xhc3M9PSJ2YXIifHxkYXRhY2xhc3M9PSJ0cmFpdCIpe1JFQ1RfUEFERElORz0yNTt9DQogICAgICAgIHJlY3RfZ3JvdXAuYXBwZW5kKCdyZWN0JykNCiAgICAgICAgLmF0dHIoIngiLCAoZCwgaSkgPT4gew0KICAgICAgICAgICAgIC8vIOS4jeWQjOWIhuexu+mXtOeahOmXtOmalA0KICAgICAgICAgICAgaWYoZGF0YWNsYXNzPT0idmFyIil7DQogICAgICAgICAgICAgICAgaWYoZC52b0NsYXNzaWZpY2F0aW9uIT09dG9wX2NsYXNzKXt0b3BfY2xhc3M9ZC52b0NsYXNzaWZpY2F0aW9uO2NsYXNzX2NvdW50Kz0xfQ0KICAgICAgICAgICAgfWVsc2UgaWYoZGF0YWNsYXNzPT0iZ28iKXsNCiAgICAgICAgICAgICAgICBpZihkLnRvcENsYXNzIT09dG9wX2NsYXNzKXt0b3BfY2xhc3M9ZC50b3BDbGFzcztjbGFzc19jb3VudCs9MX0NCiAgICAgICAgICAgIH1lbHNlIGlmKGRhdGFjbGFzcz09ImV4cHJlc3Npb24iKXsNCiAgICAgICAgICAgICAgICBpZihkLmVvQ2xhc3NpZmljYXRpb24hPT10b3BfY2xhc3Mpe3RvcF9jbGFzcz1kLmVvQ2xhc3NpZmljYXRpb247Y2xhc3NfY291bnQrPTF9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGxldCBzdGFydFJhdGUgPSBSRUNUX3graSpSRUNUX1BBRERJTkcrY2xhc3NfY291bnQqY2xhc3NfUEFERElORw0KICAgICAgICAgICAgcmV0dXJuIHN0YXJ0UmF0ZQ0KICAgICAgICB9KQ0KICAgICAgICAuYXR0cigieSIsIHJlY3RfdG9wICkNCiAgICAgICAgLmF0dHIoIndpZHRoIiwgcmVjdEhlaWdodCApDQogICAgICAgIC5hdHRyKCJoZWlnaHQiLCByZWN0SGVpZ2h0ICkNCiAgICAgICAgLmF0dHIoImZpbGwiLCBkPT5kLm9wYWNpdHk+MD8icmdiYSgxNDEsMTkyLDI1MiwiKyhkLm9wYWNpdHkrMC4yKSsiKSI6InJnYmEoMTQxLDE5MiwyNTIsMCkiKQ0KICAgICAgICAuYXR0cignc3Ryb2tlJywiZGFya2dyYXkiKQ0KICAgICAgICAuYXR0cignY3Vyc29yJyxkPT5kLm9wYWNpdHk+MD8ncG9pbnRlcic6JycpDQogICAgICAgIC5vbigibW91c2Vtb3ZlIiwgZnVuY3Rpb24oZCwgaSl7DQogICAgICAgICAgICBsZXQgaHRtbEluZm87DQogICAgICAgICAgICBpZiggZGF0YWNsYXNzID09ImdvIil7DQogICAgICAgICAgICAgICAgaHRtbEluZm89YA0KICAgICAgICAgICAgPGRpdj48c3Ryb25nPkdlbmUgSUQ6IDwvc3Ryb25nPiR7Z2VuZU5hbWV9PC9kaXY+DQogICAgICAgICAgICA8ZGl2PjxzdHJvbmc+U3BlY2llczogPC9zdHJvbmc+JHtsYXRpbk5hbWV9ICgke2NvbW1vbk5hbWV9KTwvZGl2Pg0KICAgICAgICAgICAgPGRpdj48c3Ryb25nPkdPIEFubm90YXRpb24gTnVtYmVyOiA8L3N0cm9uZz4ke2kuZ29OdW0+MD9pLmdvTnVtOiItIn08L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+PHN0cm9uZz5HTyBJRDogPC9zdHJvbmc+JHtpLmdvSWR9PC9kaXY+DQogICAgICAgICAgICA8ZGl2PjxzdHJvbmc+QW5ub3RhdGUgU3ViY2xhc3MgR08gSUQ6IDwvc3Ryb25nPiR7aS5nb0xpc3Q9PW51bGw/Ii0iOmkuZ29MaXN0LnNsaWNlKDAsMil9JHtpLmdvTGlzdCE9PW51bGwmJmkuZ29MaXN0Lmxlbmd0aD4yPyIuLi4iOiIifTwvZGl2Pg0KICAgICAgICAgICAgPGRpdj48c3Ryb25nPkdvIFRlcm06IDwvc3Ryb25nPiR7aS5nb0Fubm90YXRpb25zfTwvZGl2Pg0KICAgICAgICAgICAgPGRpdj48c3Ryb25nPkdvIENsYXNzaWZpY2F0aW9uOiA8L3N0cm9uZz4ke2kudG9wQ2xhc3N9PC9kaXY+DQogICAgICAgICAgICA8ZGl2PjxzdHJvbmc+R28gRGVmaW5pdGlvbjogPC9zdHJvbmc+JHtpLmRlZmluaXRpb259PC9kaXY+DQogICAgICAgICAgICBgDQogICAgICAgICAgICB9ZWxzZSBpZiggZGF0YWNsYXNzID09InZhciIpew0KICAgICAgICAgICAgICAgICBodG1sSW5mbz1gDQogICAgICAgICAgICA8ZGl2PjxzdHJvbmc+R2VuZSBJRDogPC9zdHJvbmc+JHtnZW5lTmFtZX08L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+PHN0cm9uZz5TcGVjaWVzOiA8L3N0cm9uZz4ke2xhdGluTmFtZX0gKCR7Y29tbW9uTmFtZX0pPC9kaXY+DQogICAgICAgICAgICA8ZGl2PlZhcmlhbnQgTnVtYmVyOiAke2kuc25wTnVtPjA/aS5zbnBOdW06Ii0ifTwvZGl2Pg0KICAgICAgICAgICAgPGRpdj5WYXJpYW50IExpc3Q6ICR7aS5zbnBMaXN0PT1udWxsPyItIjppLnNucExpc3Quc2xpY2UoMCwyKX0ke2kuc25wTGlzdCE9PW51bGwmJmkuc25wTGlzdC5sZW5ndGg+Mj8iLi4uIjoiIn08L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+Q29uc2VxdWVuY2UgVHlwZTogJHtpLnZvQW5ub3RhaW9ufTwvZGl2Pg0KICAgICAgICAgICAgPGRpdj5FZmZlY3Q6ICR7aS52b0NsYXNzaWZpY2F0aW9ufTwvZGl2Pg0KDQogICAgICAgICAgICBgDQogICAgICAgICAgICB9ZWxzZSBpZiggZGF0YWNsYXNzID09ImV4cHJlc3Npb24iKXsNCiAgICAgICAgICAgICAgICBodG1sSW5mbz1gDQogICAgICAgICAgICA8ZGl2PjxzdHJvbmc+R2VuZSBJRDogPC9zdHJvbmc+JHtnZW5lTmFtZX08L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+PHN0cm9uZz5TcGVjaWVzOiA8L3N0cm9uZz4ke2xhdGluTmFtZX0gKCR7Y29tbW9uTmFtZX0pPC9kaXY+DQogICAgICAgICAgICA8ZGl2PkV4cHJlc3Npb24gUHJvamVjdCBOdW1iZXI6ICR7aS5wcmpOdW0+MD9pLnByak51bToiLSJ9PC9kaXY+DQogICAgICAgICAgICA8ZGl2PkJpb3Byb2plY3QgTGlzdDogJHtpLnByakxpc3Q9PW51bGw/Ii0iOmkucHJqTGlzdC5zbGljZSgwLDIpfSR7aS5wcmpMaXN0IT09bnVsbCYmaS5wcmpMaXN0Lmxlbmd0aD4yPyIuLi4iOiIifTwvZGl2Pg0KICAgICAgICAgICAgPGRpdj5FeHByZXNzaW9uIENsYXNzaWZpY2F0aW9uOiAke2kuZW9DbGFzc2lmaWNhdGlvbn08L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+RXhwcmVzc2lvbiBBbm5vdGF0aW9uOiAke2kuZW9Bbm5vdGF0aW9ufTwvZGl2Pg0KICAgICAgICAgICAgYA0KICAgICAgICAgICAgfWVsc2Ugew0KICAgICAgICAgICAgICAgIGh0bWxJbmZvPWANCiAgICAgICAgICAgIDxkaXY+PHN0cm9uZz5HZW5lIElEOiA8L3N0cm9uZz4ke2dlbmVOYW1lfTwvZGl2Pg0KICAgICAgICAgICAgPGRpdj48c3Ryb25nPlNwZWNpZXM6IDwvc3Ryb25nPiR7bGF0aW5OYW1lfSAoJHtjb21tb25OYW1lfSk8L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+R3dhcyBOdW1iZXI6ICR7aS5nd2FzTnVtPjA/aS5nd2FzTnVtOiItIn08L2Rpdj4NCiAgICAgICAgICAgIDxkaXY+R3dhcyBMaXN0OiAke2kuZ3dhc0xpc3Q9PW51bGw/Ii0iOmkuZ3dhc0xpc3Quc2xpY2UoMCwyKX0ke2kuZ3dhc0xpc3QhPT1udWxsJiZpLmd3YXNMaXN0Lmxlbmd0aD4yPyIuLi4iOiIifTwvZGl2Pg0KICAgICAgICAgICAgPGRpdj5UcmFpdCBJRDogJHtpLnRyYWl0SWR9PC9kaXY+DQogICAgICAgICAgICA8ZGl2PlRyYWl0IE5hbWU6ICR7aS50cmFpdE5hbWV9PC9kaXY+DQogICAgICAgICAgICBgDQogICAgICAgICAgICB9DQogICAgICAgICAgICBsZXQgcG9zX3k9ZC5wYWdlWSsyMDsNCiAgICAgICAgICAgIGxldCBXSURUSD0zNTANCiAgICAgICAgICAgIGxldCBwb3NfeD1kLnBhZ2VYKzIwOw0KICAgICAgICAgICAgaWYocG9zX3grV0lEVEg+ZC5jbGllbnRYKXsNCiAgICAgICAgICAgICAgICBwb3NfeC09V0lEVEgNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdG9vbHRpcC5pbnRlcnJ1cHQoKS5zdHlsZSgiZGlzcGxheSIsICJibG9jayIpLmh0bWwoaHRtbEluZm8pDQogICAgICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwiMC44IikNCiAgICAgICAgICAgICAgICAuc3R5bGUoImJvcmRlciIsIm5vbmUiKQ0KICAgICAgICAgICAgICAgIC5zdHlsZSgndGV4dC1hbGlnbicsJ2xlZnQnKQ0KICAgICAgICAgICAgICAgIC5zdHlsZSgndG9wJywgcG9zX3krInB4IikNCiAgICAgICAgICAgICAgICAuc3R5bGUoJ2xlZnQnLHBvc194KyJweCIpDQogICAgICAgICAgICAgICAgLnN0eWxlKCd3aWR0aCcsV0lEVEgrInB4IikNCiAgICAgICAgfSkNCiAgICAgICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHRvb2x0aXAuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpDQogICAgICAgIH0pDQogICAgICAgIA0KICAgICAgICAub24oImNsaWNrIiwgZnVuY3Rpb24oZCxpKXsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8g5pS55Y+Y5b2T5YmN6IqC54K555qE6aKc6ImyDQogICAgICAgICAgICAvLyBsZXQgY2xhc3NpZmljYXRpb249dGhpcy5nZW5lQmFzaWNJbmZvLnNwZWNpZXNOYW1lLmNsYXNzaWZpY2F0aW9uOw0KICAgICAgICAgICAgaWYoZGF0YWNsYXNzPT0idmFyIil7DQogICAgICAgICAgICAgICAgLy8g5oGi5aSN5LiK5LiA5qyh54K55Ye755qE6IqC54K56aKc6ImyDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYoaS5zbnBMaXN0Lmxlbmd0aD4wKXsNCiAgICAgICAgICAgICAgICAgICAgaWYoaS5vcGFjaXR5PjApew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoT2JqZWN0LmtleXMoX3RoaXMucmVjdERhdGFfdmFyKS5pbmRleE9mKCJvcGFjaXR5Iik+LTEpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdChfdGhpcy5mb3JtZXJSZWN0X3Zhcikuc3R5bGUoImZpbGwiLCJyZ2JhKDE0MSwxOTIsMjUyLCIrKF90aGlzLnJlY3REYXRhX3Zhci5vcGFjaXR5KzAuMikrIikiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8g5pu05paw5LiK5qyh6IqC54K55Li65pys5qyh54K55Ye755qE6IqC54K55Y+K5pWw5o2uDQogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5mb3JtZXJSZWN0X3Zhcj10aGlzOw0KICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVjdERhdGFfdmFyPWk7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuc3R5bGUoImZpbGwiLCAiIzNDQjM3MSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudmFyTG9hZGluZz10cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2hvd1ZhckluZm9UYWJsZT10cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGFTb3VyY2U9aS5kYXRhU291cmNlOw0KDQogICAgICAgICAgICAgICAgICAgIF90aGlzLiRheGlvcy5nZXQoImh0dHBzOi8vbmdkYy5jbmNiLmFjLmNuL2hhcGkvYXBpL3NwZWNpZXMtZ3dhc1ZhciIse3BhcmFtczp7J3RheG9uSWQnOiB0YXhvbmlkMTIsImhkYklkIjpoZGJpZH19KS50aGVuKHJlc3BvbnNlPT57DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBnd2FzaWTmmK/nlKjmnaXliqDpk77mjqXnmoTvvIx2YXJpZOWKoOWIsGd2beeahOmTvuaOpQ0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGd3YXNpZD1yZXNwb25zZS5kYXRhLmd3YXNPcmdpZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBnd2FzR2VuZUlkPXJlc3BvbnNlLmRhdGEuZ3dhc0dlbmVJZDsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IEJBU0VQQVRIPSIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YVNvdXJjZSAhPSBudWxsICYmIGRhdGFTb3VyY2UubGVuZ3RoID4wICl7DQogICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhU291cmNlLmluZGV4T2YoInYyIik+MCl7QkFTRVBBVEg9Imh0dHBzOi8vbmdkYy5jbmNiLmFjLmNuL2d2bVJFU1RWMi92Mi92YXJpYW50cy9nZXRsaXN0P2RhdGFTb3VyY2U9In0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7QkFTRVBBVEg9Imh0dHBzOi8vbmdkYy5jbmNiLmFjLmNuL2d2bVJFU1RWMy92Mi92YXJpYW50cy9nZXRsaXN0P2RhdGFTb3VyY2U9In0NCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNucEFsbD1pLnNucExpc3Quam9pbignLCcpDQogICAgICAgICAgICAgICAgICAgICAgICBpZihCQVNFUEFUSC5sZW5ndGg+MCl7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgUEFUSD1CQVNFUEFUSCtkYXRhU291cmNlKyImc25wbGlzdD0iK3NucEFsbCsiJmdlbmVJZD0iK2d3YXNHZW5lSWQ7DQogICAgICAgICAgICAgICAgICAgICAgICBpZihpLnNucExpc3QubGVuZ3RoPjApew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRheGlvcy5nZXQoUEFUSCkudGhlbihyZXNwb25zZT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNob3dWYXJJbmZvVGFibGU9dHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHRhYmxl57uR5a6a6L+U5Zue55qEc25w5pWw5o2uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnZhckxpc3Q9W107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEgIT0gbnVsbCl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy52YXJMaXN0PXJlc3BvbnNlLmRhdGEuc25wOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IobGV0IGl0ZW0gb2YgdHJlc3BvbnNlLmRhdGEuc25wKXt9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKF90aGlzLnZhckxpc3QubGVuZ3RoKXtfdGhpcy52YXJMaXN0PXJlc3BvbnNlLmRhdGEuc25wO31lbHNle190aGlzLnZhckxpc3Q9W3Jlc3BvbnNlLmRhdGEuc25wXTt9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaXRlbSBvZiBfdGhpcy52YXJMaXN0KXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwb3M9aXRlbS5jaHJvbSsiOiIraXRlbS5wb3NpdGlvbjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhbGxlbGU9aXRlbS5yZWZhbGxlbGUrIi8iK2l0ZW0uYWxsZWxlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hZj1pdGVtLm1hZisiOiIraXRlbS5tYWZmcmVxLnNsaWNlKDAsNyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2xhc3NzbnA9IlNOUCI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmZpbmFscG9zaXRpb249cG9zOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2l0ZW0ucG9zaXRpb249cG9zOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2l0ZW0uYWxsZWxlPWFsbGVsZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pdGVtLm1hZj1tYWY7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmZpbmFsYWxsZWxlPWFsbGVsZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZmluYWxtYWY9bWFmOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zbnBDbGFzc0lkPWNsYXNzc25wOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5nd2FzaWQ9Z3dhc2lkOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5hbGxlbGVDaGFuZ2U9aXRlbS5nZW5lLnNvdXJjZUFsbGVsZSsiPT4iK2l0ZW0uZ2VuZS50YXJnZXRBbGxlbGU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnJlc2lkdWVDaGFuZ2U9aXRlbS5nZW5lLnNvdXJjZVJlc2lkdWUrIj0+IitpdGVtLmdlbmUudGFyZ2V0UmVzaWR1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEFycmF5LmlzQXJyYXkoaXRlbS5nZW5lKSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGdlbmVOYW1lPVtdDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnNlcXVlbmNlX3R5cGU9W10NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGdlbmVpdGVtIG9mIGl0ZW0uZ2VuZSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVOYW1lLnB1c2goZ2VuZWl0ZW0uZ2VuZW5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnNlcXVlbmNlX3R5cGUuaW5kZXhPZihnZW5laXRlbS5jb25zZXF0eXBlKT09LTEpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc2VxdWVuY2VfdHlwZS5wdXNoKGdlbmVpdGVtLmNvbnNlcXR5cGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5nZW5lTmFtZT1nZW5lTmFtZS5qb2luKCIsIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jb25zZXF0eXBlPWNvbnNlcXVlbmNlX3R5cGUuam9pbigiLCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5nZW5lTmFtZT1pdGVtLmdlbmUuZ2VuZW5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNvbnNlcXR5cGU9aXRlbS5nZW5lLmNvbnNlcXR5cGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy52YXJMb2FkaW5nPWZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfX1lbHNlIGlmKGRhdGFjbGFzcz09ImdvIil7DQogICAgICAgICAgICAgICAgaWYoaS5nb0xpc3QubGVuZ3RoPjApew0KICAgICAgICAgICAgICAgICAgICBpZihPYmplY3Qua2V5cyhfdGhpcy5yZWN0RGF0YV9nbykuaW5kZXhPZigib3BhY2l0eSIpPi0xKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdChfdGhpcy5mb3JtZXJSZWN0X2dvKS5zdHlsZSgiZmlsbCIsInJnYmEoMTQxLDE5MiwyNTIsIisoX3RoaXMucmVjdERhdGFfZ28ub3BhY2l0eSswLjIpKyIpIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8g5pu05paw5LiK5qyh6IqC54K55Li65pys5qyh54K55Ye755qE6IqC54K55Y+K5pWw5o2uDQogICAgICAgICAgICAgICAgICAgIF90aGlzLmZvcm1lclJlY3RfZ289dGhpczsNCiAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVjdERhdGFfZ289aTsNCiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLnN0eWxlKCJmaWxsIiwgIiMzQ0IzNzEiKTsNCiAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIGkuZ29MaXN0ID09ICJzdHJpbmciKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmdvSW5mb0RhdGE9W2ldDQogICAgICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxpc3Q9aS5nb0xpc3Quam9pbigiLCIpDQogICAgICAgICAgICAgICAgICAgICAgICBpLmdvTGlzdD1saXN0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ29JbmZvRGF0YT1baV0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5nb0luZm9EYXRhLmdvTGlzdD1saXN0Z28NCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2hvd0dvVGFibGU9dHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9ZWxzZSBpZihkYXRhY2xhc3M9PSJ0cmFpdCIpew0KICAgICAgICAgICAgICAgIGlmKGkuZ3dhc0xpc3QubGVuZ3RoPjApew0KICAgICAgICAgICAgICAgICAgICBpZihPYmplY3Qua2V5cyhfdGhpcy5yZWN0RGF0YV90cmFpdCkuaW5kZXhPZigib3BhY2l0eSIpPi0xKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdChfdGhpcy5mb3JtZXJSZWN0X3RyYWl0KS5zdHlsZSgiZmlsbCIsInJnYmEoMTQxLDE5MiwyNTIsIisoX3RoaXMucmVjdERhdGFfdHJhaXQub3BhY2l0eSswLjIpKyIpIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8g5pu05paw5LiK5qyh6IqC54K55Li65pys5qyh54K55Ye755qE6IqC54K55Y+K5pWw5o2uDQogICAgICAgICAgICAgICAgICAgIF90aGlzLmZvcm1lclJlY3RfdHJhaXQ9dGhpczsNCiAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVjdERhdGFfdHJhaXQ9aTsNCiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLnN0eWxlKCJmaWxsIiwgIiMzQ0IzNzEiKTsNCg0KICAgICAgICAgICAgICAgICAgICBfdGhpcy5nb2xvYWRpbmc9dHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2hvd1RyYWl0VGFibGU9dHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGd3YXNsaXN0PWkuZ3dhc0xpc3Quam9pbigiLCIpDQogICAgICAgICAgICAgICAgICAgIC8vIHRoaXMudHJhaXREYXRhPVtpXQ0KICAgICAgICAgICAgICAgICAgICBfdGhpcy4kYXhpb3MuZ2V0KCJodHRwczovL25nZGMuY25jYi5hYy5jbi9oYXBpL2FwaS9zcGVjaWVzLWd3YXNvcmciLHtwYXJhbXM6eyd0YXhvbklkJzogdGF4b25pZDEyLCJoZGJJZCI6aGRiaWR9fSkudGhlbihyZXNwb25zZT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGd3YXNpZD1yZXNwb25zZS5kYXRhLmd3YXNPcmdpZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBnd2FzR2VuZUlkPXJlc3BvbnNlLmRhdGEuZ3dhc0dlbmVJZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRheGlvcy5nZXQoImh0dHBzOi8vbmdkYy5jbmNiLmFjLmNuL2dhcGkvZ3dhcy9nd2FzaWRzP2d3YXNJZD0iK2d3YXNsaXN0KyImb3JnYW5pc21JZD0iK2d3YXNpZCsiJm9mZnNldD0wJnBhZ2VzaXplPTEwJnRvdGFsPTEwJmdlbmVJZD0iK2d3YXNHZW5lSWQpDQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXNEYXJhPXJlc3BvbnNlLmRhdGENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGl0ZW0gb2YgcmVzRGFyYSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZ3dhc0dlbmVJZD1nd2FzR2VuZUlkOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnRvcHRyYWl0TmFtZT1pLnRyYWl0TmFtZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudHJhaXREYXRhPXJlc0RhcmE7DQogICAgICAgICAgICAgICAgICAgICAgICB9KS5maW5hbGx5KCgpPT57DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ29sb2FkaW5nPWZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTsNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH1lbHNlIGlmKGRhdGFjbGFzcz09ImV4cHJlc3Npb24iKXsNCiAgICAgICAgICAgICAgICBpZihpLnByakxpc3QubGVuZ3RoPjApew0KICAgICAgICAgICAgICAgICAgICBpZihPYmplY3Qua2V5cyhfdGhpcy5yZWN0RGF0YV9leHApLmluZGV4T2YoIm9wYWNpdHkiKT4tMSl7DQogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoX3RoaXMuZm9ybWVyUmVjdF9leHApLnN0eWxlKCJmaWxsIiwicmdiYSgxNDEsMTkyLDI1MiwiKyhfdGhpcy5yZWN0RGF0YV9leHAub3BhY2l0eSswLjIpKyIpIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8g5pu05paw5LiK5qyh6IqC54K55Li65pys5qyh54K55Ye755qE6IqC54K55Y+K5pWw5o2uDQogICAgICAgICAgICAgICAgICAgIF90aGlzLmZvcm1lclJlY3RfZXhwPXRoaXM7DQogICAgICAgICAgICAgICAgICAgIF90aGlzLnJlY3REYXRhX2V4cD1pOw0KICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuc3R5bGUoImZpbGwiLCAiIzNDQjM3MSIpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2hvd0V4cEluZm9UYWJsZT10cnVlOw0KICAgICAgICAgICAgICAgICAgICBfdGhpcy5leHBsb2FkaW5nPXRydWU7DQogICAgICAgICAgICAgICAgICAgIGxldCBwcmpsaXN0PWkucHJqTGlzdC5qb2luKCcsJykNCiAgICAgICAgICAgICAgICAgICAgbGV0IFBBVEg9Imh0dHBzOi8vbmdkYy5jbmNiLmFjLmNuL2dlbi9hcGkvanNvbi9nZW5lL2V4cHJlc3Npb25zP3RheG9ub215SWQ9IitpLnRheG9uSWQrIiZhY2Nlc3Npb249IitpLmdlbmVJZCsiJmJpb1Byb2plY3RJZD0iK3Byamxpc3QNCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGF4aW9zLmdldChQQVRIKS50aGVuKHJlc3BvbnNlPT57DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXhwZGF0YT1yZXNwb25zZS5kYXRhLnJlc3VsdC5leHByZXNzaW9uUHJvZmlsZXM7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgQWxsZXhwVGFibGVkYXRhPVtdOw0KICAgICAgICAgICAgICAgICAgICAgICAvLyDlvqrnjq9wcm9qZWN077yM5q+P5LiqcHJvamVjdOeul3Rpc3N1ZeW5s+Wdh+WAvA0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrZXlhYSBpbiBleHBkYXRhICl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGV4cFRhYmxlZGF0YT1bXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJqTGlzdD1leHBkYXRhW2tleWFhXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleHBOdW09MDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXQgc2FtcGxlTnVtPTA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g55So5LqO5a2Y5YKo5b2T5YmNcHJvamVjdOacieWTquS6m3Rpc3N1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aXNzdWU9e307DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBsb3REYXRhPVtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwbHB0VGlzc3VlPVtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOW+queOr3Byb2plY3Tph4zpnaLnmoTlgLzvvIzliIZ0aXNzdWXorqHnrpflubPlnYflgLwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGl0ZW0gb2YgcHJqTGlzdCl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNhbXBsZU51bSArPSAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBOdW0gKz0gaXRlbS50cG07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpdGVtVGlzc3VlPWl0ZW0udGlzc3VlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihPYmplY3Qua2V5cyh0aXNzdWUpLmluZGV4T2YoaXRlbVRpc3N1ZSkgPT0gLTEgKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpc3N1ZVtpdGVtVGlzc3VlXT1bZXhwTnVtXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxwdFRpc3N1ZS5wdXNoKGl0ZW1UaXNzdWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlzc3VlW2l0ZW1UaXNzdWVdLnB1c2goZXhwTnVtKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgdGlzc3VlTmFtZSBpbiB0aXNzdWUpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWVMaXN0PXRpc3N1ZVt0aXNzdWVOYW1lXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsc3VtPWV2YWwodmFsdWVMaXN0LmpvaW4oIisiKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGV4cEF2Zz0odmFsc3VtL3ZhbHVlTGlzdC5sZW5ndGgpLnRvRml4ZWQoNCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGl0ZW09ew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInByb2plY3RJZCI6a2V5YWEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidGlzc3VlIjp0aXNzdWVOYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImV4cEF2ZyI6TnVtYmVyKGV4cEF2ZyksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZ2VuZUlkIjppLmdlbmVJZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJnZW5lTmFtZSI6aS5nZW5lSWQrICIgKCIrZ2VuZU5hbWUrIikiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdlbmVTeW1ib2wiOmdlbmVOYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdlbk9yZ0lkIjppLmdlbk9yZ2lkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInRheG9uSWQiOmkudGF4b25JZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzcGVjaWVzTmFtZSI6bGF0aW5OYW1lKyAiICgiK2NvbW1vbk5hbWUrIikiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxvdERhdGEucHVzaChleHBBdmcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBUYWJsZWRhdGEucHVzaChpdGVtKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGl0ZW0gb2YgZXhwVGFibGVkYXRhKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5wbG90RGF0YT1wbG90RGF0YTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5wbHB0VGlzc3VlPXBscHRUaXNzdWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbGV4cFRhYmxlZGF0YT1BbGxleHBUYWJsZWRhdGEuY29uY2F0KGV4cFRhYmxlZGF0YSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmV4cGxvYWRpbmc9ZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vcmlleHBUYWJsZWRhdGE9QWxsZXhwVGFibGVkYXRhOw0KICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXhwVGFibGVkYXRhPUFsbGV4cFRhYmxlZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgDQogICAgfSkNCn0sDQogICAgaGlsaWd0RGJDb2xzKHtyb3dJbmRleCwgY29sdW1uSW5kZXh9KXsNCiAgICAgICAgaWYocm93SW5kZXg9PT0wICYmIGNvbHVtbkluZGV4Pj02KXsNCiAgICAgICAgICAgIHJldHVybiAiY29sb3I6ICNmZmY7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDkyLDE2NSwyMTQsMC43KSAhaW1wb3J0YW50Ig0KICAgICAgICB9DQogICAgfSwNCiAgICBmaWx0ZXJFeHBEYXJhKCl7DQogICAgICAgIHRoaXMuZXhwVGFibGVkYXRhPSB0aGlzLm9yaWV4cFRhYmxlZGF0YS5maWx0ZXIoaXRlbT0+ew0KICAgICAgICAgICAgcmV0dXJuIE51bWJlcihpdGVtLmV4cEF2Zyk+TnVtYmVyKHRoaXMuZmlsdGVyVmFsdWUpDQogICAgICAgIH0pDQogICAgfSwNCiAgICBzaG93T3JpRXhwKCl7DQogICAgICAgIHRoaXMuZXhwVGFibGVkYXRhPSB0aGlzLm9yaWV4cFRhYmxlZGF0YQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZDpmdW5jdGlvbiAoKSB7DQogICAgLy8gaWYod2luZG93Lm1hdGNoTWVkaWEoIihtYXgtd2lkdGg6IDc2N3B4KSIpLm1hdGNoZXMpew0KICAgIC8vICAgICB0aGlzLndpbmRvd1NpemU9MTsNCiAgICAvLyAgICBjb25zb2xlLmxvZygi6L+Z5piv5LiA5Liq56e75Yqo6K6+5aSH44CCIik7DQoNCiAgICAvLyB9ZWxzZSBpZih3aW5kb3cubWF0Y2hNZWRpYSgiKG1heC13aWR0aDogOTkycHgpIikubWF0Y2hlcyl7DQogICAgLy8gICAgIHRoaXMud2luZG93U2l6ZT0yOw0KICAgIC8vICAgICBjb25zb2xlLmxvZygi6L+Z5piv5bmz5p2/55S16ISR5oiW5Y+w5byP55S16ISR44CCIik7DQoNCiAgICAvLyB9ZWxzZXsNCiAgICAvLyAgICAgdGhpcy53aW5kb3dTaXplPTM7DQogICAgLy8gICAgIGNvbnNvbGUubG9nKCLlpKflsY8iKTsNCiAgICAvLyB9DQoNCiAgICAvLyBsZXQgbG9hZGluZ1NlcnZpY2UgPSBMb2FkaW5nLnNlcnZpY2Uoew0KICAgIC8vICAgICBsb2NrOiB0cnVlLA0KICAgIC8vICAgICB0ZXh0OiAnTG9hZGluZycsDQogICAgLy8gICAgIHNwaW5uZXI6ICdlbC1pY29uLWxvYWRpbmcnLA0KICAgIC8vICAgICBiYWNrZ3JvdW5kOiAncmdiYSgwLCAwLCAwLCAwLjcpJywNCiAgICAvLyAgICAgZnVsbHNjcmVlbjp0cnVlDQogICAgLy8gfSk7DQogICAgbGV0IGhkYklkID0gdGhpcy4kcm91dGUucXVlcnkuaGRiSWQ7DQogICAgLy8g5p+l6K+iZ2/vvIx2YXLvvIx0cmFpdOmcgOimgWVuc2VtYmwgZ2VuZSBpZA0KICAgIGxldCB0YXhvbklkPXRoaXMuJHJvdXRlLnF1ZXJ5LnRheG9uSWQ7DQogICAgLy8gbGV0IGVuc2VtYmxHZW5lSWQ7DQogICAgdGhpcy4kYXhpb3MNCiAgICAvLyDojrflj5ZnZW5lIGJhc2ljIGluZm/nmoTmjqXlj6PvvIznm67liY3mmK/mn6Xor6JlbnRyZXogaWQNCiAgICAvLyDov5Tlm57kuKTkuKpsaXN05pWw5o2u77yMMOaYr2diaWluZm/vvIwx5pivb3J0aG9saXN0DQogICAgICAuZ2V0KCdodHRwczovL25nZGMuY25jYi5hYy5jbi9oYXBpL2FwaS9nZW5lLWRldGFpbCcse3BhcmFtczogeydoZGJJZCc6IGhkYklkLCAndGF4b25pZCc6IHRheG9uSWR9fSkNCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5sb2FkaW5nPWZhbHNlOw0KICAgICAgICBsZXQgZ2VuZWRldGFpbCA9IHJlc3BvbnNlLmRhdGFbMF07DQogICAgICAgIHRoaXMuZ2VuZUJhc2ljSW5mbz1nZW5lZGV0YWlsWzBdOw0KICAgICAgICAvLyBlbnNlbWJsR2VuZUlkPXRoaXMuZ2VuZUJhc2ljSW5mby5lbnNlbWJsR2VuZUlkOw0KICAgICAgICBsZXQgb3J0aG9MaXN0ID0gcmVzcG9uc2UuZGF0YVsxXTsNCiAgICAgICAgLy8gdGhpcy5nb0JzaWNMaXN0PXJlc3BvbnNlLmRhdGFbMl07DQogICAgICAgIC8vIOe7mOWItuWIneWni+eDreWbvg0KICAgIC8vICAgIGdlbmVTeW1ib2w9Z2VuZWRldGFpbFswXS5nZW5lU3ltYm9sOw0KICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IGdlbmVkZXRhaWw7DQogICAgICAgIC8vIOWtmOWCqOWQjOa6kOaVsOaNrg0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIGxldCBvcnRobz1bXQ0KICAgICAgICBsZXQgaGRibGlzdD1bXQ0KICAgICAgICBjb25zb2xlLmxvZygib3J0aG9MaXN0OiIsb3J0aG9MaXN0KTsNCiAgICAgICAgZm9yKGxldCBpdGVtIG9mICBvcnRob0xpc3Qpew0KICAgICAgICAgICAgaWYoaXRlbS5vcnRob1Bvc2l0aW9uPT0xKXsNCiAgICAgICAgICAgICAgICBsZXQgY29tbW9uTmFtZSA9IGl0ZW0uY29tbW9uTmFtZTE/aXRlbS5jb21tb25OYW1lMToiLSI7DQogICAgICAgICAgICAgICAgbGV0IGVuc2VtYmxJZCA9IGl0ZW0uZW5zZW1ibElkMT9pdGVtLmVuc2VtYmxJZDE6Ii0iOw0KICAgICAgICAgICAgICAgIGxldCB1bmlwcm90SWQ9IGl0ZW0udW5pcHJvdElkMT9pdGVtLnVuaXByb3RJZDE6Ii0iOw0KICAgICAgICAgICAgICAgIGxldCBlbnNlbWJsR2VuZUlkID0gaXRlbS5lbnNtZWJsR2VuZUlkMT9pdGVtLmVuc21lYmxHZW5lSWQxOiItIjsNCiAgICAgICAgICAgICAgICBsZXQgZW50cmV6SWQ9aXRlbS5lbnRyZXpJZDE/aXRlbS5lbnRyZXpJZDE6Ii0iOw0KICAgICAgICAgICAgICAgIGxldCBnZW5lU3ltYm9sPWl0ZW0uZ2VuZVN5bWJvbDE/aXRlbS5nZW5lU3ltYm9sMToiLSI7DQogICAgICAgICAgICAgICAgbGV0IGhkYkdlbmVJZD1pdGVtLmhkYkdlbmVJZDE/aXRlbS5oZGJHZW5lSWQxOiItIjsNCiAgICAgICAgICAgICAgICBsZXQgdGF4SWQ9aXRlbS50YXhJZDE/aXRlbS50YXhJZDE6Ii0iOw0KICAgICAgICAgICAgICAgIGxldCBleHBHZW5lSWQ9aXRlbS5leHBHZW5lSWQxOw0KICAgICAgICAgICAgICAgIGxldCBzaG9ydE5hbWU9aXRlbS5zaG9ydE5hbWUxOw0KICAgICAgICAgICAgICAgIGxldCBkYkV2aWRlbmNlPWl0ZW0uZGJFdmlkZW5jZTsNCiAgICAgICAgICAgICAgICBsZXQgZnJvbURiPWl0ZW0uZnJvbURiOw0KICAgICAgICAgICAgICAgIGxldCBsYXRpbk5hbWU9aXRlbS5sYXRpbk5hbWUxDQogICAgICAgICAgICAgICAgbGV0IG9ydGhvaXRlbT17DQogICAgICAgICAgICAgICAgICAgICJjb21tb25OYW1lIjpjb21tb25OYW1lLA0KICAgICAgICAgICAgICAgICAgICAiZW5zZW1ibElkIjplbnNlbWJsSWQsDQogICAgICAgICAgICAgICAgICAgICJ1bmlwcm90SWQiOnVuaXByb3RJZCwNCiAgICAgICAgICAgICAgICAgICAgImVudHJleklkIjplbnRyZXpJZCwNCiAgICAgICAgICAgICAgICAgICAgImdlbmVTeW1ib2wiOmdlbmVTeW1ib2wsDQogICAgICAgICAgICAgICAgICAgICJoZGJHZW5lSWQiOmhkYkdlbmVJZCwNCiAgICAgICAgICAgICAgICAgICAgInRheElkIjp0YXhJZCwNCiAgICAgICAgICAgICAgICAgICAgImRiRXZpZGVuY2UiOmRiRXZpZGVuY2UsDQogICAgICAgICAgICAgICAgICAgICJmcm9tRGIiOmZyb21EYiwNCiAgICAgICAgICAgICAgICAgICAgInNob3J0TmFtZSI6c2hvcnROYW1lLA0KICAgICAgICAgICAgICAgICAgICAibGF0aW5OYW1lIjpsYXRpbk5hbWUsDQogICAgICAgICAgICAgICAgICAgICJleHBHZW5lSWQiOmV4cEdlbmVJZCwNCiAgICAgICAgICAgICAgICAgICAgImVuc2VtYmxHZW5lSWQiOmVuc2VtYmxHZW5lSWQsDQogICAgICAgICAgICAgICAgICAgICJpbnBhcmFub2lkSUQxIjppdGVtLmlucGFyYW5vaWRJRDEsDQogICAgICAgICAgICAgICAgICAgICJpbnBhcmFub2lkSUQyIjppdGVtLmlucGFyYW5vaWRJRDIsDQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gbGV0IGRiQ29udGVudD1bXTsNCiAgICAgICAgICAgICAgICBsZXQgZGJDb250ZW50PWZyb21EYi5zcGxpdCgnLCcpDQogICAgICAgICAgICAgICAgLy8gbGV0IHRyZWVmYW1saW5rPSJodHRwOi8vd3d3LnRyZWVmYW0ub3JnL2ZhbWlseS8iDQogICAgICAgICAgICAgICAgLy8gbGV0IGVnZ2xpbms9Imh0dHA6Ly9lZ2dub2c1LmVtYmwuZGUvIy9hcHAvcmVzdWx0cyNFTk9HNTAxIg0KICAgICAgICAgICAgICAgIC8vIGxldCBwYW50aGVybGluaz0iaHR0cDovL3d3dy5wYW50aGVyZGIub3JnL3BhbnRoZXIvZmFtaWx5LmRvP2Nsc0FjY2Vzc2lvbj0iDQogICAgICAgICAgICAgICAgLy8gbGV0IGlucGFyYWxpbms9Imh0dHBzOi8vaW5wYXJhbm9pZC5zYmMuc3Uuc2UvY2dpLWJpbi9lZmFzdGEuY2dpP2NsdXN0ZXI9Ig0KICAgICAgICAgICAgICAgIC8vIGRibGlzdC5mb3JFYWNoKGVsZW1lbnQgPT4gew0KICAgICAgICAgICAgICAgIC8vICAgICBsZXQgZGJOYW1lPWVsZW1lbnQuc3BsaXQoJzonKVswXTsNCiAgICAgICAgICAgICAgICAvLyAgICAgbGV0IGRiVmFsPWVsZW1lbnQuc3BsaXQoJzonKVsxXTsNCiAgICAgICAgICAgICAgICAvLyAgICAgaWYoZGJOYW1lPT0iVHJlZUZhbSIpew0KICAgICAgICAgICAgICAgIC8vICAgICAgICAgZGJDb250ZW50Kz0nPGEgdGFyZ2V0PSJfYmxhbmsiIDpocmVmPSInK3RyZWVmYW1saW5rK2RiVmFsKyciPicrZGJWYWwrJzwvYT4nDQogICAgICAgICAgICAgICAgLy8gICAgIH1lbHNlICBpZihkYk5hbWU9PSJlZ2dOT0ciKXsNCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRiQ29udGVudCs9JzxhIHRhcmdldD0iX2JsYW5rIiA6aHJlZj0iJytlZ2dsaW5rK2RiVmFsKyJfZGF0YW1lbnUiKyciPicrZGJWYWwrJzwvYT4nDQogICAgICAgICAgICAgICAgLy8gICAgIH1lbHNlIGlmKGRiTmFtZT09IlBhbnRoZXIiKXsNCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRiQ29udGVudCs9JzxhIHRhcmdldD0iX2JsYW5rIiA6aHJlZj0iJytwYW50aGVybGluaytkYlZhbCsnIj4nK2RiVmFsKyc8L2E+Jw0KICAgICAgICAgICAgICAgIC8vICAgICB9ZWxzZSBpZihkYk5hbWU9PSJJbnBhcmFub2lkIil7DQogICAgICAgICAgICAgICAgLy8gICAgICAgICBkYkNvbnRlbnQrPSc8YSB0YXJnZXQ9Il9ibGFuayIgOmhyZWY9IicraW5wYXJhbGluaytkYlZhbCsiJnNwZWNpZXMxPTI0MCZzcGVjaWVzMj00JmphdmE9MCIrJyI+JytkYlZhbCsnPC9hPicNCiAgICAgICAgICAgICAgICAvLyAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIH0pOw0KICAgICAgICAgICAgICAgIG9ydGhvaXRlbS5kYkNvbnRlbnQ9ZGJDb250ZW50Ow0KICAgICAgICAgICAgICAgIC8vIOWOu+mHje+8jOS/neWtmOWUr+S4gOeahGhkYmlkDQogICAgICAgICAgICAgICAgaWYoaGRibGlzdC5pbmRleE9mKGhkYkdlbmVJZCk9PS0xKXsNCiAgICAgICAgICAgICAgICAgICAgb3J0aG8ucHVzaChvcnRob2l0ZW0pDQogICAgICAgICAgICAgICAgICAgIGhkYmxpc3QucHVzaChoZGJHZW5lSWQpDQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICBsZXQgY29tbW9uTmFtZSA9IGl0ZW0uY29tbW9uTmFtZTI/aXRlbS5jb21tb25OYW1lMjoiLSI7DQogICAgICAgICAgICAgICAgbGV0IGVuc2VtYmxJZCA9IGl0ZW0uZW5zZW1ibElkMj9pdGVtLmVuc2VtYmxJZDI6Ii0iOw0KICAgICAgICAgICAgICAgIGxldCB1bmlwcm90SWQ9IGl0ZW0udW5pcHJvdElkMj9pdGVtLnVuaXByb3RJZDI6Ii0iOw0KICAgICAgICAgICAgICAgIGxldCBlbnNlbWJsR2VuZUlkID0gaXRlbS5lbnNtZWJsR2VuZUlkMj9pdGVtLmVuc21lYmxHZW5lSWQyOiItIjsNCiAgICAgICAgICAgICAgICBsZXQgZW50cmV6SWQ9aXRlbS5lbnRyZXpJZDI/aXRlbS5lbnRyZXpJZDI6Ii0iOw0KICAgICAgICAgICAgICAgIGxldCBnZW5lU3ltYm9sPWl0ZW0uZ2VuZVN5bWJvbDI/aXRlbS5nZW5lU3ltYm9sMjoiLSI7DQogICAgICAgICAgICAgICAgbGV0IGhkYkdlbmVJZD1pdGVtLmhkYkdlbmVJZDI/aXRlbS5oZGJHZW5lSWQyOiItIjsNCiAgICAgICAgICAgICAgICBsZXQgdGF4SWQ9aXRlbS50YXhJZDI/aXRlbS50YXhJZDI6Ii0iDQogICAgICAgICAgICAgICAgbGV0IGRiRXZpZGVuY2U9aXRlbS5kYkV2aWRlbmNlOw0KICAgICAgICAgICAgICAgIGxldCBmcm9tRGI9aXRlbS5mcm9tRGI7DQogICAgICAgICAgICAgICAgbGV0IHNob3J0TmFtZT1pdGVtLnNob3J0TmFtZTI7DQogICAgICAgICAgICAgICAgbGV0IGV4cEdlbmVJZD1pdGVtLmV4cEdlbmVJZDI7DQogICAgICAgICAgICAgICAgbGV0IGxhdGluTmFtZT1pdGVtLmxhdGluTmFtZTI7DQoNCiAgICAgICAgICAgICAgICBsZXQgZGJDb250ZW50PWZyb21EYi5zcGxpdCgnLCcpDQogICAgICAgICAgICAgICAgLy8gbGV0IGRibGlzdD1mcm9tRGIuc3BsaXQoJywnKQ0KICAgICAgICAgICAgICAgIC8vIGxldCB0cmVlZmFtbGluaz0iaHR0cDovL3d3dy50cmVlZmFtLm9yZy9mYW1pbHkvIg0KICAgICAgICAgICAgICAgIC8vIGxldCBlZ2dsaW5rPSJodHRwOi8vZWdnbm9nNS5lbWJsLmRlLyMvYXBwL3Jlc3VsdHMjRU5PRzUwMSINCiAgICAgICAgICAgICAgICAvLyBsZXQgcGFudGhlcmxpbms9Imh0dHA6Ly93d3cucGFudGhlcmRiLm9yZy9wYW50aGVyL2ZhbWlseS5kbz9jbHNBY2Nlc3Npb249Ig0KICAgICAgICAgICAgICAgIC8vIGxldCBpbnBhcmFsaW5rPSJodHRwczovL2lucGFyYW5vaWQuc2JjLnN1LnNlL2NnaS1iaW4vZWZhc3RhLmNnaT9jbHVzdGVyPSINCiAgICAgICAgICAgICAgICAvLyBkYmxpc3QuZm9yRWFjaChlbGVtZW50ID0+IHsNCiAgICAgICAgICAgICAgICAvLyAgICAgbGV0IGRiTmFtZT1lbGVtZW50LnNwbGl0KCc6JylbMF07DQogICAgICAgICAgICAgICAgLy8gICAgIGxldCBkYlZhbD1lbGVtZW50LnNwbGl0KCc6JylbMV07DQogICAgICAgICAgICAgICAgLy8gICAgIGlmKGRiTmFtZT09IlRyZWVGYW0iKXsNCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRiQ29udGVudCs9JzxhIHRhcmdldD0iX2JsYW5rIiA6aHJlZj0iJyt0cmVlZmFtbGluaytkYlZhbCsnIj4nK2RiVmFsKyc8L2E+Jw0KICAgICAgICAgICAgICAgIC8vICAgICB9ZWxzZSAgaWYoZGJOYW1lPT0iZWdnTk9HIil7DQogICAgICAgICAgICAgICAgLy8gICAgICAgICBkYkNvbnRlbnQrPSc8YSB0YXJnZXQ9Il9ibGFuayIgOmhyZWY9IicrZWdnbGluaytkYlZhbCsiX2RhdGFtZW51IisnIj4nK2RiVmFsKyc8L2E+Jw0KICAgICAgICAgICAgICAgIC8vICAgICB9ZWxzZSBpZihkYk5hbWU9PSJQYW50aGVyIil7DQogICAgICAgICAgICAgICAgLy8gICAgICAgICBkYkNvbnRlbnQrPSc8YSB0YXJnZXQ9Il9ibGFuayIgOmhyZWY9IicrcGFudGhlcmxpbmsrZGJWYWwrJyI+JytkYlZhbCsnPC9hPicNCiAgICAgICAgICAgICAgICAvLyAgICAgfWVsc2UgaWYoZGJOYW1lPT0iSW5wYXJhbm9pZCIpew0KICAgICAgICAgICAgICAgIC8vICAgICAgICAgZGJDb250ZW50Kz0nPGEgdGFyZ2V0PSJfYmxhbmsiIDpocmVmPSInK2lucGFyYWxpbmsrZGJWYWwrIiZzcGVjaWVzMT0yNDAmc3BlY2llczI9NCZqYXZhPTAiKyciPicrZGJWYWwrJzwvYT4nDQogICAgICAgICAgICAgICAgLy8gICAgIH0NCiAgICAgICAgICAgICAgICAvLyB9KTsNCiAgICAgICAgICAgICAgICAvLyBpdGVtLmRiQ29udGVudD1kYkNvbnRlbnQ7DQogICAgICAgICAgICAgICAgbGV0IG9ydGhvaXRlbT17DQogICAgICAgICAgICAgICAgICAgICJjb21tb25OYW1lIjpjb21tb25OYW1lLA0KICAgICAgICAgICAgICAgICAgICAiZW5zZW1ibElkIjplbnNlbWJsSWQsDQogICAgICAgICAgICAgICAgICAgICJ1bmlwcm90SWQiOnVuaXByb3RJZCwNCiAgICAgICAgICAgICAgICAgICAgImVudHJleklkIjplbnRyZXpJZCwNCiAgICAgICAgICAgICAgICAgICAgImdlbmVTeW1ib2wiOmdlbmVTeW1ib2wsDQogICAgICAgICAgICAgICAgICAgICJoZGJHZW5lSWQiOmhkYkdlbmVJZCwNCiAgICAgICAgICAgICAgICAgICAgInRheElkIjp0YXhJZCwNCiAgICAgICAgICAgICAgICAgICAgImRiRXZpZGVuY2UiOmRiRXZpZGVuY2UsDQogICAgICAgICAgICAgICAgICAgICJmcm9tRGIiOmZyb21EYiwNCiAgICAgICAgICAgICAgICAgICAgInNob3J0TmFtZSI6c2hvcnROYW1lLA0KICAgICAgICAgICAgICAgICAgICAibGF0aW5OYW1lIjpsYXRpbk5hbWUsDQogICAgICAgICAgICAgICAgICAgICJleHBHZW5lSWQiOmV4cEdlbmVJZCwNCiAgICAgICAgICAgICAgICAgICAgImVuc2VtYmxHZW5lSWQiOmVuc2VtYmxHZW5lSWQsDQogICAgICAgICAgICAgICAgICAgICdkYkNvbnRlbnQnOmRiQ29udGVudCwNCiAgICAgICAgICAgICAgICAgICAgImlucGFyYW5vaWRJRDEiOml0ZW0uaW5wYXJhbm9pZElEMSwNCiAgICAgICAgICAgICAgICAgICAgImlucGFyYW5vaWRJRDIiOml0ZW0uaW5wYXJhbm9pZElEMiwNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gb3J0aG9pdGVtLmRiQ29udGVudD1kYkNvbnRlbnQ7DQogICAgICAgICAgICAgICAgaWYoaGRibGlzdC5pbmRleE9mKGhkYkdlbmVJZCk9PS0xKXsNCiAgICAgICAgICAgICAgICAgICAgb3J0aG8ucHVzaChvcnRob2l0ZW0pDQogICAgICAgICAgICAgICAgICAgIGhkYmxpc3QucHVzaChoZGJHZW5lSWQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgIH0NCiAgICAgICAgdGhpcy50YWJsZU9ydGhvTGlzdD1vcnRobzsNCiAgICAgICAgY29uc29sZS5sb2coInRoaXMudGFibGVPcnRob0xpc3Q6Iix0aGlzLnRhYmxlT3J0aG9MaXN0KTsNCiAgICAgICAgdGhpcy5vcnRob0luZm89b3J0aG87DQogICAgICAgIC8vICAg5bCG5aSa5Liq57uT5p6c5ZCI5bm25oiQ5LiA5LiqDQogICAgICAgIGlmKGdlbmVkZXRhaWwubGVuZ3RoPjEpew0KICAgICAgICAgICAgbGV0IG9iaj1nZW5lZGV0YWlsWzBdDQogICAgICAgICAgICBmb3IobGV0IGo9MTtqPD0gZ2VuZWRldGFpbC5sZW5ndGg7aisrKXsNCiAgICAgICAgICAgICAgICBsZXQgb2JqMj1nZW5lZGV0YWlsW2pdOw0KICAgICAgICAgICAgICAgIGZvcihsZXQga2V5IGluIG9iajIpew0KICAgICAgICAgICAgICAgICAgICBpZihrZXkgIT09ICJzcGVjaWVzTmFtZSIpew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYob2JqW2tleV0gIT09IG9iajJba2V5XSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1ZhbCA9b2JqW2tleV0rICIsIitvYmoyW2tleV0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpba2V5XT1uZXdWYWwNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmdlbmVCYXNpY0luZm89b2JqOw0KICAgICAgICAgICAgDQogICAgICAgIH0NCiAgICAgICAgY29uc29sZS5sb2coInRoaXMuZ2VuZUJhc2ljSW5mbzoiLHRoaXMuZ2VuZUJhc2ljSW5mbyk7DQogICAgfSkuZmluYWxseSgoKT0+ew0KICAgICAgICB0aGlzLmZ1bGxMb2FkaW5nPWZhbHNlOw0KICAgICAgICBsZXQgc3ZnX2hlaWdodD00ODA7DQogICAgICAgIC8vIGxldCBnZW5lTmFtZT0iRU5TR0FMRzAwMDAwMDIzNDQzIg0KICAgICAgICBsZXQgc3BlY05hbWU9dGhpcy5nZW5lQmFzaWNJbmZvLnNwZWNpZXNOYW1lLnNob3J0TmFtZTsNCiAgICAgICAgbGV0IGxhdGluTmFtZT10aGlzLmdlbmVCYXNpY0luZm8uc3BlY2llc05hbWUubGF0aW5OYW1lOw0KICAgICAgICBsZXQgY29tbW9uTmFtZT10aGlzLmdlbmVCYXNpY0luZm8uc3BlY2llc05hbWUuY29tbW9uTmFtZTsNCiAgICAgICAgLy8gbGV0IGhkYmlkPXRoaXMuZ2VuZUJhc2ljSW5mby5oZGJHZW5lSWQ7DQogICAgICAgIGxldCBzeW1ib2w7DQogICAgICAgIGlmKHRoaXMuZ2VuZUJhc2ljSW5mby5nZW5lU3ltYm9sLmxlbmd0aD4wKXsNCiAgICAgICAgICAgIHN5bWJvbD10aGlzLmdlbmVCYXNpY0luZm8uZ2VuZVN5bWJvbDsNCiAgICAgICAgfWVsc2V7DQogICAgICAgICAgICBzeW1ib2w9dGhpcy5nZW5lQmFzaWNJbmZvLmVuc2VtYmxHZW5lSWQ7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5jbGFzc2lmaWNhdGlvbj10aGlzLmdlbmVCYXNpY0luZm8uc3BlY2llc05hbWUuY2xhc3NpZmljYXRpb247DQogICAgICAgIHRoaXMuJGF4aW9zLmdldCgnaHR0cHM6Ly9uZ2RjLmNuY2IuYWMuY24vaGFwaS9hcGkvZ2VuZS1kZXRhaWwtZ28tMScse3BhcmFtczogeydoZGJJZCc6IGhkYklkfX0pLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEubGVuZ3RoPjApew0KICAgICAgICAgICAgICAgIHRoaXMuZ29sb2FkaW5nPWZhbHNlOw0KICAgICAgICAgICAgICAgIC8vIHRoaXMuZ29MaXN0PXJlc3BvbnNlLmRhdGENCiAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLmxlbmd0aD4wKXsNCiAgICAgICAgICAgICAgICBsZXQgc3ZnQ29udGFpbmVyID0gZDMuc2VsZWN0KCIjc3ZnLWNvbnRhaW5lci1nbyIpLmFwcGVuZCgic3ZnIikuYXR0cigid2lkdGgiLCAiMTQ1MHB4IikuYXR0cigiaGVpZ2h0Iiwgc3ZnX2hlaWdodCs2MCkuYXR0cignaWQnLCAnc3ZnY29udGFpbmVyLWdvJyk7DQogICAgICAgICAgICAgICAgdGhpcy5kcmF3R29SZWN0Q2hhcnQocmVzcG9uc2UuZGF0YSxzdmdDb250YWluZXIsImdvIixzcGVjTmFtZSxsYXRpbk5hbWUsY29tbW9uTmFtZSxzeW1ib2wsdGhpcy5nZW5lQmFzaWNJbmZvLnRheG9uSWQsdGhpcy5nZW5lQmFzaWNJbmZvLmhkYkdlbmVJZCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIHRoaXMuJGF4aW9zLmdldCgnaHR0cHM6Ly9uZ2RjLmNuY2IuYWMuY24vaGFwaS9hcGkvZ2VuZS1kZXRhaWwtdmFyLTEnLHtwYXJhbXM6IHsnaGRiSWQnOiBoZGJJZH19KS50aGVuKHJlc3BvbnNlPT57DQogICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLmxlbmd0aD4wKXsNCiAgICAgICAgICAgIGxldCBzdmdDb250YWluZXIgPSBkMy5zZWxlY3QoIiNzdmctY29udGFpbmVyLXZhciIpLmFwcGVuZCgic3ZnIikuYXR0cigid2lkdGgiLCAiOTglIikuYXR0cigiaGVpZ2h0Iiwgc3ZnX2hlaWdodCkuYXR0cignaWQnLCAnc3ZnY29udGFpbmVyLXZhcicpOw0KICAgICAgICAgICAgdGhpcy5kcmF3R29SZWN0Q2hhcnQocmVzcG9uc2UuZGF0YSxzdmdDb250YWluZXIsInZhciIsc3BlY05hbWUsbGF0aW5OYW1lLGNvbW1vbk5hbWUsc3ltYm9sLHRoaXMuZ2VuZUJhc2ljSW5mby50YXhvbklkLHRoaXMuZ2VuZUJhc2ljSW5mby5oZGJHZW5lSWQpDQogICAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC8vIGxldCB0cmFpdEdlbmVOYW1lPSJPczA1ZzA1NTYzMDAiDQogICAgICAgIHRoaXMuJGF4aW9zLmdldCgnaHR0cHM6Ly9uZ2RjLmNuY2IuYWMuY24vaGFwaS9hcGkvZ2VuZS1kZXRhaWwtdHJhaXQtMScse3BhcmFtczogeydoZGJJZCc6IGhkYklkfX0pLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgICAgIGxldCBzdmdDb250YWluZXIgPSBkMy5zZWxlY3QoIiNzdmctY29udGFpbmVyLXRyYWl0IikuYXBwZW5kKCJzdmciKS5hdHRyKCJ3aWR0aCIsICI5OCUiKS5hdHRyKCJoZWlnaHQiLCBzdmdfaGVpZ2h0KS5hdHRyKCdpZCcsICdzdmdjb250YWluZXItdHJhaXQnKTsNCiAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEubGVuZ3RoPjApew0KICAgICAgICAgICAgICAgIHRoaXMuZHJhd0dvUmVjdENoYXJ0KHJlc3BvbnNlLmRhdGEsc3ZnQ29udGFpbmVyLCJ0cmFpdCIsc3BlY05hbWUsbGF0aW5OYW1lLGNvbW1vbk5hbWUsc3ltYm9sLHRoaXMuZ2VuZUJhc2ljSW5mby50YXhvbklkLHRoaXMuZ2VuZUJhc2ljSW5mby5oZGJHZW5lSWQpDQogICAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIHRoaXMuJGF4aW9zLmdldCgnaHR0cHM6Ly9uZ2RjLmNuY2IuYWMuY24vaGFwaS9hcGkvc3BlY2llcy1saXN0Jyx7cGFyYW1zOiB7J3RheG9uSWQnOiAiIit0YXhvbklkfX0pLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgICAgIHRoaXMuc3BlY2llcz1yZXNwb25zZS5kYXRhDQogICAgICAgIH0pDQogICAgICAgIHRoaXMuJGF4aW9zLmdldCgnaHR0cHM6Ly9uZ2RjLmNuY2IuYWMuY24vaGFwaS9hcGkvZ2VuZS1kZXRhaWwtZXhwcmVzc2lvbi0xJyx7cGFyYW1zOiB7J2hkYklkJzogaGRiSWQsJ2NsYXNzaWZpY2F0aW9uJzp0aGlzLmNsYXNzaWZpY2F0aW9ufX0pLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgICAgIGxldCBzdmdDb250YWluZXIgPSBkMy5zZWxlY3QoIiNzdmctY29udGFpbmVyLWV4cHJlc3Npb24iKS5hcHBlbmQoInN2ZyIpLmF0dHIoIndpZHRoIiwgIjE0NTBweCIpLmF0dHIoImhlaWdodCIsIHN2Z19oZWlnaHQpLmF0dHIoJ2lkJywgJ3N2Z2NvbnRhaW5lci1leHByZXNzaW9uJyk7DQogICAgICAgICAgICAvLyB0aGlzLnNwZWNpZXM9cmVzcG9uc2UuZGF0YQ0KICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5sZW5ndGg+MCl7DQogICAgICAgICAgICAgICAgdGhpcy5kcmF3R29SZWN0Q2hhcnQocmVzcG9uc2UuZGF0YSxzdmdDb250YWluZXIsImV4cHJlc3Npb24iLHNwZWNOYW1lLGxhdGluTmFtZSxjb21tb25OYW1lLHN5bWJvbCx0aGlzLmdlbmVCYXNpY0luZm8udGF4b25JZCx0aGlzLmdlbmVCYXNpY0luZm8uaGRiR2VuZUlkKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgIH0pDQoNCg0KICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCB0aGlzLndhdGNoU2Nyb2xsKTsNCiAgICAvLyB0aGlzLmdldFRhYmxlTWF4SGVpZ2h0KCk7DQogICAgLy8gbGV0IF90aGlzID0gdGhpczsNCiAgICAvLyB3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbiAoKSB7Ly/nlKjkuo7kvb/ooajmoLzpq5jluqboh6rpgILlupTnmoTmlrnms5UNCiAgICAvLyAgICAgX3RoaXMuZ2V0VGFibGVNYXhIZWlnaHQoKTsvL+iOt+WPluWuueWZqOW9k+WJjemrmOW6pu+8jOmHjeiuvuihqOagvOeahOacgOWkp+mrmOW6pg0KICAgIC8vIH0NCiAgfSwNCg0KfQ0K"},{"version":3,"sources":["gene-detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAskBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"gene-detail.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n<div class=\"table-container\" onscroll=\"menuScroll()\">\r\n    <HeaderBar />\r\n    <Banner />\r\n    <!-- <Navigator />    -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\" class=\"arrow-title\">\r\n        <el-breadcrumb-item :to=\"{ path: '/' }\">Browse</el-breadcrumb-item>\r\n        <el-breadcrumb-item :to=\"{ path: '/gene' }\">Homologous Gene</el-breadcrumb-item>\r\n        <el-breadcrumb-item>Gene Detail</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <el-container style=\"border: 1px solid #eee;margin-top: 15px;\">\r\n        <el-aside width=\"240px\" style=\"background-color: aliceblue;overflow-y: auto;\">\r\n            <!-- <img src=\"../assets/img/arrow1.png\" style=\"width:100%;vertical-align:top;margin:10px 0;\"> -->\r\n            <el-menu\r\n                default-active=\"1\"\r\n                :class=\"navBarFixed == true ? 'navBarWrap' :''\"\r\n                background-color=\"#545c64\"\r\n                text-color=\"#fff\"\r\n                active-text-color=\"#409EFF\"\r\n                style=\"text-align: left;\"\r\n                width=\"100%\"\r\n                @select=\"selectMenu\">\r\n            <el-menu-item index=\"1\">\r\n                <i class=\"el-icon-chat-line-square\"></i>\r\n                <span slot=\"title\">Gene Basic Informations</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"2\">\r\n                <i class=\"el-icon-chat-line-square\"></i>\r\n                <span slot=\"title\">Homologous Gene</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"3\">\r\n                <i class=\"el-icon-chat-line-square\"></i>\r\n                <span slot=\"title\">Gene Ontology</span>\r\n            </el-menu-item>\r\n\r\n\r\n            <el-menu-item index=\"4\">\r\n                <i class=\"el-icon-chat-line-square\"></i>\r\n                <span slot=\"title\">Variants</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"5\">\r\n                <i class=\"el-icon-chat-line-square\"></i>\r\n                <span slot=\"title\">Traits</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"6\">\r\n                <i class=\"el-icon-chat-line-square\"></i>\r\n                <span slot=\"title\">Expression</span>\r\n            </el-menu-item>\r\n            <!-- <el-menu-item index=\"7\">\r\n                <i class=\"el-icon-chat-line-square\"></i>\r\n                <span slot=\"title\">Sequence Viewer</span>\r\n            </el-menu-item> -->\r\n        </el-menu>\r\n        </el-aside>\r\n         <!-- </div> -->\r\n\r\n    <div class=\"tables\" style=\"overflow:hidden\" v-loading=\"fullLoading\">\r\n\r\n        <div class=\"info-div\">\r\n            <div class=\"basic-info\" id=\"item-pos-1\" >\r\n            <!-- <el-card style=\"width:99%;margin: auto;\" shadow=\"none\"> -->\r\n                <!-- <h2 class=\"b-info\">Gene Basic Information</h2> -->\r\n                <div class=\"var-box var-infoBox\">\r\n                    <h3 class=\"var-title\">Gene Basic Information</h3>\r\n                </div>\r\n                <el-card class=\"card-border\">\r\n                    <el-descriptions :column=\"3\" class=\"descriptions\" :size=\"size\"  v-if=\"JSON.stringify(geneBasicInfo) !=='{}'\">\r\n                        <el-descriptions-item label=\"Ensembl Gene ID\">\r\n                            <div>\r\n                                <div v-if='geneBasicInfo.ensemblGeneId!==\"-\"'>\r\n                                    <a target=\"_blank\" v-if=\"tax_Plant.indexOf(String(geneBasicInfo.taxonId))==-1\" :href=\"'https://ensembl.org/Multi/Search/Results?q='+geneBasicInfo.ensemblGeneId+';site=ensembl'\">{{geneBasicInfo.ensemblGeneId}}</a>\r\n                                    <a target=\"_blank\" v-else :href=\"'https://plants.ensembl.org/Multi/Search/Results?q='+geneBasicInfo.ensemblGeneId+';site=ensembl'\">{{geneBasicInfo.ensemblGeneId}}</a>\r\n                                </div>\r\n                                <div v-if='geneBasicInfo.ensemblGeneId==\"-\"' >-</div>\r\n                            </div>\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item label=\"Entrez Gene ID\"><a target=\"_blank\" :href=\"'https://www.ncbi.nlm.nih.gov/gene/?term='+geneBasicInfo.entrezGene\">{{geneBasicInfo.entrezGene}}</a>\r\n                        <!-- <img :src=\"linkIcon\" style=\"width:18px;height:18px;margin-left:5px\"> -->\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item label=\"Refseq ID\">\r\n                            <a v-if=\"geneBasicInfo.refseqId!=='-'\" target=\"_blank\" :href=\"'https://www.ncbi.nlm.nih.gov/nuccore/'+geneBasicInfo.refseqId\">{{geneBasicInfo.refseqId}}</a>\r\n                            <div v-else>{{geneBasicInfo.refseqId}}</div>\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item label=\"Uniprot ID\">\r\n                            <a :href=\"'https://www.uniprot.org/uniprot/'+geneBasicInfo.uniprotId\" target='_blank'>{{geneBasicInfo.uniprotId}}</a>\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item label=\"Ensembl Protein ID\">\r\n                            <div>\r\n                                <div v-if='geneBasicInfo.ensemblProteinId!==\"-\"'>\r\n                                    <a target=\"_blank\" v-if=\"tax_Plant.indexOf(String(geneBasicInfo.taxonId))==-1\" :href=\"'https://ensembl.org/Multi/Search/Results?q='+geneBasicInfo.ensemblProteinId+';site=ensembl'\">{{geneBasicInfo.ensemblProteinId}}</a>\r\n                                    <a target=\"_blank\" v-else :href=\"'https://plants.ensembl.org/Multi/Search/Results?q='+geneBasicInfo.ensemblProteinId+';site=ensembl'\">{{geneBasicInfo.ensemblProteinId}}</a>\r\n                                </div>\r\n                                <div v-if='geneBasicInfo.ensemblProteinId==\"-\"' >-</div>\r\n                            </div>\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item label=\"Gene Synonym\">\r\n                            <div v-if=\"geneBasicInfo.geneSynonym!==''&& geneBasicInfo.geneSynonym\">{{geneBasicInfo.geneSynonym}}</div>\r\n                            <div v-else>-</div>\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item label=\"Gene Symbol\" width=\"50px\">\r\n                            <div v-if=\"geneBasicInfo.geneSymbol!==''&& geneBasicInfo.geneSymbol\">{{geneBasicInfo.geneSymbol}}</div>\r\n                            <div v-else>-</div>\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item label=\"Gene Type\">{{geneBasicInfo.geneType}}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"Latin Name\">{{geneBasicInfo.speciesName.latinName}}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"Species Common Name\">{{geneBasicInfo.speciesName.commonName}}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"Taxon ID\">{{geneBasicInfo.speciesName.taxonId}}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"Chromosom\">{{geneBasicInfo.chromosom}}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"Gene Start\">{{geneBasicInfo.geneStart}}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"Gene End\">{{geneBasicInfo.geneEnd}}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"Gene Description\">{{geneBasicInfo.geneDescription}}</el-descriptions-item>\r\n                    </el-descriptions>\r\n                </el-card>\r\n        </div>\r\n        <!-- <el-divider></el-divider> -->\r\n        <div id=\"item-pos-2\">\r\n            <!-- <div class=\"p-ele top-p-ele\"><span class=\"style_categoryLabel__3AJmg style_gene__1pSX1 style_pageCategory__1ur8P\" >Gene Ortholog Informations</span></div> -->\r\n            <div class=\"var-box var-infoBox\">\r\n                <h3 class=\"var-title\">Homologous Gene</h3>\r\n            </div>\r\n            <el-card class=\"card-border\">\r\n                <div class=\"filt-div\">\r\n                    <el-select v-model=\"form.species.ortho\" multiple placeholder=\"Filter by species\" class=\"filt-spe-select\">\r\n                        <!-- <el-option label=\"Org1\" value=\"shanghai\"></el-option>\r\n                        <el-option label=\"Org2\" value=\"beijing\"></el-option> -->\r\n                        <el-option\r\n                            v-for=\"item in species\"\r\n                            :key=\"item.value\"\r\n                            :label=\"item.label\"\r\n                            :value=\"item.value\"\r\n                            >\r\n                        </el-option>\r\n                    </el-select>\r\n                    <el-button icon=\"el-icon-search\"  type=\"success\"  plain id=\"filter-search\" @click=\"searchFilter(form.species.ortho)\">Filter</el-button>\r\n                    <el-button icon=\"el-icon-delete\"  type=\"primary\"  plain id=\"filter-search\" @click=\"clearFilter()\">Clear</el-button>\r\n                </div>\r\n                <!-- </el-card> -->\r\n            <el-table\r\n                :data=\"tableOrthoList\"\r\n                class=\"info-table\"\r\n                v-loading=\"loading\"\r\n                :max-height=\"tableHeight\"\r\n                :border=\"false\"\r\n                :default-sort = \"{prop: 'commonName', order: 'ascending'}\"\r\n                >\r\n                <!-- <el-table-column> -->\r\n                    <!-- <template slot-scope=\"scope\"> -->\r\n                    <el-table-column prop=\"commonName\" label=\"Species\" width=\"80px\"></el-table-column>\r\n                    <el-table-column prop=\"taxId\" label=\"Taxon ID\" width=\"80px\">\r\n                        <template slot-scope=\"scope\">\r\n                            <a :href=\"'https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?mode=Info&id='+scope.row.taxId+'&lvl=3&lin=f&keep=1&srchmode=1&unlock'\" target=\"_blank\" >\r\n                                {{ scope.row.taxId }}\r\n                            </a>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"geneSymbol\" label=\"Gene Symbol\"></el-table-column>\r\n                    <el-table-column prop=\"ensemblGeneId\" label=\"Ensembl ID\">\r\n                        <template slot-scope=\"scope\">\r\n                            <div>\r\n                                <div v-if='scope.row.ensemblGeneId!==\"-\"'>\r\n                                    <a target=\"_blank\" v-if=\"tax_Plant.indexOf(String(scope.row.taxId))==-1\" :href=\"'https://ensembl.org/Multi/Search/Results?q='+scope.row.ensemblGeneId+';site=ensembl'\">{{scope.row.ensemblGeneId}}</a>\r\n                                    <a target=\"_blank\" v-else :href=\"'https://plants.ensembl.org/Multi/Search/Results?q='+scope.row.ensemblGeneId+';site=ensembl'\">{{scope.row.ensemblGeneId}}</a>\r\n                                </div>\r\n                                <div v-if='scope.row.ensemblGeneId==\"-\"' >{{scope.row.ensemblGeneId}}</div>\r\n                            </div>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"entrezId\" label=\"Entrez ID\">\r\n                        <template slot-scope=\"scope\">\r\n                            <a :href=\"'https://www.ncbi.nlm.nih.gov/gene/?term='+scope.row.entrezId\" target='_blank'  v-if=\"scope.row.entrezId!=='-'\">\r\n                                {{ scope.row.entrezId }}\r\n                            </a>\r\n                            <div  v-if=\"scope.row.entrezId=='-'\">{{ scope.row.entrezId }}</div>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <!-- <el-table-column prop=\"geneSymbol\" label=\"Gene Symbol\"></el-table-column> -->\r\n                    <el-table-column prop=\"uniprotId\" label=\"Uniprot ID\">\r\n                        <template slot-scope=\"scope\">\r\n                            <a :href=\"'https://www.uniprot.org/uniprot/'+scope.row.uniprotId\" target='_blank'  v-if=\"scope.row.uniprotId!=='-'\">\r\n                                {{ scope.row.uniprotId }}\r\n                            </a>\r\n                            <div  v-if=\"scope.row.uniprotId=='-'\">{{ scope.row.uniprotId }}</div>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"ensemblId\" label=\"Ensembl Protein ID\" >\r\n                        <template slot-scope=\"scope\">\r\n                            <div>\r\n                                <div v-if='scope.row.ensemblGeneId!==\"-\"'>\r\n                                    <a target=\"_blank\" v-if=\"tax_Plant.indexOf(String(scope.row.taxId))==-1\" :href=\"'https://ensembl.org/Multi/Search/Results?q='+scope.row.ensemblId+';site=ensembl'\">{{scope.row.ensemblId}}</a>\r\n                                    <a target=\"_blank\" v-else :href=\"'https://plants.ensembl.org/Multi/Search/Results?q='+scope.row.ensemblId+';site=ensembl'\">{{scope.row.ensemblId}}</a>\r\n                                </div>\r\n                                <div  v-if=\"scope.row.ensemblId=='-'\">{{ scope.row.ensemblId }}</div>  \r\n                            </div>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column label=\"Data Source Count \"  width=\"150px\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-rate\r\n                                v-model=\"scope.row.dbEvidence.split(',').length\"\r\n                                disabled\r\n                                text-color=\"#ff9900\"\r\n                                score-template=\"{value}\">\r\n                            </el-rate>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column  label=\"Data Source\" align=\"center\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-popover\r\n                                placement=\"top\"\r\n                                title=\"Data Source\"\r\n                                width=\"200\"\r\n                                trigger=\"click\"\r\n                                :content=\"scope.row.dbContent\"\r\n                                >\r\n                                <template #reference>\r\n                                    <i class=\"el-icon-s-order\" slot=\"reference\"></i>\r\n                                </template>\r\n                                <template #default>\r\n                                    <div>{{scope.row.dbEvidence}}</div>\r\n                                    <div v-for=\"(item,index) of scope.row.dbContent\" :key=\"index\">\r\n                                        <div v-if=\"item.split(':')[0]=='Panther'\">\r\n                                            Panther:<a target=\"_blank\" :href=\"'http://www.pantherdb.org/panther/family.do?clsAccession='+item.split(':')[1]\" >{{item.split(':')[1]}}</a>\r\n                                        </div>\r\n                                        <div v-if=\"item.split(':')[0]=='TreeFam'\">\r\n                                            TreeFam:<a target=\"_blank\" :href=\"'http://www.treefam.org/family/'+item.split(':')[1]\" >{{item.split(':')[1]}}</a>\r\n                                        </div>\r\n                                        <div v-if=\"item.split(':')[0]=='eggNOG'\">\r\n                                            eggNOG:<a target=\"_blank\" :href=\"'http://eggnog5.embl.de/#/app/results?seqid='+scope.row.uniprotId+'&target_nogs=ENOG50'+item.split(':')[1]\" >{{item.split(':')[1]}}</a>\r\n                                        </div> \r\n                                        <div v-if=\"item.split(':')[0]=='Inparanoid'\">\r\n                                            Inparanoid:<a target=\"_blank\" :href=\"'https://inparanoid.sbc.su.se/cgi-bin/efasta.cgi?cluster='+item.split(':')[1].split(' ')[1]+'&species1='+scope.row.inparanoidID1+'&species2='+scope.row.inparanoidID2+'&java=0'\">{{item.split(':')[1]}}</a>\r\n                                        </div> \r\n                                    </div>\r\n                                </template>\r\n                            </el-popover>\r\n                            \r\n                        </template>\r\n                    </el-table-column>\r\n            </el-table>\r\n            </el-card>\r\n        </div>\r\n        <div id=\"item-pos-3\">\r\n            <div class=\"var-box var-infoBox\">\r\n                    <h3 class=\"var-title\">Gene Ontology</h3>\r\n            </div>\r\n        <!-- 提示信息不显示 -->\r\n    <el-card class=\"card-border draw-card\">\r\n        <!-- <el-tooltip content=\"Bottom center\" placement=\"hieranoid\" effect=\"light\">\r\n            <div><i class=\"el-icon-question question-icon\"></i></div>\r\n        </el-tooltip> -->\r\n\r\n        <div class=\"filt-div\">\r\n            <el-checkbox v-model=\"checked.go\" style=\"float:left\" class=\"filt-spe-select\" :disabled=\"waitResponse.go\" @change=\"compareOrthoGo(form.species.go)\">Compare Ortholog Genes</el-checkbox>\r\n                <el-select v-model=\"form.species.go\" multiple placeholder=\"Filter by species\" class=\"filt-spe-select\">\r\n                    <!-- <el-option label=\"Org1\" value=\"shanghai\"></el-option>\r\n                    <el-option label=\"Org2\" value=\"beijing\"></el-option> -->\r\n                    <el-option\r\n                        v-for=\"item in species\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                        >\r\n                    </el-option>\r\n                </el-select>\r\n            \r\n                <el-button icon=\"el-icon-search\"  type=\"success\"  plain id=\"filter-search\" @click=\"compareOrthoGo(form.species.go)\">Filter</el-button>\r\n                <el-button icon=\"el-icon-delete\"  type=\"primary\"  plain id=\"filter-search\" @click=\"clearOrthoGo()\">Clear</el-button>\r\n        </div>\r\n        <div class=\"filt-div\"></div>\r\n        <div id=\"svg-container-go\"></div>\r\n        <el-table \r\n            :data=\"goInfoData\"\r\n            id=\"subTable\"\r\n            max-height=\"500px\"\r\n            v-if=\"showGoTable\"\r\n            >\r\n            <el-table-column prop=\"goId\" label=\"GO ID\" align=\"center\" width=\"130px\"></el-table-column>\r\n            <el-table-column prop=\"goAnnotations\" label=\"GO Name\" align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"topClass\" label=\"GO classification\" align=\"center\" width=\"150px\"></el-table-column>\r\n            <el-table-column prop=\"goList\" label=\"Sub GO ID\" align=\"center\" ></el-table-column>\r\n            <el-table-column prop=\"definition\" label=\"GO Definition\" align=\"center\"></el-table-column>\r\n            \r\n                \r\n        </el-table>\r\n    </el-card>\r\n                   \r\n        </div>\r\n        <div id=\"item-pos-4\">\r\n            <div class=\"var-box var-infoBox\">\r\n                <h3 class=\"var-title\">Variants</h3>\r\n            </div>\r\n            <el-card class=\"card-border\">\r\n                <!-- <el-tooltip content=\"Bottom center\" placement=\"hieranoid\" effect=\"light\">\r\n                    <div><i class=\"el-icon-question question-icon\"></i></div>\r\n                </el-tooltip> -->\r\n                <div class=\"filt-div\">\r\n                <el-checkbox v-model=\"checked.var\" style=\"float:left\" class=\"filt-spe-select\" :disabled=\"waitResponse.var\" @change=\"compareOrthoVar(form.species.go)\">Compare Ortholog Genes</el-checkbox>\r\n                <el-select v-model=\"form.species.var\" multiple placeholder=\"Filter by species\" class=\"filt-spe-select\">\r\n                    <el-option\r\n                        v-for=\"item in species\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                        >\r\n                    </el-option>\r\n                </el-select>\r\n                <el-button icon=\"el-icon-search\"  type=\"success\"  plain id=\"filter-search\" @click=\"compareOrthoVar(form.species.var)\">Filter</el-button>\r\n                <el-button icon=\"el-icon-delete\"  type=\"primary\"  plain id=\"filter-search\" @click=\"clearOrthoVar()\">Clear</el-button>\r\n                </div>\r\n                <div id=\"svg-container-var\"></div>\r\n                <!-- 根据snplist取值的表 -->\r\n            <el-table\r\n                :data=\"varList\"\r\n                class=\"info-table\"\r\n                v-loading=\"varLoading\"\r\n                :border=\"false\"\r\n                v-if=\"showVarInfoTable\"\r\n                max-height=\"800px\"\r\n            >\r\n                <el-table-column\r\n                    prop=\"geneName\"\r\n                    label=\"Gene ID\"\r\n                    align=\"center\"\r\n                    >\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"gene.genealias\"\r\n                    label=\"Gene Symbol\"\r\n                    align=\"center\"\r\n                >\r\n                 <template slot-scope=\"scope\">\r\n                        <div v-if=\"scope.row.gene.genealias!==''&& scope.row.gene.genealias\">{{scope.row.gene.genealias}}</div>\r\n                        <div v-else>-</div>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"rsnpId\"\r\n                    label=\"Var ID\"\r\n                    align=\"center\">\r\n                    <template slot-scope=\"scope\">\r\n                        <a v-bind:href=\"'https://ngdc.cncb.ac.cn/gvm/snp/getSNPDetail?snpname='+scope.row.rsnpId+'&chrom='+scope.row.chrom+'&position='+scope.row.position+'&orgId='+scope.row.gwasid\" target='_blank'>\r\n                        {{ scope.row.rsnpId }}\r\n                        </a>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"finalposition\"\r\n                    label=\"Position\"\r\n                    align=\"center\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"finalallele\"\r\n                    label=\"Allele\"\r\n                    align=\"center\"\r\n                >\r\n                </el-table-column>\r\n               \r\n\r\n                <el-table-column\r\n                    prop=\"finalmaf\"\r\n                    label=\"MAF\"\r\n                    align=\"center\">\r\n                </el-table-column>\r\n              \r\n\r\n                <el-table-column\r\n                    prop=\"snpClassId\"\r\n                    label=\"Class\"\r\n                    align=\"center\">\r\n                </el-table-column>\r\n               \r\n                <el-table-column\r\n                    prop=\"conseqtype\"\r\n                    label=\"Consequence Type/Effect\"\r\n                    align=\"center\">\r\n                </el-table-column>\r\n                \r\n                <el-table-column\r\n                    prop=\"gene.cdnaPosition\"\r\n                    label=\"cDNA Position\"\r\n                    align=\"center\">\r\n                    <template slot-scope=\"scope\" >\r\n                        <div v-if=\"scope.row.gene.cdnaPosition=='0'||scope.row.gene.cdnaPosition=='-1'\">-</div>\r\n                        <div v-else >{{scope.row.gene.cdnaPosition}}</div>\r\n                    </template>\r\n                </el-table-column>\r\n                \r\n                <el-table-column\r\n                    prop=\"alleleChange\"\r\n                    label=\"Allele Change\"\r\n                    align=\"center\">\r\n                    <template slot-scope=\"scope\" >\r\n                        <div v-if=\"scope.row.alleleChange=='-=>-'\">-</div>\r\n                        <div v-else >{{scope.row.alleleChange}}</div>\r\n                    </template>\r\n                </el-table-column>\r\n                    \r\n                <el-table-column\r\n                    prop=\"gene.proteinpos\"\r\n                    label=\"Protein Position\"\r\n                    align=\"center\">\r\n                    <template slot-scope=\"scope\" >\r\n                        <div v-if=\"scope.row.gene.proteinpos=='0'||scope.row.gene.proteinpos=='-1'\">-</div>\r\n                        <div v-else >{{scope.row.gene.proteinpos}}</div>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"residueChange\"\r\n                    label=\"Residue Change\"\r\n                    align=\"center\">\r\n                    <template slot-scope=\"scope\" >\r\n                        <div v-if=\"scope.row.residueChange=='-=>-'\">-</div>\r\n                        <div v-else >{{scope.row.residueChange}}</div>\r\n                    </template>\r\n                </el-table-column>\r\n                \r\n                \r\n            </el-table>\r\n            </el-card>\r\n        </div>\r\n        <div id=\"item-pos-5\">\r\n                <!-- <p class=\"p-ele\"><span class=\"style_categoryLabel__3AJmg style_gene__1pSX1 style_pageCategory__1ur8P\" >Traits</span></p> -->\r\n            <div class=\"var-box var-infoBox var-box var-infoBox\">\r\n                <h3 class=\"var-title\">Traits</h3>\r\n            </div>\r\n                    <!-- 提示信息不显示 -->\r\n            <el-card class=\"card-border\">\r\n            <!-- <el-tooltip content=\"Bottom center\" placement=\"hieranoid\" effect=\"light\">\r\n                <div><i class=\"el-icon-question question-icon\"></i></div>\r\n            </el-tooltip> -->\r\n            <div class=\"filt-div\">\r\n            <el-checkbox v-model=\"checked.trait\" style=\"float:left\" class=\"filt-spe-select\" :disabled=\"waitResponse.trait\" @change=\"compareOrthoTrait(form.species.go)\">Compare Ortholog Genes</el-checkbox>\r\n            <el-select v-model=\"form.species.trait\" multiple placeholder=\"Filter by species\" class=\"filt-spe-select\">\r\n                <el-option\r\n                    v-for=\"item in species\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\"\r\n                    >\r\n                </el-option>\r\n            </el-select>\r\n            <el-button icon=\"el-icon-search\"  type=\"success\" plain id=\"filter-search\" @click=\"compareOrthoTrait(form.species.trait)\">Filter</el-button>\r\n            <el-button icon=\"el-icon-delete\"  type=\"primary\" plain id=\"filter-search\" @click=\"clearOrthoTrait()\">Clear</el-button>\r\n            </div>\r\n\r\n                <!-- </el-container> -->\r\n            <!-- </el-card> -->\r\n            <div id=\"svg-container-trait\"></div>\r\n            <!-- <el-table :data=\"traitData\" class=\"info-table\"  v-loading=\"goloading\" :border=\"false\" v-if=\"showTraitTable\">\r\n                <el-table-column  prop=\"traitName\" label=\"Trait Name\" align=\"center\"></el-table-column>\r\n                <el-table-column  prop=\"traitId\" label=\"Trait ID\" width=\"80px\" align=\"center\"></el-table-column>\r\n                <el-table-column  prop=\"definition\" label=\"Trait Definition\" align=\"center\"></el-table-column>\r\n                <el-table-column  prop=\"gwasList\" label=\"Gwas ID\" align=\"center\"></el-table-column>\r\n                \r\n            </el-table> -->\r\n            <el-table \r\n                :data=\"traitData\"\r\n                id=\"subTable\"\r\n                :row-style=\"{height: '0'}\"\r\n                max-height=\"800\"\r\n                v-loading=\"goloading\"\r\n                v-if=\"showTraitTable\"\r\n              >\r\n                \r\n                <el-table-column prop=\"toptraitName\" label=\"Trait Name\" align=\"center\"></el-table-column>\r\n                <el-table-column prop=\"gwasGeneId\" label=\"Gene ID\" align=\"center\"></el-table-column>\r\n                <el-table-column prop=\"varId\" label=\"Var ID\" align=\"center\">\r\n                  <template slot-scope=\"scope\">\r\n                    <a v-bind:href=\"'https://ngdc.cncb.ac.cn/gvm/snp/getSNPDetail?snpname='+scope.row.varId+'&chrom='+scope.row.chrom+'&position='+scope.row.endPos+'&orgId='+scope.row.orgId\" target='_blank'>\r\n                      {{ scope.row.varId }}\r\n                    </a>\r\n                  </template>\r\n                </el-table-column>\r\n                \r\n                <el-table-column prop=\"traitName\" label=\"Sub Trait Name\" align=\"center\"></el-table-column>\r\n                <el-table-column prop=\"speciesCommonName\" label=\"Species\" align=\"center\"></el-table-column>\r\n                <el-table-column prop=\"pmid\" label=\"Pubmed ID\" align=\"center\">\r\n                  <template slot-scope=\"scope\">\r\n                    <a v-bind:href=\"'https://pubmed.ncbi.nlm.nih.gov/'+scope.row.pmid\" target='_blank'>\r\n                      {{ scope.row.pmid }}\r\n                    </a>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"pvalue\" label=\"Pvalue\" align=\"center\"></el-table-column>\r\n              </el-table>\r\n            </el-card>\r\n        </div>\r\n        <div id=\"item-pos-6\">\r\n            <div class=\"var-box var-infoBox\">\r\n                    <h3 class=\" var-title\">Expression</h3>\r\n            </div>\r\n            <el-card class=\"card-border draw-card\">\r\n                    <!-- 提示信息不显示 -->\r\n\r\n                    <!-- <el-container direction=\"vertical\" > -->\r\n                        <!-- <el-tooltip content=\"Bottom center\" placement=\"hieranoid\" effect=\"light\">\r\n                            <div><i class=\"el-icon-question question-icon\"></i></div>\r\n                        </el-tooltip> -->\r\n                <div class=\"filt-div\">\r\n                <el-checkbox v-model=\"checked.expression\" style=\"float:left\" class=\"filt-spe-select\" :disabled=\"waitResponse.expression\" @change=\"compareOrthoExpre(form.species.go)\">Compare Ortholog Genes</el-checkbox>\r\n                <el-select v-model=\"form.species.expression\" multiple placeholder=\"Filter by species\" class=\"filt-spe-select\">\r\n                    <el-option\r\n                        v-for=\"item in species\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                        >\r\n                    </el-option>\r\n                </el-select>\r\n                <el-button icon=\"el-icon-search\"  type=\"success\" plain id=\"filter-search\" @click=\"compareOrthoExpre(form.species.expression)\">Filter</el-button>\r\n                <el-button icon=\"el-icon-delete\"  type=\"primary\" plain id=\"filter-search\" @click=\"clearOrthoExpre()\">Clear</el-button>\r\n                </div>\r\n                <div id=\"svg-container-expression\"></div>\r\n                <div class=\"filter-box\" v-if=\"showExpInfoTable\"> <div style=\"line-height:32px\">Filter TPM value > </div><el-input v-model=\"filterValue\" size=\"small\"  style=\"width:100px;\" @change=filterExpDara clearable></el-input></div>\r\n                <el-table :data=\"expTabledata\"  class=\"info-table\"  v-loading=\"exploading\" :border=\"false\" v-if=\"showExpInfoTable\" >\r\n                    <el-table-column  prop=\"geneId\" label=\"Gene ID\" align=\"center\">\r\n                        <template slot-scope=\"scope\">\r\n                            <a :href=\"'https://ngdc.cncb.ac.cn/gen/gene/'+scope.row.genOrgId+'/'+scope.row.geneId\" target='_blank'>\r\n                                {{ scope.row.geneId }}\r\n                            </a>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column  prop=\"projectId\" label=\"Bioproject ID\" align=\"center\">\r\n                        <template slot-scope=\"scope\">\r\n                            <a :href=\"'https://ngdc.cncb.ac.cn/gen/project/accession/'+scope.row.projectId\" target='_blank'>\r\n                                {{ scope.row.projectId }}\r\n                            </a>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column  prop=\"tissue\" label=\"Tissue\" align=\"center\"></el-table-column>\r\n                    <el-table-column  prop=\"expAvg\" label=\"Average TPM\" align=\"center\" sortable></el-table-column>\r\n                    <el-table-column label=\"Bar-plot\" align=\"center\" > \r\n                       <template slot-scope=\"scope\">\r\n                            <img\r\n                            :src=\"barplotIcon\"\r\n                            min-width=\"25\"\r\n                            height=\"25\"\r\n                            style=\"cursor:pointer !important\"\r\n                            slot=\"reference\"\r\n                            @click=showDetailExpression(scope.row)\r\n                            />\r\n                        </template>\r\n                  \r\n                    </el-table-column>\r\n                </el-table>\r\n            </el-card>\r\n        </div>\r\n        </div>\r\n    </div>\r\n    </el-container>\r\n    <!-- </el-card> -->\r\n    <FooterBar/>\r\n    <template>\r\n    <el-backtop\r\n      :bottom=\"100\"\r\n      style=\"z-index: 999;\"\r\n      class=\"backTop\"\r\n    >\r\n      <div\r\n        style=\"\r\n           {\r\n            height: 100%;\r\n            width: 100%;\r\n            box-shadow: 0 0 6px rgba(0, 0, 0, 0.12);\r\n            text-align: center;\r\n            line-height: 40px;\r\n            color: #1989fa;\r\n            border-radius: 50%;\r\n            background-color: white;\r\n          }\r\n        \"\r\n      >\r\n      <i class=\"el-icon-caret-top\"></i>\r\n      </div>\r\n    </el-backtop>\r\n    </template>\r\n</div>\r\n\r\n</template>\r\n<style src=\"../assets/css/gene-detail.css\" scoped></style>\r\n<script>\r\n// @ is an alias to /src\r\nimport HeaderBar from '@/components/HeaderBar.vue';\r\nimport FooterBar from '@/components/FooterBar.vue';\r\nimport Banner from \"@/components/banner.vue\";\r\nimport linkIcon from \"@/assets/img/icon/link-icon-4.svg\";\r\nimport barplotIcon from \"@/assets/img/icon/chart-bar.svg\";\r\n// import circle from \"@/assets/img/icon/circle.svg\";\r\nimport * as d3 from 'd3';\r\n// import { Loading } from 'element-ui';\r\nexport default {\r\n  name: 'GeneDetail',\r\n  components: {\r\n    // Navigator,\r\n    Banner,\r\n    HeaderBar,\r\n    FooterBar,\r\n\r\n  },\r\n  data(){\r\n      return {\r\n        tableData: [],\r\n        barplotIcon,\r\n        tabPosition:\"left\",\r\n        size:\"medium\",\r\n        geneBasicInfo:{},\r\n        orthoInfo:[],\r\n        tableOrthoList:[],\r\n        // goList:[],\r\n        varList:[],\r\n        loading:true,\r\n        goloading:true,\r\n        linkIcon,\r\n        dbEvidence:\"\",\r\n        form:{\"species\":{\"go\":\"\",\"ortho\":\"\",\"var\":\"\",\"trait\":\"\",\"expression\":\"\"}},\r\n        checked:{\"go\":\"\",\"var\":\"\",\"trait\":\"\",\"expression\":\"\"},\r\n        species:[],\r\n        navBarFixed:\"false\",\r\n        tableHeight:700,\r\n        tooltip:\"\",\r\n        showVarInfoTable:false,\r\n        waitResponse:{\"go\":false,\"var\":false,\"trait\":false,\"expression\":false},\r\n        clicked:{\"go\":false,\"var\":false,\"trait\":false,\"expression\":false},\r\n        classification:\"\",\r\n        windowSize:3,\r\n        fullLoading:true,\r\n        showGoTable:false,\r\n        goInfoData:[],\r\n        expTabledata:[],\r\n        showExpInfoTable:false,\r\n        exploading:false,\r\n        traitData:[],\r\n        showTraitTable:false,\r\n        filterValue:\"\",\r\n        varLoading:false,\r\n        formerRect_var:\"\",\r\n        rectData_var:{},\r\n        formerRect_trait:\"\",\r\n        rectData_trait:{},\r\n        formerRect_go:\"\",\r\n        rectData_go:{},\r\n        formerRect_exp:\"\",\r\n        rectData_exp:{},\r\n        dbContent:'',\r\n        tax_Plant:[\"3702\",\"3708\",\"4072\",\"3659\",\"3635\",\"3983\",\"4530\",\"3847\",\"42345\",\"3694\",\"4081\",\"4558\",\"4565\",\"29760\",\"4577\",\"4113\"]\r\n        }\r\n    },\r\n\r\n    methods: {\r\n      selectMenu(key){\r\n        // scrollIntoView() js原生方法，实现锚点滚动过渡\r\n        const target = document.querySelector(\"#item-pos-\"+key)\r\n        target.scrollIntoView({ behavior: 'smooth' })\r\n        // scrollTo() 把内容滚动到指定的坐标。减去导航高度的目的：导航用定位固定在顶部，如果不减去，导航栏会遮挡一部分内容\r\n        window.scrollTo(0, target.offsetTop)\r\n      },\r\n      searchFilter(key){\r\n        if(key.length>0){\r\n          let filterOrtho=this.tableOrthoList.filter(item=>{\r\n              return  key.indexOf(\"\"+item.taxId) >-1\r\n          })\r\n          this.tableOrthoList=filterOrtho;\r\n        }\r\n\r\n      },\r\n      clearFilter(){\r\n        this.form.species.ortho=[];\r\n        this.tableOrthoList=this.orthoInfo\r\n      },\r\n      compareOrthoGo(filtSpecies){\r\n        this.clearOrthoGo();\r\n        this.form.species.go=filtSpecies;\r\n        this.compareFuntion(\"go\",filtSpecies)\r\n      },\r\n      clearOrthoGo(){\r\n        this.cleatFunction('go')\r\n      },\r\n      compareOrthoVar(filtSpecies){\r\n        this.clearOrthoVar();\r\n        this.form.species.var=filtSpecies;\r\n        this.compareFuntion('var',filtSpecies)\r\n\r\n      },\r\n      clearOrthoVar(){\r\n        this.cleatFunction('var')\r\n      },\r\n      compareOrthoTrait(filtSpecies){\r\n        this.clearOrthoTrait();\r\n        this.form.species.trait=filtSpecies;\r\n        this.compareFuntion(\"trait\",filtSpecies)\r\n      },\r\n      clearOrthoTrait(){\r\n        this.cleatFunction('trait')\r\n      },\r\n      compareOrthoExpre(filtSpecies){\r\n        this.clearOrthoExpre();\r\n        this.form.species.expression=filtSpecies;\r\n        this.compareFuntion(\"expression\",filtSpecies)\r\n      },\r\n      clearOrthoExpre(){\r\n        this.cleatFunction('expression')\r\n      },\r\n      cleatFunction(key){\r\n\r\n        this.checked[key]=false;\r\n        this.clicked[key]=false;\r\n        let svgContainer=d3.select(\"#svgcontainer-\"+key)\r\n        d3.selectAll(\"#group_total_\"+key).remove()\r\n        if(key=='go'){svgContainer.attr('height','400')}else{\r\n            svgContainer.attr('height','300')\r\n        }\r\n        if(key=='var'){\r\n            this.showVarInfoTable=false;\r\n        }else if(key=='go'){\r\n            this.showGoTable=false;\r\n        }else if(key=='expression'){\r\n            this.showExpInfoTable=false;\r\n        }\r\n        this.waitResponse[key]=false;\r\n        this.form.species[key]=\"\";\r\n      },\r\n    //   点击show button 调用的函数\r\n      compareFuntion(key,filtSpecies){\r\n        let filterOrtho;\r\n        if(filtSpecies.length>0){\r\n            filterOrtho=this.orthoInfo.filter(item=>{\r\n                return  filtSpecies.indexOf(\"\"+item.taxId) >-1\r\n            })\r\n        }else{\r\n            filterOrtho=this.orthoInfo;\r\n        }\r\n        if(!this.clicked[key]){\r\n        this.clicked[key]=true;\r\n        this.checked[key]=true;\r\n        this.waitResponse[key]=true;\r\n        //   取当前table的同源基因，循环查询对应的数据，如果有的话，添加一行\r\n        let index=0;\r\n        let num=0;\r\n        for(let i=0;i<filterOrtho.length;i++){\r\n            let orthoItem=filterOrtho[i];\r\n            //   let classification=orthoItem.species.classification;\r\n            //   if(orthoItem.gbiInfo!=null){\r\n            let hdbId=orthoItem.hdbGeneId;\r\n            let symbol;\r\n            if(orthoItem.geneSymbol!==\"-\" & orthoItem.geneSymbol!==\"\"){\r\n                // symbol-ensemblgid-entrezid-hdbid\r\n                symbol =orthoItem.geneSymbol\r\n            }else if(orthoItem.ensemblId!==\"-\" & orthoItem.ensembId!==\"\"){\r\n                symbol=orthoItem.ensemblId;\r\n            }else if(orthoItem.entrezId!==\"-\" & orthoItem.entrezId!==\"\"){\r\n                symbol=orthoItem.entrezId;\r\n            }else{\r\n                symbol=orthoItem.hdbGeneId;\r\n            }\r\n           let taxonid=orthoItem.taxId\r\n            // let speciesName=orthoItem.commonName.slice(0,3)\r\n            let params= {'hdbId': hdbId}\r\n            if(key==\"expression\"){params= {'hdbId': hdbId,'classification':this.classification}}\r\n            this.$axios.get(\"https://ngdc.cncb.ac.cn/hapi/api/gene-detail-\"+key,{params:params})\r\n            .then(response=>{\r\n                if(response.data.length>0){\r\n                    num+=response.data.length;\r\n                    index += 1;\r\n                    let svgContainer=d3.select(\"#svgcontainer-\"+key)\r\n                    let tooltip=d3.select(\"#tooltip\")\r\n                    this.drawSubRectChart(response.data,svgContainer,key,index,tooltip,orthoItem.shortName,orthoItem.latinName,orthoItem.commonName, symbol,taxonid,orthoItem.hdbGeneId)\r\n                }\r\n                \r\n            })\r\n\r\n            //   }\r\n          }\r\n          setTimeout(() => {\r\n            if(num==0){\r\n                this.$message('No Annotation Data Here');\r\n            }\r\n          }, 1000);\r\n          \r\n        }\r\n      },\r\n      getTableMaxHeight(){\r\n        this.$nextTick(function () {\r\n        let box = document.querySelector(\".info-div\").attributes\r\n        let box_clientHeight = box[0].ownerElement.clientHeight;\r\n        this.tableHeight = box_clientHeight - 100;\r\n        })\r\n    },\r\n      watchScroll() {\r\n      var scrollTop =\r\n        window.pageYOffset ||\r\n        document.documentElement.scrollTop ||\r\n        document.body.scrollTop;\r\n      //  当滚动超过 288 时，实现吸顶效果\r\n      if (scrollTop > 288) {\r\n        this.navBarFixed = true;\r\n      } else {\r\n        this.navBarFixed = false;\r\n      }\r\n    },\r\nshowDetailExpression(value){\r\n    let prjId=value.projectId;\r\n    let taxonId=value.taxonId;\r\n    let geneId1=value.geneId;\r\n    // 仅从同源数据筛选会漏掉第一条数据，所以自己造一个第一条数据\r\n    let oriItem={\r\n        \"commonName\":this.geneBasicInfo.speciesName.commonName,\r\n        \"ensemblId\":this.geneBasicInfo.ensemblGeneId,\r\n        \"entrezId\":this.geneBasicInfo.entrezGene,\r\n        \"geneSymbol\":this.geneBasicInfo.geneSymbol,\r\n        \"hdbGeneId\":this.geneBasicInfo.hdbId,\r\n        \"latinName\":this.geneBasicInfo.speciesName.latinName,\r\n        \"taxId\":this.geneBasicInfo.speciesName.taxonId,\r\n    }\r\n    // 深拷贝，不改变原数据\r\n    let OrthoData1=JSON.parse(   JSON.stringify(this.tableOrthoList)   ) ;\r\n    \r\n    // 判断当前表格里的同源数据没有这一条，则加入\r\n    if((Object.keys(OrthoData1).indexOf(oriItem.ensemblId)==-1)&&taxonId==oriItem.taxId){OrthoData1.push(oriItem);}\r\n    let orthoData2=OrthoData1.filter(item=>{\r\n        if(item.taxId==taxonId && item.ensemblId!==geneId1 && item.geneSymbol !==geneId1){\r\n            return item\r\n        }\r\n    })\r\n    let orthoPlotDataList=[];\r\n    if(orthoData2.length>0){\r\n        for(let orthoGene of orthoData2){\r\n            // let geneId=orthoGene.ensemblId;\r\n            let expGeneId=orthoGene.expGeneId;\r\n            let geneName=orthoGene.ensemblId+\" (\"+orthoGene.geneSymbol+\")\";\r\n            let PATH=\"https://ngdc.cncb.ac.cn/gen/api/json/gene/expressions?taxonomyId=\"+taxonId+\"&accession=\"+expGeneId+\"&bioProjectId=\"+prjId\r\n            this.$axios.get(PATH).then(response=>{\r\n                let orthoPlotData={};\r\n                let expdata=response.data.result.expressionProfiles;\r\n                // 这里肯定是单个project\r\n                for(let keyaa in expdata ){\r\n                    let prjList=expdata[keyaa]\r\n                    let expNum=0;\r\n                    // let sampleNum=0;\r\n                    // 用于存储当前project有哪些tissue\r\n                    let tissue={};\r\n                    let plotData=[];\r\n                    let plptTissue=[];\r\n                    // 循环project里面的值，分tissue计算平均值\r\n                    for(let item of prjList){\r\n                        // sampleNum += 1;\r\n                        expNum += item.tpm;\r\n                        let itemTissue=item.tissue;\r\n                        if(Object.keys(tissue).indexOf(itemTissue) == -1 ){\r\n                            tissue[itemTissue]=[expNum]\r\n                            plptTissue.push(itemTissue)\r\n                        }else{\r\n                            tissue[itemTissue].push(expNum)\r\n                        }\r\n                    }\r\n                    for(let tissueName in tissue){\r\n                        let valueList=tissue[tissueName]\r\n                        let valsum=eval(valueList.join(\"+\"))\r\n                        let expAvg=(valsum/valueList.length).toFixed(4)\r\n                        plotData.push(expAvg);\r\n                    }\r\n                    orthoPlotData.geneId=geneName;\r\n                    orthoPlotData.ensemblId=orthoGene.ensemblId;\r\n                    orthoPlotData.geneSymbol=orthoGene.geneSymbol;\r\n                    orthoPlotData.plotData=plotData;\r\n                    orthoPlotData.plptTissue=plptTissue;\r\n                    orthoPlotDataList.push(orthoPlotData)\r\n                }\r\n                \r\n            })\r\n        }\r\n\r\n        \r\n    }\r\n    this.$alert(`\r\n        <div id=\"main\" style=\"width:1200px;height:550px\"></div>\r\n    `, {\r\n        dangerouslyUseHTMLString: true\r\n    })\r\n    setTimeout(() => {\r\n        this.drawBoxPlot(value,orthoPlotDataList)\r\n    }, 200);\r\n  },\r\ndrawBoxPlot(value,orthoValueList){\r\n    console.log(\"value:\",value);\r\n    let species=value.speciesName;\r\n    let xaxis=value.plptTissue;\r\n    let plotData=value.plotData;\r\n    let prjId=value.projectId;\r\n    let geneId=value.geneName;\r\n    let seriesData= [\r\n        {\r\n            name: geneId,\r\n            type: 'bar',\r\n            data: plotData,\r\n            barMaxWidth:'15%',\r\n            markPoint: {\r\n                data: [\r\n                { type: 'max', name: 'Max' },\r\n                { type: 'min', name: 'Min' }\r\n                ]\r\n            },\r\n        }\r\n    ]\r\n    let legentData={\r\n        data: [geneId],\r\n        top: '-1%',\r\n        left: '50%'\r\n    }\r\n    \r\n    let symbolList=[];\r\n    if(value.geneSymbol!==\"-\"){symbolList.push(value.geneSymbol)}\r\n    if(value.geneId!==\"-\"){symbolList.push(value.geneId)}\r\n    // let ensIDList=[value.geneId]\r\n    if(orthoValueList.length>0){\r\n        for(let orthoValue of  orthoValueList){\r\n            let s2Data=orthoValue.plotData;\r\n            let s2Gene=orthoValue.geneId;\r\n            let geneSymbol=orthoValue.geneSymbol;\r\n            let ensemblId=orthoValue.ensemblId;\r\n            if(symbolList.indexOf(geneSymbol)==-1 && symbolList.indexOf(ensemblId)==-1){\r\n                if(geneSymbol!==\"-\"){\r\n                    symbolList.push(geneSymbol);\r\n                }\r\n                // ensIDList.push(ensemblId);\r\n                let seriesItem= {\r\n                    name: s2Gene,\r\n                    type: 'bar',\r\n                    data: s2Data,\r\n                    barMaxWidth:'15%',\r\n                    markPoint: {\r\n                        data: [\r\n                        { type: 'max', name: 'Max' },\r\n                        { type: 'min', name: 'Min' }\r\n                        ]\r\n                    },\r\n                }\r\n                legentData.data.push(s2Gene)\r\n                seriesData.push(seriesItem)\r\n        }\r\n        }\r\n    }\r\n    let title=\"Expression of homologous gene in BioProject \"+prjId;\r\n    let subTitle=\"Species: \"+species;\r\n    let chartDom = document.getElementById('main');\r\n    let myChart = this.$echarts.init(chartDom);\r\n    let option;\r\n\r\n    option = {\r\n        title: {\r\n            text: title,\r\n            subtext:subTitle\r\n        },\r\n        tooltip: {\r\n            trigger: 'axis'\r\n        },\r\n        grid: {\r\n            left: '10%',\r\n            right: '10%',\r\n            top: '15%',\r\n            bottom:\"15%\"\r\n        },\r\n        legend: legentData,\r\n        toolbox: {\r\n            show: true,\r\n            feature: {\r\n            \r\n            saveAsImage: { show: true }\r\n            }\r\n        },\r\n        calculable: true,\r\n        xAxis: [\r\n            {\r\n            type: 'category',\r\n            // prettier-ignore\r\n            data: xaxis,\r\n            name: 'Tissue',\r\n            nameGap: 30,\r\n            axisLabel: { //设置x轴的字\r\n                show:true,\r\n                interval:0,//使x轴横坐标全部显示\r\n                textStyle: {//x轴字体样式\r\n                    // color: \"rgba(219,225,255,1)\",\r\n                    margin: 0\r\n                },\r\n                rotate:15,\r\n                },\r\n            \r\n        }\r\n        ],\r\n        yAxis: [\r\n            {\r\n            type: 'value',\r\n            name: 'Average TPM value',\r\n            }\r\n        ],\r\n        series: seriesData\r\n    };\r\n    myChart.clear()\r\n    setTimeout(() => {\r\n        option && myChart.setOption(option);\r\n    }, 200); \r\n  },\r\ndrawGoRectChart(value,svgContainer,dataclass,shortName,latinName,commonName,geneName,taxonid,hdbid){\r\n    let rectHeight=18;\r\n    // 绘制文字部分\r\n    let tooltip = d3.select('.tables')\r\n        .append('div')\r\n        .attr(\"id\", \"tooltip\")\r\n        .style('position', 'absolute')\r\n        .style('z-index', '1000')\r\n        .style('display','none')\r\n        .style('line-height','18px')\r\n        .style('text-align','justify')\r\n        .style('font-size', '14px')\r\n        .style('text-align','left')\r\n        .style('padding', '15px')\r\n        .style('border-radius',\"5%\")\r\n        .style('color','white')\r\n        .style('background-color','#808080')\r\n    // 用来判断当前类别，不同类别中间间隔开\r\n    let top_class;\r\n    let class_count=0;\r\n    let class_PADDING=30;\r\n    if(dataclass==\"var\"){top_class=value[0].voClassification;}else if(dataclass==\"go\"){\r\n        top_class=value[0].topClass;\r\n    }else if(dataclass==\"expression\"){top_class=value[0].eoClassification}\r\n    for(let iii in value ){\r\n        let text_top=180;\r\n        let text_x=115;\r\n        if(dataclass==\"go\"){text_top+=25;text_x-=25}\r\n        let item=value[iii]\r\n\r\n        let G_PADDING=rectHeight;\r\n        // 不同分类间的间隔\r\n        if(dataclass==\"var\"){\r\n            if(item.voClassification!==top_class){top_class=item.voClassification;class_count+=1}\r\n        }else if(dataclass==\"go\"){\r\n            if(item.topClass!==top_class){top_class=item.topClass;class_count+=1}\r\n        }else if(dataclass==\"expression\"){\r\n            if(item.eoClassification!==top_class){top_class=item.eoClassification;class_count+=1}\r\n        }\r\n\r\n        // trait和variant注释类型比较少，所以隔宽点\r\n        // if(dataclass==\"var\"||dataclass==\"trait\"){G_PADDING+=7;}\r\n        let group_text = svgContainer.append('g').attr(\"id\", \"text_group\"+iii).attr(\"transform\",\"translate(\"+((iii*G_PADDING)+(class_PADDING*class_count)-70)+\",\"+text_top+\") rotate(-45)\")\r\n        let gene_fontsize=12\r\n        let textgs = group_text.selectAll(\"text\").data([item]).enter()\r\n        if(dataclass=='go'){\r\n            textgs.append(\"text\")\r\n                .attr(\"fill\", \"black\")\r\n                .attr(\"text-anchor\", \"start\")\r\n                .attr(\"font-family\", \"sans-serif\")\r\n                .attr(\"font-size\", gene_fontsize)\r\n                .attr(\"x\", text_x)\r\n                .attr(\"y\", text_top)\r\n                .text(d => {\r\n                    let txtfile=d.goAnnotations\r\n                    if(d.goAnnotations.length>40){\r\n                        txtfile=d.goAnnotations.slice(0,40)+\"...\"\r\n                    }\r\n                    return  txtfile\r\n                })\r\n        }else if(dataclass=='var'){\r\n             textgs.append(\"text\")\r\n            .attr(\"fill\", \"black\")\r\n            .attr(\"text-anchor\", \"start\")\r\n            .attr(\"font-family\", \"sans-serif\")\r\n            .attr(\"font-size\", gene_fontsize)\r\n            .attr(\"x\", text_x)\r\n            .attr(\"y\", text_top)\r\n            .text(d => {\r\n                return  d.voAnnotaion\r\n            })\r\n        }else if(dataclass==\"expression\"){\r\n            textgs.append(\"text\")\r\n            .attr(\"fill\", \"black\")\r\n            .attr(\"text-anchor\", \"start\")\r\n            .attr(\"font-family\", \"sans-serif\")\r\n            .attr(\"font-size\", gene_fontsize)\r\n            .attr(\"x\", text_x)\r\n            .attr(\"y\", text_top)\r\n            .text(d => {\r\n                return  d.eoAnnotation\r\n            })\r\n        }\r\n        else{\r\n             textgs.append(\"text\")\r\n            .attr(\"fill\", \"black\")\r\n            .attr(\"text-anchor\", \"start\")\r\n            .attr(\"font-family\", \"sans-serif\")\r\n            .attr(\"font-size\", gene_fontsize)\r\n            .attr(\"x\", text_x)\r\n            .attr(\"y\", text_top)\r\n            .text(d => {\r\n                return  d.traitName\r\n            })\r\n        }\r\n        }\r\n    // let speciesName=\r\n    // 绘制热图rect部分\r\n    this.drawSubRectChart(value,svgContainer,dataclass,0,tooltip,shortName,latinName,commonName,geneName,taxonid,hdbid)\r\n\r\n    },\r\n    // 封装绘制rect方法\r\n    drawSubRectChart(value,svgContainer,dataclass,index,tooltip,shortName,latinName,commonName,geneName,taxonid12,hdbid){\r\n        // geneName=geneName.length>10?geneName.slice(0,10)+\"..\":geneName;\r\n        let rectHeight=18\r\n        let rect_top=228;\r\n        if(dataclass==\"go\"){rect_top+=60}\r\n        // let RECT_WIDTH=rectHeight;\r\n        // let rect_height=rectHeight;\r\n        let PADDING=rectHeight;\r\n        let oriSvgHeight=300;\r\n        if(dataclass==\"go\"){oriSvgHeight=400}\r\n        svgContainer.attr('height',`${oriSvgHeight+index*18}`)\r\n        let group_total;\r\n        if(index==0){\r\n            group_total = svgContainer.append('g').attr(\"id\", \"group_total_0\").attr('transform',`translate(0,${PADDING*index})`)\r\n        }else{\r\n            group_total = svgContainer.append('g').attr(\"id\", \"group_total_\"+dataclass).attr('transform',`translate(0,${PADDING*index})`)\r\n        }\r\n        let gene_fontsize=12\r\n        group_total.append('text')\r\n            .attr('x',0)\r\n            .attr('y',rect_top+rectHeight/2+5)\r\n            .attr(\"font-size\", gene_fontsize)\r\n            .text(`${geneName.length>10?geneName.slice(0,10)+\"..\":geneName}(${shortName})`)\r\n        let rect_group = group_total.selectAll(\"rect\")\r\n            .data(value)\r\n            .enter()\r\n        let RECT_PADDING=rectHeight;\r\n        let RECT_x=128;\r\n        // 判断绘图时的数据类别，不同类别间隔开\r\n        let top_class;\r\n        let class_count=0;\r\n        let class_PADDING=30;\r\n        var _this=this;\r\n        _this.$axios=this.$axios;\r\n        \r\n        if(dataclass==\"var\"){top_class=value[0].voClassification;}else if(dataclass==\"go\"){\r\n            top_class=value[0].topClass;\r\n        }else if(dataclass==\"expression\"){top_class=value[0].eoClassification}\r\n\r\n\r\n        // if(dataclass==\"var\"||dataclass==\"trait\"){RECT_PADDING=25;}\r\n        rect_group.append('rect')\r\n        .attr(\"x\", (d, i) => {\r\n             // 不同分类间的间隔\r\n            if(dataclass==\"var\"){\r\n                if(d.voClassification!==top_class){top_class=d.voClassification;class_count+=1}\r\n            }else if(dataclass==\"go\"){\r\n                if(d.topClass!==top_class){top_class=d.topClass;class_count+=1}\r\n            }else if(dataclass==\"expression\"){\r\n                if(d.eoClassification!==top_class){top_class=d.eoClassification;class_count+=1}\r\n            }\r\n\r\n            let startRate = RECT_x+i*RECT_PADDING+class_count*class_PADDING\r\n            return startRate\r\n        })\r\n        .attr(\"y\", rect_top )\r\n        .attr(\"width\", rectHeight )\r\n        .attr(\"height\", rectHeight )\r\n        .attr(\"fill\", d=>d.opacity>0?\"rgba(141,192,252,\"+(d.opacity+0.2)+\")\":\"rgba(141,192,252,0)\")\r\n        .attr('stroke',\"darkgray\")\r\n        .attr('cursor',d=>d.opacity>0?'pointer':'')\r\n        .on(\"mousemove\", function(d, i){\r\n            let htmlInfo;\r\n            if( dataclass ==\"go\"){\r\n                htmlInfo=`\r\n            <div><strong>Gene ID: </strong>${geneName}</div>\r\n            <div><strong>Species: </strong>${latinName} (${commonName})</div>\r\n            <div><strong>GO Annotation Number: </strong>${i.goNum>0?i.goNum:\"-\"}</div>\r\n            <div><strong>GO ID: </strong>${i.goId}</div>\r\n            <div><strong>Annotate Subclass GO ID: </strong>${i.goList==null?\"-\":i.goList.slice(0,2)}${i.goList!==null&&i.goList.length>2?\"...\":\"\"}</div>\r\n            <div><strong>Go Term: </strong>${i.goAnnotations}</div>\r\n            <div><strong>Go Classification: </strong>${i.topClass}</div>\r\n            <div><strong>Go Definition: </strong>${i.definition}</div>\r\n            `\r\n            }else if( dataclass ==\"var\"){\r\n                 htmlInfo=`\r\n            <div><strong>Gene ID: </strong>${geneName}</div>\r\n            <div><strong>Species: </strong>${latinName} (${commonName})</div>\r\n            <div>Variant Number: ${i.snpNum>0?i.snpNum:\"-\"}</div>\r\n            <div>Variant List: ${i.snpList==null?\"-\":i.snpList.slice(0,2)}${i.snpList!==null&&i.snpList.length>2?\"...\":\"\"}</div>\r\n            <div>Consequence Type: ${i.voAnnotaion}</div>\r\n            <div>Effect: ${i.voClassification}</div>\r\n\r\n            `\r\n            }else if( dataclass ==\"expression\"){\r\n                htmlInfo=`\r\n            <div><strong>Gene ID: </strong>${geneName}</div>\r\n            <div><strong>Species: </strong>${latinName} (${commonName})</div>\r\n            <div>Expression Project Number: ${i.prjNum>0?i.prjNum:\"-\"}</div>\r\n            <div>Bioproject List: ${i.prjList==null?\"-\":i.prjList.slice(0,2)}${i.prjList!==null&&i.prjList.length>2?\"...\":\"\"}</div>\r\n            <div>Expression Classification: ${i.eoClassification}</div>\r\n            <div>Expression Annotation: ${i.eoAnnotation}</div>\r\n            `\r\n            }else {\r\n                htmlInfo=`\r\n            <div><strong>Gene ID: </strong>${geneName}</div>\r\n            <div><strong>Species: </strong>${latinName} (${commonName})</div>\r\n            <div>Gwas Number: ${i.gwasNum>0?i.gwasNum:\"-\"}</div>\r\n            <div>Gwas List: ${i.gwasList==null?\"-\":i.gwasList.slice(0,2)}${i.gwasList!==null&&i.gwasList.length>2?\"...\":\"\"}</div>\r\n            <div>Trait ID: ${i.traitId}</div>\r\n            <div>Trait Name: ${i.traitName}</div>\r\n            `\r\n            }\r\n            let pos_y=d.pageY+20;\r\n            let WIDTH=350\r\n            let pos_x=d.pageX+20;\r\n            if(pos_x+WIDTH>d.clientX){\r\n                pos_x-=WIDTH\r\n            }\r\n            \r\n            tooltip.interrupt().style(\"display\", \"block\").html(htmlInfo)\r\n                .style(\"opacity\",\"0.8\")\r\n                .style(\"border\",\"none\")\r\n                .style('text-align','left')\r\n                .style('top', pos_y+\"px\")\r\n                .style('left',pos_x+\"px\")\r\n                .style('width',WIDTH+\"px\")\r\n        })\r\n        .on('mouseout', function () {\r\n            tooltip.style('display', 'none')\r\n        })\r\n        \r\n        .on(\"click\", function(d,i){\r\n            \r\n            // 改变当前节点的颜色\r\n            // let classification=this.geneBasicInfo.speciesName.classification;\r\n            if(dataclass==\"var\"){\r\n                // 恢复上一次点击的节点颜色\r\n                \r\n                if(i.snpList.length>0){\r\n                    if(i.opacity>0){\r\n                        if(Object.keys(_this.rectData_var).indexOf(\"opacity\")>-1){\r\n                            d3.select(_this.formerRect_var).style(\"fill\",\"rgba(141,192,252,\"+(_this.rectData_var.opacity+0.2)+\")\");\r\n                        }\r\n                    // 更新上次节点为本次点击的节点及数据\r\n                        _this.formerRect_var=this;\r\n                        _this.rectData_var=i;\r\n                        d3.select(this).style(\"fill\", \"#3CB371\");\r\n                        _this.varLoading=true;\r\n                        _this.showVarInfoTable=true;\r\n                        let dataSource=i.dataSource;\r\n\r\n                    _this.$axios.get(\"https://ngdc.cncb.ac.cn/hapi/api/species-gwasVar\",{params:{'taxonId': taxonid12,\"hdbId\":hdbid}}).then(response=>{\r\n                        // gwasid是用来加链接的，varid加到gvm的链接\r\n                        let gwasid=response.data.gwasOrgid;\r\n                        let gwasGeneId=response.data.gwasGeneId;\r\n\r\n                        let BASEPATH=\"\";\r\n                        if(dataSource != null && dataSource.length >0 ){\r\n                        if(dataSource.indexOf(\"v2\")>0){BASEPATH=\"https://ngdc.cncb.ac.cn/gvmRESTV2/v2/variants/getlist?dataSource=\"}\r\n                        else{BASEPATH=\"https://ngdc.cncb.ac.cn/gvmRESTV3/v2/variants/getlist?dataSource=\"}\r\n                        \r\n                        let snpAll=i.snpList.join(',')\r\n                        if(BASEPATH.length>0){\r\n                        let PATH=BASEPATH+dataSource+\"&snplist=\"+snpAll+\"&geneId=\"+gwasGeneId;\r\n                        if(i.snpList.length>0){\r\n                            _this.$axios.get(PATH).then(response=>{\r\n                                // this.showVarInfoTable=true;\r\n                                // var table绑定返回的snp数据\r\n                                _this.varList=[];\r\n                                if(response.data != null){\r\n                                    _this.varList=response.data.snp;\r\n                                // for(let item of tresponse.data.snp){}\r\n                                if(_this.varList.length){_this.varList=response.data.snp;}else{_this.varList=[response.data.snp];}\r\n                                for(let item of _this.varList){\r\n                                    let pos=item.chrom+\":\"+item.position;\r\n                                    let allele=item.refallele+\"/\"+item.allele;\r\n                                    let maf=item.maf+\":\"+item.maffreq.slice(0,7);\r\n                                    let classsnp=\"SNP\";\r\n                                    item.finalposition=pos;\r\n                                //item.position=pos;\r\n                                //item.allele=allele;\r\n                                //item.maf=maf;\r\n                                    item.finalallele=allele;\r\n                                    item.finalmaf=maf;\r\n                                    item.snpClassId=classsnp;\r\n                                    item.gwasid=gwasid;\r\n                                    item.alleleChange=item.gene.sourceAllele+\"=>\"+item.gene.targetAllele;\r\n                                    item.residueChange=item.gene.sourceResidue+\"=>\"+item.gene.targetResidue;\r\n                                    if(Array.isArray(item.gene)){\r\n                                        let geneName=[]\r\n                                        let consequence_type=[]\r\n                                        for(let geneitem of item.gene){\r\n                                            geneName.push(geneitem.genename)\r\n                                            if(consequence_type.indexOf(geneitem.conseqtype)==-1){\r\n                                                consequence_type.push(geneitem.conseqtype)\r\n                                            }\r\n                                        }\r\n                                        item.geneName=geneName.join(\",\");\r\n                                        item.conseqtype=consequence_type.join(\",\");\r\n                                    }else{\r\n                                        item.geneName=item.gene.genename\r\n                                        item.conseqtype=item.gene.conseqtype\r\n                                    }\r\n                                }\r\n                                \r\n                                }\r\n                                _this.varLoading=false;\r\n                            })\r\n                        }\r\n                        }\r\n                        }\r\n                    })\r\n                }\r\n            }}else if(dataclass==\"go\"){\r\n                if(i.goList.length>0){\r\n                    if(Object.keys(_this.rectData_go).indexOf(\"opacity\")>-1){\r\n                        d3.select(_this.formerRect_go).style(\"fill\",\"rgba(141,192,252,\"+(_this.rectData_go.opacity+0.2)+\")\");\r\n                    }\r\n                    // 更新上次节点为本次点击的节点及数据\r\n                    _this.formerRect_go=this;\r\n                    _this.rectData_go=i;\r\n                    d3.select(this).style(\"fill\", \"#3CB371\");\r\n                    if(typeof i.goList == \"string\"){\r\n                        _this.goInfoData=[i]\r\n                    }else{\r\n                        let list=i.goList.join(\",\")\r\n                        i.goList=list;\r\n                        _this.goInfoData=[i]\r\n                    }\r\n                    \r\n                    // this.goInfoData.goList=listgo\r\n                    _this.showGoTable=true;\r\n                }\r\n            }else if(dataclass==\"trait\"){\r\n                if(i.gwasList.length>0){\r\n                    if(Object.keys(_this.rectData_trait).indexOf(\"opacity\")>-1){\r\n                        d3.select(_this.formerRect_trait).style(\"fill\",\"rgba(141,192,252,\"+(_this.rectData_trait.opacity+0.2)+\")\");\r\n                    }\r\n                    // 更新上次节点为本次点击的节点及数据\r\n                    _this.formerRect_trait=this;\r\n                    _this.rectData_trait=i;\r\n                    d3.select(this).style(\"fill\", \"#3CB371\");\r\n\r\n                    _this.goloading=true;\r\n                    _this.showTraitTable=true;\r\n                    let gwaslist=i.gwasList.join(\",\")\r\n                    // this.traitData=[i]\r\n                    _this.$axios.get(\"https://ngdc.cncb.ac.cn/hapi/api/species-gwasorg\",{params:{'taxonId': taxonid12,\"hdbId\":hdbid}}).then(response=>{\r\n                        let gwasid=response.data.gwasOrgid;\r\n                        let gwasGeneId=response.data.gwasGeneId;\r\n                        _this.$axios.get(\"https://ngdc.cncb.ac.cn/gapi/gwas/gwasids?gwasId=\"+gwaslist+\"&organismId=\"+gwasid+\"&offset=0&pagesize=10&total=10&geneId=\"+gwasGeneId)\r\n                        .then(response=>{\r\n                            let resDara=response.data\r\n                            for(let item of resDara){\r\n                                item.gwasGeneId=gwasGeneId;\r\n                                item.toptraitName=i.traitName;\r\n                            }\r\n                            _this.traitData=resDara;\r\n                        }).finally(()=>{\r\n                            setTimeout(() => {\r\n                            _this.goloading=false;\r\n                        }, 100);\r\n                    })\r\n                        \r\n                    })\r\n                   \r\n                }\r\n            }else if(dataclass==\"expression\"){\r\n                if(i.prjList.length>0){\r\n                    if(Object.keys(_this.rectData_exp).indexOf(\"opacity\")>-1){\r\n                        d3.select(_this.formerRect_exp).style(\"fill\",\"rgba(141,192,252,\"+(_this.rectData_exp.opacity+0.2)+\")\");\r\n                    }\r\n                    // 更新上次节点为本次点击的节点及数据\r\n                    _this.formerRect_exp=this;\r\n                    _this.rectData_exp=i;\r\n                    d3.select(this).style(\"fill\", \"#3CB371\");\r\n                    \r\n                    _this.showExpInfoTable=true;\r\n                    _this.exploading=true;\r\n                    let prjlist=i.prjList.join(',')\r\n                    let PATH=\"https://ngdc.cncb.ac.cn/gen/api/json/gene/expressions?taxonomyId=\"+i.taxonId+\"&accession=\"+i.geneId+\"&bioProjectId=\"+prjlist\r\n                    _this.$axios.get(PATH).then(response=>{\r\n                        let expdata=response.data.result.expressionProfiles;\r\n                        let AllexpTabledata=[];\r\n                       // 循环project，每个project算tissue平均值\r\n                        for(let keyaa in expdata ){\r\n                            let expTabledata=[];\r\n                            let prjList=expdata[keyaa]\r\n                            let expNum=0;\r\n                            // let sampleNum=0;\r\n                            // 用于存储当前project有哪些tissue\r\n                            let tissue={};\r\n                            let plotData=[];\r\n                            let plptTissue=[];\r\n                            // 循环project里面的值，分tissue计算平均值\r\n                            for(let item of prjList){\r\n                                // sampleNum += 1;\r\n                                expNum += item.tpm;\r\n                                let itemTissue=item.tissue;\r\n                                if(Object.keys(tissue).indexOf(itemTissue) == -1 ){\r\n                                    tissue[itemTissue]=[expNum]\r\n                                    plptTissue.push(itemTissue)\r\n                                }else{\r\n                                    tissue[itemTissue].push(expNum)\r\n                                }\r\n                            }\r\n                            for(let tissueName in tissue){\r\n                                let valueList=tissue[tissueName]\r\n                                let valsum=eval(valueList.join(\"+\"))\r\n                                let expAvg=(valsum/valueList.length).toFixed(4)\r\n                                let item={\r\n                                    \"projectId\":keyaa,\r\n                                    \"tissue\":tissueName,\r\n                                    \"expAvg\":Number(expAvg),\r\n                                    \"geneId\":i.geneId,\r\n                                    \"geneName\":i.geneId+ \" (\"+geneName+\")\",\r\n                                    \"geneSymbol\":geneName,\r\n                                    \"genOrgId\":i.genOrgid,\r\n                                    \"taxonId\":i.taxonId,\r\n                                    \"speciesName\":latinName+ \" (\"+commonName+\")\"\r\n                                }\r\n                                plotData.push(expAvg);\r\n                                expTabledata.push(item)\r\n                            }\r\n                            for(let item of expTabledata){\r\n                                item.plotData=plotData;\r\n                                item.plptTissue=plptTissue;\r\n                            }\r\n                            AllexpTabledata=AllexpTabledata.concat(expTabledata)\r\n                        }\r\n                        _this.exploading=false;\r\n                        _this.oriexpTabledata=AllexpTabledata;\r\n                        _this.expTabledata=AllexpTabledata;\r\n                    })\r\n                }\r\n            }\r\n    \r\n    })\r\n},\r\n    hiligtDbCols({rowIndex, columnIndex}){\r\n        if(rowIndex===0 && columnIndex>=6){\r\n            return \"color: #fff;background-color:rgba(92,165,214,0.7) !important\"\r\n        }\r\n    },\r\n    filterExpDara(){\r\n        this.expTabledata= this.oriexpTabledata.filter(item=>{\r\n            return Number(item.expAvg)>Number(this.filterValue)\r\n        })\r\n    },\r\n    showOriExp(){\r\n        this.expTabledata= this.oriexpTabledata\r\n    }\r\n  },\r\n  mounted:function () {\r\n    // if(window.matchMedia(\"(max-width: 767px)\").matches){\r\n    //     this.windowSize=1;\r\n    //    console.log(\"这是一个移动设备。\");\r\n\r\n    // }else if(window.matchMedia(\"(max-width: 992px)\").matches){\r\n    //     this.windowSize=2;\r\n    //     console.log(\"这是平板电脑或台式电脑。\");\r\n\r\n    // }else{\r\n    //     this.windowSize=3;\r\n    //     console.log(\"大屏\");\r\n    // }\r\n\r\n    // let loadingService = Loading.service({\r\n    //     lock: true,\r\n    //     text: 'Loading',\r\n    //     spinner: 'el-icon-loading',\r\n    //     background: 'rgba(0, 0, 0, 0.7)',\r\n    //     fullscreen:true\r\n    // });\r\n    let hdbId = this.$route.query.hdbId;\r\n    // 查询go，var，trait需要ensembl gene id\r\n    let taxonId=this.$route.query.taxonId;\r\n    // let ensemblGeneId;\r\n    this.$axios\r\n    // 获取gene basic info的接口，目前是查询entrez id\r\n    // 返回两个list数据，0是gbiinfo，1是ortholist\r\n      .get('https://ngdc.cncb.ac.cn/hapi/api/gene-detail',{params: {'hdbId': hdbId, 'taxonid': taxonId}})\r\n      .then(response => {\r\n        this.loading=false;\r\n        let genedetail = response.data[0];\r\n        this.geneBasicInfo=genedetail[0];\r\n        // ensemblGeneId=this.geneBasicInfo.ensemblGeneId;\r\n        let orthoList = response.data[1];\r\n        // this.goBsicList=response.data[2];\r\n        // 绘制初始热图\r\n    //    geneSymbol=genedetail[0].geneSymbol;\r\n        this.tableData = genedetail;\r\n        // 存储同源数据\r\n        \r\n        \r\n        let ortho=[]\r\n        let hdblist=[]\r\n        console.log(\"orthoList:\",orthoList);\r\n        for(let item of  orthoList){\r\n            if(item.orthoPosition==1){\r\n                let commonName = item.commonName1?item.commonName1:\"-\";\r\n                let ensemblId = item.ensemblId1?item.ensemblId1:\"-\";\r\n                let uniprotId= item.uniprotId1?item.uniprotId1:\"-\";\r\n                let ensemblGeneId = item.ensmeblGeneId1?item.ensmeblGeneId1:\"-\";\r\n                let entrezId=item.entrezId1?item.entrezId1:\"-\";\r\n                let geneSymbol=item.geneSymbol1?item.geneSymbol1:\"-\";\r\n                let hdbGeneId=item.hdbGeneId1?item.hdbGeneId1:\"-\";\r\n                let taxId=item.taxId1?item.taxId1:\"-\";\r\n                let expGeneId=item.expGeneId1;\r\n                let shortName=item.shortName1;\r\n                let dbEvidence=item.dbEvidence;\r\n                let fromDb=item.fromDb;\r\n                let latinName=item.latinName1\r\n                let orthoitem={\r\n                    \"commonName\":commonName,\r\n                    \"ensemblId\":ensemblId,\r\n                    \"uniprotId\":uniprotId,\r\n                    \"entrezId\":entrezId,\r\n                    \"geneSymbol\":geneSymbol,\r\n                    \"hdbGeneId\":hdbGeneId,\r\n                    \"taxId\":taxId,\r\n                    \"dbEvidence\":dbEvidence,\r\n                    \"fromDb\":fromDb,\r\n                    \"shortName\":shortName,\r\n                    \"latinName\":latinName,\r\n                    \"expGeneId\":expGeneId,\r\n                    \"ensemblGeneId\":ensemblGeneId,\r\n                    \"inparanoidID1\":item.inparanoidID1,\r\n                    \"inparanoidID2\":item.inparanoidID2,\r\n                }\r\n\r\n                // let dbContent=[];\r\n                let dbContent=fromDb.split(',')\r\n                // let treefamlink=\"http://www.treefam.org/family/\"\r\n                // let egglink=\"http://eggnog5.embl.de/#/app/results#ENOG501\"\r\n                // let pantherlink=\"http://www.pantherdb.org/panther/family.do?clsAccession=\"\r\n                // let inparalink=\"https://inparanoid.sbc.su.se/cgi-bin/efasta.cgi?cluster=\"\r\n                // dblist.forEach(element => {\r\n                //     let dbName=element.split(':')[0];\r\n                //     let dbVal=element.split(':')[1];\r\n                //     if(dbName==\"TreeFam\"){\r\n                //         dbContent+='<a target=\"_blank\" :href=\"'+treefamlink+dbVal+'\">'+dbVal+'</a>'\r\n                //     }else  if(dbName==\"eggNOG\"){\r\n                //         dbContent+='<a target=\"_blank\" :href=\"'+egglink+dbVal+\"_datamenu\"+'\">'+dbVal+'</a>'\r\n                //     }else if(dbName==\"Panther\"){\r\n                //         dbContent+='<a target=\"_blank\" :href=\"'+pantherlink+dbVal+'\">'+dbVal+'</a>'\r\n                //     }else if(dbName==\"Inparanoid\"){\r\n                //         dbContent+='<a target=\"_blank\" :href=\"'+inparalink+dbVal+\"&species1=240&species2=4&java=0\"+'\">'+dbVal+'</a>'\r\n                //     }\r\n                // });\r\n                orthoitem.dbContent=dbContent;\r\n                // 去重，保存唯一的hdbid\r\n                if(hdblist.indexOf(hdbGeneId)==-1){\r\n                    ortho.push(orthoitem)\r\n                    hdblist.push(hdbGeneId)\r\n                }\r\n\r\n            }else{\r\n                let commonName = item.commonName2?item.commonName2:\"-\";\r\n                let ensemblId = item.ensemblId2?item.ensemblId2:\"-\";\r\n                let uniprotId= item.uniprotId2?item.uniprotId2:\"-\";\r\n                let ensemblGeneId = item.ensmeblGeneId2?item.ensmeblGeneId2:\"-\";\r\n                let entrezId=item.entrezId2?item.entrezId2:\"-\";\r\n                let geneSymbol=item.geneSymbol2?item.geneSymbol2:\"-\";\r\n                let hdbGeneId=item.hdbGeneId2?item.hdbGeneId2:\"-\";\r\n                let taxId=item.taxId2?item.taxId2:\"-\"\r\n                let dbEvidence=item.dbEvidence;\r\n                let fromDb=item.fromDb;\r\n                let shortName=item.shortName2;\r\n                let expGeneId=item.expGeneId2;\r\n                let latinName=item.latinName2;\r\n\r\n                let dbContent=fromDb.split(',')\r\n                // let dblist=fromDb.split(',')\r\n                // let treefamlink=\"http://www.treefam.org/family/\"\r\n                // let egglink=\"http://eggnog5.embl.de/#/app/results#ENOG501\"\r\n                // let pantherlink=\"http://www.pantherdb.org/panther/family.do?clsAccession=\"\r\n                // let inparalink=\"https://inparanoid.sbc.su.se/cgi-bin/efasta.cgi?cluster=\"\r\n                // dblist.forEach(element => {\r\n                //     let dbName=element.split(':')[0];\r\n                //     let dbVal=element.split(':')[1];\r\n                //     if(dbName==\"TreeFam\"){\r\n                //         dbContent+='<a target=\"_blank\" :href=\"'+treefamlink+dbVal+'\">'+dbVal+'</a>'\r\n                //     }else  if(dbName==\"eggNOG\"){\r\n                //         dbContent+='<a target=\"_blank\" :href=\"'+egglink+dbVal+\"_datamenu\"+'\">'+dbVal+'</a>'\r\n                //     }else if(dbName==\"Panther\"){\r\n                //         dbContent+='<a target=\"_blank\" :href=\"'+pantherlink+dbVal+'\">'+dbVal+'</a>'\r\n                //     }else if(dbName==\"Inparanoid\"){\r\n                //         dbContent+='<a target=\"_blank\" :href=\"'+inparalink+dbVal+\"&species1=240&species2=4&java=0\"+'\">'+dbVal+'</a>'\r\n                //     }\r\n                // });\r\n                // item.dbContent=dbContent;\r\n                let orthoitem={\r\n                    \"commonName\":commonName,\r\n                    \"ensemblId\":ensemblId,\r\n                    \"uniprotId\":uniprotId,\r\n                    \"entrezId\":entrezId,\r\n                    \"geneSymbol\":geneSymbol,\r\n                    \"hdbGeneId\":hdbGeneId,\r\n                    \"taxId\":taxId,\r\n                    \"dbEvidence\":dbEvidence,\r\n                    \"fromDb\":fromDb,\r\n                    \"shortName\":shortName,\r\n                    \"latinName\":latinName,\r\n                    \"expGeneId\":expGeneId,\r\n                    \"ensemblGeneId\":ensemblGeneId,\r\n                    'dbContent':dbContent,\r\n                    \"inparanoidID1\":item.inparanoidID1,\r\n                    \"inparanoidID2\":item.inparanoidID2,\r\n                }\r\n                // orthoitem.dbContent=dbContent;\r\n                if(hdblist.indexOf(hdbGeneId)==-1){\r\n                    ortho.push(orthoitem)\r\n                    hdblist.push(hdbGeneId)\r\n                }\r\n            }\r\n            \r\n        }\r\n        this.tableOrthoList=ortho;\r\n        console.log(\"this.tableOrthoList:\",this.tableOrthoList);\r\n        this.orthoInfo=ortho;\r\n        //   将多个结果合并成一个\r\n        if(genedetail.length>1){\r\n            let obj=genedetail[0]\r\n            for(let j=1;j<= genedetail.length;j++){\r\n                let obj2=genedetail[j];\r\n                for(let key in obj2){\r\n                    if(key !== \"speciesName\"){\r\n                        if(obj[key] !== obj2[key]){\r\n                            let newVal =obj[key]+ \",\"+obj2[key]\r\n                            obj[key]=newVal\r\n                        }\r\n                    }\r\n            }\r\n        }\r\n            this.geneBasicInfo=obj;\r\n            \r\n        }\r\n        console.log(\"this.geneBasicInfo:\",this.geneBasicInfo);\r\n    }).finally(()=>{\r\n        this.fullLoading=false;\r\n        let svg_height=480;\r\n        // let geneName=\"ENSGALG00000023443\"\r\n        let specName=this.geneBasicInfo.speciesName.shortName;\r\n        let latinName=this.geneBasicInfo.speciesName.latinName;\r\n        let commonName=this.geneBasicInfo.speciesName.commonName;\r\n        // let hdbid=this.geneBasicInfo.hdbGeneId;\r\n        let symbol;\r\n        if(this.geneBasicInfo.geneSymbol.length>0){\r\n            symbol=this.geneBasicInfo.geneSymbol;\r\n        }else{\r\n            symbol=this.geneBasicInfo.ensemblGeneId;\r\n        }\r\n        this.classification=this.geneBasicInfo.speciesName.classification;\r\n        this.$axios.get('https://ngdc.cncb.ac.cn/hapi/api/gene-detail-go-1',{params: {'hdbId': hdbId}}).then(response=>{\r\n            if(response.data.length>0){\r\n                this.goloading=false;\r\n                // this.goList=response.data\r\n                if(response.data.length>0){\r\n                let svgContainer = d3.select(\"#svg-container-go\").append(\"svg\").attr(\"width\", \"1450px\").attr(\"height\", svg_height+60).attr('id', 'svgcontainer-go');\r\n                this.drawGoRectChart(response.data,svgContainer,\"go\",specName,latinName,commonName,symbol,this.geneBasicInfo.taxonId,this.geneBasicInfo.hdbGeneId)\r\n                }\r\n            }\r\n        })\r\n        this.$axios.get('https://ngdc.cncb.ac.cn/hapi/api/gene-detail-var-1',{params: {'hdbId': hdbId}}).then(response=>{\r\n            if(response.data.length>0){\r\n            let svgContainer = d3.select(\"#svg-container-var\").append(\"svg\").attr(\"width\", \"98%\").attr(\"height\", svg_height).attr('id', 'svgcontainer-var');\r\n            this.drawGoRectChart(response.data,svgContainer,\"var\",specName,latinName,commonName,symbol,this.geneBasicInfo.taxonId,this.geneBasicInfo.hdbGeneId)\r\n            }\r\n        })\r\n        // let traitGeneName=\"Os05g0556300\"\r\n        this.$axios.get('https://ngdc.cncb.ac.cn/hapi/api/gene-detail-trait-1',{params: {'hdbId': hdbId}}).then(response=>{\r\n            let svgContainer = d3.select(\"#svg-container-trait\").append(\"svg\").attr(\"width\", \"98%\").attr(\"height\", svg_height).attr('id', 'svgcontainer-trait');\r\n            if(response.data.length>0){\r\n                this.drawGoRectChart(response.data,svgContainer,\"trait\",specName,latinName,commonName,symbol,this.geneBasicInfo.taxonId,this.geneBasicInfo.hdbGeneId)\r\n            }\r\n        })\r\n        this.$axios.get('https://ngdc.cncb.ac.cn/hapi/api/species-list',{params: {'taxonId': \"\"+taxonId}}).then(response=>{\r\n            this.species=response.data\r\n        })\r\n        this.$axios.get('https://ngdc.cncb.ac.cn/hapi/api/gene-detail-expression-1',{params: {'hdbId': hdbId,'classification':this.classification}}).then(response=>{\r\n            let svgContainer = d3.select(\"#svg-container-expression\").append(\"svg\").attr(\"width\", \"1450px\").attr(\"height\", svg_height).attr('id', 'svgcontainer-expression');\r\n            // this.species=response.data\r\n            if(response.data.length>0){\r\n                this.drawGoRectChart(response.data,svgContainer,\"expression\",specName,latinName,commonName,symbol,this.geneBasicInfo.taxonId,this.geneBasicInfo.hdbGeneId)\r\n            }\r\n        })\r\n    })\r\n\r\n\r\n    window.addEventListener(\"scroll\", this.watchScroll);\r\n    // this.getTableMaxHeight();\r\n    // let _this = this;\r\n    // window.onresize = function () {//用于使表格高度自适应的方法\r\n    //     _this.getTableMaxHeight();//获取容器当前高度，重设表格的最大高度\r\n    // }\r\n  },\r\n\r\n}\r\n</script>\r\n"]}]}